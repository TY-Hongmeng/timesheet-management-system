// ÁßªÂä®Á´ØÊÄßËÉΩ‰ºòÂåñÂ∑•ÂÖ∑

// Ê£ÄÊµãÁßªÂä®ËÆæÂ§á
export const isMobileDevice = (): boolean => {
  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || 
         window.innerWidth <= 768
}

// Ê£ÄÊµãÁΩëÁªúËøûÊé•Á±ªÂûã
export const getConnectionType = (): string => {
  const connection = (navigator as any).connection || 
                    (navigator as any).mozConnection || 
                    (navigator as any).webkitConnection
  
  if (connection) {
    return connection.effectiveType || 'unknown'
  }
  
  return 'unknown'
}

// Ê£ÄÊµãÊòØÂê¶‰∏∫ÊÖ¢ÈÄüËøûÊé•
export const isSlowConnection = (): boolean => {
  const connectionType = getConnectionType()
  return ['slow-2g', '2g', '3g'].includes(connectionType)
}

// Ëé∑ÂèñÂΩìÂâçÈ°µÈù¢ÁöÑËµÑÊ∫êÊñá‰ª∂
const getCurrentAssets = () => {
  const scripts = Array.from(document.querySelectorAll('script[src]'))
  const styles = Array.from(document.querySelectorAll('link[rel="stylesheet"]'))
  
  return {
    reactVendor: scripts.find(s => s.src.includes('react-vendor'))?.src || '',
    mainCSS: styles.find(s => s.href.includes('index-'))?.href || '',
    vendor: scripts.find(s => s.src.includes('vendor-'))?.src || ''
  }
}

// ÁßªÂä®Á´ØÁΩëÁªúÁä∂ÊÄÅÁõëÊéßÂíåÈáçËØïÊú∫Âà∂
export const mobileNetworkManager = {
  retryCount: 0,
  maxRetries: 3,
  retryDelay: 2000,
  
  // Ê£ÄÊµãÁΩëÁªúÁä∂ÊÄÅ
  checkNetworkStatus: () => {
    return {
      online: navigator.onLine,
      connection: (navigator as any).connection || (navigator as any).mozConnection || (navigator as any).webkitConnection,
      effectiveType: ((navigator as any).connection || {}).effectiveType || 'unknown'
    }
  },
  
  // ÁΩëÁªúÈáçËØïÊú∫Âà∂
  retryWithBackoff: async (fn: () => Promise<any>, context: string = 'operation') => {
    for (let attempt = 1; attempt <= mobileNetworkManager.maxRetries; attempt++) {
      try {
        console.log(`üîÑ ÁßªÂä®Á´ØÁΩëÁªúÈáçËØï ${attempt}/${mobileNetworkManager.maxRetries} - ${context}`)
        const result = await fn()
        mobileNetworkManager.retryCount = 0 // ÈáçÁΩÆËÆ°Êï∞Âô®
        return result
      } catch (error) {
        console.warn(`‚ùå ÁßªÂä®Á´ØÁΩëÁªúÈáçËØïÂ§±Ë¥• ${attempt}/${mobileNetworkManager.maxRetries}:`, error)
        
        if (attempt === mobileNetworkManager.maxRetries) {
          throw new Error(`ÁßªÂä®Á´ØÁΩëÁªúÊìç‰ΩúÂ§±Ë¥•ÔºåÂ∑≤ÈáçËØï ${mobileNetworkManager.maxRetries} Ê¨°: ${error}`)
        }
        
        // ÊåáÊï∞ÈÄÄÈÅøÂª∂Ëøü
        const delay = mobileNetworkManager.retryDelay * Math.pow(2, attempt - 1)
        await new Promise(resolve => setTimeout(resolve, delay))
      }
    }
  },
  
  // ÁΩëÁªúÁä∂ÊÄÅÂèòÂåñÁõëÂê¨
  setupNetworkMonitoring: () => {
    if (!isMobileDevice()) return
    
    window.addEventListener('online', () => {
      console.log('üì∂ ÁßªÂä®Á´ØÁΩëÁªúÂ∑≤ÊÅ¢Â§ç')
      mobileNetworkManager.retryCount = 0
      
      // Ëß¶ÂèëËá™ÂÆö‰πâ‰∫ã‰ª∂
      window.dispatchEvent(new CustomEvent('mobileNetworkRestored', {
        detail: { timestamp: Date.now(), networkStatus: mobileNetworkManager.checkNetworkStatus() }
      }))
    })
    
    window.addEventListener('offline', () => {
      console.log('üìµ ÁßªÂä®Á´ØÁΩëÁªúÂ∑≤Êñ≠ÂºÄ')
      
      // Ëß¶ÂèëËá™ÂÆö‰πâ‰∫ã‰ª∂
      window.dispatchEvent(new CustomEvent('mobileNetworkLost', {
        detail: { timestamp: Date.now() }
      }))
    })
    
    // ÁõëÂê¨ËøûÊé•ÂèòÂåñ
    const connection = (navigator as any).connection || (navigator as any).mozConnection || (navigator as any).webkitConnection
    if (connection) {
      connection.addEventListener('change', () => {
        const status = mobileNetworkManager.checkNetworkStatus()
        console.log('üì° ÁßªÂä®Á´ØÁΩëÁªúÁä∂ÊÄÅÂèòÂåñ:', status)
        
        window.dispatchEvent(new CustomEvent('mobileConnectionChange', {
          detail: { 
            type: status.effectiveType === 'slow-2g' || status.effectiveType === '2g' ? 'slow' : 'fast',
            networkStatus: status,
            timestamp: Date.now()
          }
        }))
      })
    }
  }
}

// ÁßªÂä®Á´ØËµÑÊ∫êÈ¢ÑÂä†ËΩΩÁ≠ñÁï• - Â¢ûÂº∫Áâà
export const mobilePreloadStrategy = {
  // ÂÖ≥ÈîÆËµÑÊ∫êÁ´ãÂç≥È¢ÑÂä†ËΩΩ
  critical: () => {
    if (isMobileDevice() && !isSlowConnection()) {
      const assets = getCurrentAssets()
      
      // È¢ÑÂä†ËΩΩÂÖ≥ÈîÆ CSS
      if (assets.mainCSS) {
        const criticalCSS = document.createElement('link')
        criticalCSS.rel = 'preload'
        criticalCSS.as = 'style'
        criticalCSS.href = assets.mainCSS
        criticalCSS.onload = () => console.log('‚úÖ ÁßªÂä®Á´ØÂÖ≥ÈîÆCSSÈ¢ÑÂä†ËΩΩÂÆåÊàê')
        criticalCSS.onerror = () => console.warn('‚ùå ÁßªÂä®Á´ØÂÖ≥ÈîÆCSSÈ¢ÑÂä†ËΩΩÂ§±Ë¥•')
        document.head.appendChild(criticalCSS)
      }
      
      // È¢ÑÂä†ËΩΩ vendor JS
      if (assets.vendor) {
        const vendorJS = document.createElement('link')
        vendorJS.rel = 'modulepreload'
        vendorJS.href = assets.vendor
        vendorJS.onload = () => console.log('‚úÖ ÁßªÂä®Á´ØVendor JSÈ¢ÑÂä†ËΩΩÂÆåÊàê')
        vendorJS.onerror = () => console.warn('‚ùå ÁßªÂä®Á´ØVendor JSÈ¢ÑÂä†ËΩΩÂ§±Ë¥•')
        document.head.appendChild(vendorJS)
      }
    }
  },
  
  // Âª∂ËøüÈ¢ÑÂä†ËΩΩÈùûÂÖ≥ÈîÆËµÑÊ∫ê
  deferred: () => {
    if (isMobileDevice() && !isSlowConnection()) {
      setTimeout(() => {
        // È¢ÑÂä†ËΩΩÂõæÊ†áÂ≠ó‰Ωì
        const iconFont = document.createElement('link')
        iconFont.rel = 'preload'
        iconFont.as = 'font'
        iconFont.type = 'font/woff2'
        iconFont.crossOrigin = 'anonymous'
        iconFont.href = '/timesheet-management-system/fonts/icons.woff2'
        iconFont.onload = () => console.log('‚úÖ ÁßªÂä®Á´ØÂõæÊ†áÂ≠ó‰ΩìÈ¢ÑÂä†ËΩΩÂÆåÊàê')
        iconFont.onerror = () => console.warn('‚ùå ÁßªÂä®Á´ØÂõæÊ†áÂ≠ó‰ΩìÈ¢ÑÂä†ËΩΩÂ§±Ë¥•')
        document.head.appendChild(iconFont)
      }, 2000)
    }
  },
  
  // Êô∫ËÉΩÈ¢ÑÂä†ËΩΩ‰∏ã‰∏ÄÈ°µÈù¢
  smartPreload: (nextRoute: string) => {
    if (isMobileDevice() && !isSlowConnection()) {
      // ‰ΩøÁî® Intersection Observer Ê£ÄÊµãÁî®Êà∑ÊÑèÂõæ
      const preloadTrigger = document.createElement('div')
      preloadTrigger.style.position = 'absolute'
      preloadTrigger.style.bottom = '100px'
      preloadTrigger.style.height = '1px'
      preloadTrigger.style.width = '100%'
      document.body.appendChild(preloadTrigger)
      
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            // Áî®Êà∑Êé•ËøëÈ°µÈù¢Â∫ïÈÉ®ÔºåÈ¢ÑÂä†ËΩΩ‰∏ã‰∏ÄÈ°µÈù¢
            import(/* webpackChunkName: "next-page" */ `@/pages/${nextRoute}`)
            observer.disconnect()
            document.body.removeChild(preloadTrigger)
          }
        })
      }, { threshold: 0.1 })
      
      observer.observe(preloadTrigger)
    }
  }
}

// ÁßªÂä®Á´ØÂõæÁâá‰ºòÂåñ - Â¢ûÂº∫Áâà
export const optimizeImages = () => {
  if (isMobileDevice()) {
    // ÊáíÂä†ËΩΩÂõæÁâá
    const images = document.querySelectorAll('img[data-src]')
    
    if ('IntersectionObserver' in window) {
      const imageObserver = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            const img = entry.target as HTMLImageElement
            
            // ‰ΩøÁî®ÁΩëÁªúÈáçËØïÊú∫Âà∂Âä†ËΩΩÂõæÁâá
            mobileNetworkManager.retryWithBackoff(async () => {
              return new Promise((resolve, reject) => {
                const tempImg = new Image()
                tempImg.onload = () => {
                  img.src = img.dataset.src!
                  img.removeAttribute('data-src')
                  console.log('‚úÖ ÁßªÂä®Á´ØÂõæÁâáÂä†ËΩΩÊàêÂäü:', img.dataset.src)
                  resolve(tempImg)
                }
                tempImg.onerror = () => {
                  console.warn('‚ùå ÁßªÂä®Á´ØÂõæÁâáÂä†ËΩΩÂ§±Ë¥•:', img.dataset.src)
                  reject(new Error(`ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•: ${img.dataset.src}`))
                }
                tempImg.src = img.dataset.src!
              })
            }, `ÂõæÁâáÂä†ËΩΩ: ${img.dataset.src}`).catch(error => {
              console.error('ÁßªÂä®Á´ØÂõæÁâáÊúÄÁªàÂä†ËΩΩÂ§±Ë¥•:', error)
              // ËÆæÁΩÆÂç†‰ΩçÂõæÁâá
              img.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPuWbvueJh+WKoOi9veWksei0pTwvdGV4dD48L3N2Zz4='
            })
            
            imageObserver.unobserve(img)
          }
        })
      }, { 
        rootMargin: '50px',
        threshold: 0.1
      })
      
      images.forEach(img => imageObserver.observe(img))
    } else {
      // ÈôçÁ∫ßÊñπÊ°à - ‰πü‰ΩøÁî®ÈáçËØïÊú∫Âà∂
      images.forEach(img => {
        const image = img as HTMLImageElement
        mobileNetworkManager.retryWithBackoff(async () => {
          return new Promise((resolve, reject) => {
            const tempImg = new Image()
            tempImg.onload = () => {
              image.src = image.dataset.src!
              image.removeAttribute('data-src')
              resolve(tempImg)
            }
            tempImg.onerror = () => reject(new Error(`ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•: ${image.dataset.src}`))
            tempImg.src = image.dataset.src!
          })
        }, `ÈôçÁ∫ßÂõæÁâáÂä†ËΩΩ: ${image.dataset.src}`).catch(() => {
          // ËÆæÁΩÆÂç†‰ΩçÂõæÁâá
          image.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjBmMGYwIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPuWbvueJh+WKoOi9veWksei0pTwvdGV4dD48L3N2Zz4='
        })
      })
    }
  }
}

// ÁßªÂä®Á´ØÂÜÖÂ≠ò‰ºòÂåñ
export const mobileMemoryOptimization = {
  // Ê∏ÖÁêÜÊú™‰ΩøÁî®ÁöÑÁªÑ‰ª∂
  cleanupUnusedComponents: () => {
    if (isMobileDevice()) {
      // Ê∏ÖÁêÜ DOM ‰∏≠ÁöÑÈöêËóèÂÖÉÁ¥†
      const hiddenElements = document.querySelectorAll('[style*="display: none"]')
      hiddenElements.forEach(el => {
        if (el.parentNode) {
          el.parentNode.removeChild(el)
        }
      })
    }
  },
  
  // ÈôêÂà∂Âπ∂ÂèëËØ∑Ê±ÇÊï∞Èáè
  limitConcurrentRequests: (maxConcurrent: number = 3) => {
    if (isMobileDevice()) {
      // ÂÆûÁé∞ËØ∑Ê±ÇÈòüÂàóÁÆ°ÁêÜ
      let activeRequests = 0
      const requestQueue: Array<() => Promise<any>> = []
      
      const processQueue = async () => {
        if (activeRequests < maxConcurrent && requestQueue.length > 0) {
          const request = requestQueue.shift()
          if (request) {
            activeRequests++
            try {
              await request()
            } finally {
              activeRequests--
              processQueue()
            }
          }
        }
      }
      
      return {
        addRequest: (request: () => Promise<any>) => {
          requestQueue.push(request)
          processQueue()
        }
      }
    }
    
    return {
      addRequest: (request: () => Promise<any>) => request()
    }
  }
}

// ÁßªÂä®Á´ØÁºìÂ≠òÁ≠ñÁï•
export const mobileCacheStrategy = {
  // ËÆæÁΩÆÁßªÂä®Á´Ø‰∏ìÁî®ÁöÑÁºìÂ≠òÂ§¥
  setMobileCacheHeaders: () => {
    if (isMobileDevice()) {
      // ‰∏∫ÁßªÂä®Á´ØËÆæÁΩÆÊõ¥ÊøÄËøõÁöÑÁºìÂ≠òÁ≠ñÁï•
      const meta = document.createElement('meta')
      meta.httpEquiv = 'Cache-Control'
      meta.content = 'public, max-age=31536000, immutable'
      document.head.appendChild(meta)
    }
  },
  
  // Ê∏ÖÁêÜËøáÊúüÁºìÂ≠ò
  cleanExpiredCache: async () => {
    if ('caches' in window && isMobileDevice()) {
      const cacheNames = await caches.keys()
      const expiredCaches = cacheNames.filter(name => 
        !name.includes('v1.2.0') // ÂΩìÂâçÁâàÊú¨
      )
      
      await Promise.all(
        expiredCaches.map(cacheName => caches.delete(cacheName))
      )
    }
  }
}

// ÁßªÂä®Á´ØÊÄßËÉΩÁõëÊéß
export const mobilePerformanceMonitor = {
  // ÁõëÊéßÈ¶ñÂ±èÂä†ËΩΩÊó∂Èó¥
  measureFirstContentfulPaint: () => {
    if (isMobileDevice() && 'PerformanceObserver' in window) {
      const observer = new PerformanceObserver((list) => {
        const entries = list.getEntries()
        entries.forEach(entry => {
          if (entry.name === 'first-contentful-paint') {
            console.log(`ÁßªÂä®Á´ØÈ¶ñÂ±èÂä†ËΩΩÊó∂Èó¥: ${entry.startTime}ms`)
            
            // Â¶ÇÊûúÂä†ËΩΩÊó∂Èó¥ËøáÈïøÔºåÊòæÁ§∫ÊèêÁ§∫
            if (entry.startTime > 3000) {
              console.warn('ÁßªÂä®Á´ØÂä†ËΩΩÊó∂Èó¥ËæÉÈïøÔºåÂª∫ËÆÆ‰ºòÂåñ')
            }
          }
        })
      })
      
      observer.observe({ entryTypes: ['paint'] })
    }
  },
  
  // ÁõëÊéßÂÜÖÂ≠ò‰ΩøÁî®
  monitorMemoryUsage: () => {
    if (isMobileDevice() && 'memory' in performance) {
      const memory = (performance as any).memory
      const memoryInfo = {
        used: Math.round(memory.usedJSHeapSize / 1048576), // MB
        total: Math.round(memory.totalJSHeapSize / 1048576), // MB
        limit: Math.round(memory.jsHeapSizeLimit / 1048576) // MB
      }
      
      console.log('ÁßªÂä®Á´ØÂÜÖÂ≠ò‰ΩøÁî®ÊÉÖÂÜµ:', memoryInfo)
      
      // ÂÜÖÂ≠ò‰ΩøÁî®ËøáÈ´òÊó∂ÁöÑË≠¶Âëä
      if (memoryInfo.used / memoryInfo.limit > 0.8) {
        console.warn('ÁßªÂä®Á´ØÂÜÖÂ≠ò‰ΩøÁî®ËøáÈ´òÔºåÂª∫ËÆÆÊ∏ÖÁêÜ')
        mobileMemoryOptimization.cleanupUnusedComponents()
      }
    }
  }
}

// ÁßªÂä®Á´ØÈîôËØØÁõëÊéßÂíåÊÅ¢Â§çÊú∫Âà∂
export const mobileErrorRecovery = {
  errorCount: 0,
  maxErrors: 5,
  
  // ÈîôËØØÂ§ÑÁêÜÂíåÊÅ¢Â§ç
  handleError: (error: Error, context: string) => {
    mobileErrorRecovery.errorCount++
    console.error(`üö® ÁßªÂä®Á´ØÈîôËØØ [${mobileErrorRecovery.errorCount}/${mobileErrorRecovery.maxErrors}] - ${context}:`, error)
    
    // Ëß¶ÂèëÈîôËØØ‰∫ã‰ª∂
    window.dispatchEvent(new CustomEvent('mobileError', {
      detail: { 
        error: error.message,
        context,
        count: mobileErrorRecovery.errorCount,
        timestamp: Date.now()
      }
    }))
    
    // Â¶ÇÊûúÈîôËØØËøáÂ§öÔºåÂ∞ùËØïÈáçËΩΩÈ°µÈù¢
    if (mobileErrorRecovery.errorCount >= mobileErrorRecovery.maxErrors) {
      console.warn('üîÑ ÁßªÂä®Á´ØÈîôËØØËøáÂ§öÔºåÂ∞ùËØïÈáçËΩΩÈ°µÈù¢...')
      setTimeout(() => {
        window.location.reload()
      }, 3000)
    }
  },
  
  // ÈáçÁΩÆÈîôËØØËÆ°Êï∞
  resetErrorCount: () => {
    mobileErrorRecovery.errorCount = 0
    console.log('‚úÖ ÁßªÂä®Á´ØÈîôËØØËÆ°Êï∞Â∑≤ÈáçÁΩÆ')
  },
  
  // ËÆæÁΩÆÂÖ®Â±ÄÈîôËØØÂ§ÑÁêÜ
  setupGlobalErrorHandling: () => {
    if (!isMobileDevice()) return
    
    // ÊçïËé∑Êú™Â§ÑÁêÜÁöÑPromiseÈîôËØØ
    window.addEventListener('unhandledrejection', (event) => {
      mobileErrorRecovery.handleError(new Error(event.reason), 'Promise rejection')
      event.preventDefault()
    })
    
    // ÊçïËé∑JavaScriptÈîôËØØ
    window.addEventListener('error', (event) => {
      mobileErrorRecovery.handleError(new Error(event.message), `JavaScript error at ${event.filename}:${event.lineno}`)
    })
    
    // ÊçïËé∑ËµÑÊ∫êÂä†ËΩΩÈîôËØØ
    window.addEventListener('error', (event) => {
      if (event.target && event.target !== window) {
        const target = event.target as HTMLElement
        mobileErrorRecovery.handleError(new Error(`ËµÑÊ∫êÂä†ËΩΩÂ§±Ë¥•: ${target.tagName}`), 'Resource loading')
      }
    }, true)
  }
}

// ÂàùÂßãÂåñÁßªÂä®Á´Ø‰ºòÂåñ - Â¢ûÂº∫Áâà
export const initMobileOptimization = () => {
  if (isMobileDevice()) {
    console.log('üöÄ ÂàùÂßãÂåñÁßªÂä®Á´Ø‰ºòÂåñ...')
    
    // ËÆæÁΩÆÁΩëÁªúÁõëÊéß
    mobileNetworkManager.setupNetworkMonitoring()
    
    // ËÆæÁΩÆÂÖ®Â±ÄÈîôËØØÂ§ÑÁêÜ
    mobileErrorRecovery.setupGlobalErrorHandling()
    
    // ÂêØÂä®ÂÖ≥ÈîÆËµÑÊ∫êÈ¢ÑÂä†ËΩΩ
    mobilePreloadStrategy.critical()
    
    // Âª∂ËøüÂêØÂä®ÈùûÂÖ≥ÈîÆ‰ºòÂåñ
    setTimeout(() => {
      mobilePreloadStrategy.deferred()
      optimizeImages()
      mobileCacheStrategy.setMobileCacheHeaders()
      mobilePerformanceMonitor.measureFirstContentfulPaint()
      mobilePerformanceMonitor.monitorMemoryUsage()
    }, 1000)
    
    // ÂêØÁî®ÂÜÖÂ≠ò‰ºòÂåñ
    mobileMemoryOptimization.cleanupUnusedComponents()
    mobileMemoryOptimization.limitConcurrentRequests()
    
    // Ê∏ÖÁêÜËøáÊúüÁºìÂ≠ò
    setTimeout(() => {
      mobileCacheStrategy.cleanExpiredCache()
    }, 5000)
    
    // ÁõëÂê¨ÁΩëÁªúÁä∂ÊÄÅÂèòÂåñ
    window.addEventListener('mobileNetworkRestored', () => {
      console.log('üì∂ ÁΩëÁªúÊÅ¢Â§çÔºåÈáçÁΩÆÈîôËØØËÆ°Êï∞')
      mobileErrorRecovery.resetErrorCount()
    })
    
    window.addEventListener('mobileNetworkLost', () => {
      console.log('üìµ ÁΩëÁªúÊñ≠ÂºÄÔºåÊòæÁ§∫Á¶ªÁ∫øÊèêÁ§∫')
      // ÂèØ‰ª•Âú®ËøôÈáåÊòæÁ§∫Á¶ªÁ∫øÊèêÁ§∫UI
    })
    
    console.log('‚úÖ ÁßªÂä®Á´Ø‰ºòÂåñÂàùÂßãÂåñÂÆåÊàê')
  }
}