var e=Object.defineProperty,m=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(m,t,n)=>t in m?e(m,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):m[t]=n,i=(e,m)=>{for(var t in m||(m={}))s.call(m,t)&&r(e,t,m[t]);if(n)for(var t of n(m))a.call(m,t)&&r(e,t,m[t]);return e},o=(e,n)=>m(e,t(n)),l=(e,m,t)=>new Promise((n,s)=>{var a=e=>{try{i(t.next(e))}catch(m){s(m)}},r=e=>{try{i(t.throw(e))}catch(m){s(m)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,r);i((t=t.apply(e,m)).next())});import{u as g,j as h,s as c}from"./index-BXUZDvBH.js";import{r as u}from"./vendor-J95WCW4x.js";import{u as d,a as N,D as y,c as b,S as x,v as p,s as f,K as v,P as w,b as j,d as k,C as D}from"./sortable.esm-Cxm1fFaN.js";import{B as C,e as E,n as M,m as V,X as S,p as O,q as P,o as _,G as q,r as I}from"./ui-CHDxits7.js";import{a as z,L as G}from"./router-BSPfhsUn.js";function L({company:e,index:m,onEdit:t,onDelete:n}){const{attributes:s,listeners:a,setNodeRef:r,transform:l,transition:g,isDragging:c}=k({id:e.id}),u={transform:D.Transform.toString(l),transition:g,opacity:c?.5:1};return h.jsxDEV("div",{ref:r,style:u,className:"px-6 py-4 hover:bg-green-900/10 transition-colors "+(c?"bg-gray-800/70 shadow-lg":""),children:h.jsxDEV("div",{className:"grid grid-cols-12 gap-4 items-center",children:[h.jsxDEV("div",{className:"col-span-1 flex items-center gap-2",children:[h.jsxDEV("div",o(i(i({},s),a),{className:"cursor-grab active:cursor-grabbing text-green-400 hover:text-green-300 p-1",title:"拖拽排序",children:h.jsxDEV(q,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:69,columnNumber:13},this)}),void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:63,columnNumber:11},this),h.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-lg",children:m+1},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:71,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:62,columnNumber:9},this),h.jsxDEV("div",{className:"col-span-6",children:h.jsxDEV("h3",{className:"text-green-400 font-bold font-mono text-lg",children:e.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:76,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:75,columnNumber:9},this),h.jsxDEV("div",{className:"col-span-3",children:h.jsxDEV("span",{className:"text-green-600 font-mono text-sm",children:new Date(e.created_at).toLocaleString()},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:81,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:80,columnNumber:9},this),h.jsxDEV("div",{className:"col-span-2",children:h.jsxDEV("div",{className:"flex gap-2",children:[h.jsxDEV("button",{onClick:()=>t(e),className:"text-green-400 hover:text-green-300 transition-colors p-1",title:"编辑",children:h.jsxDEV(I,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:92,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:87,columnNumber:13},this),h.jsxDEV("button",{onClick:()=>n(e),className:"text-red-400 hover:text-red-300 transition-colors p-1",title:"删除",children:h.jsxDEV(_,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:99,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:94,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:86,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:85,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:61,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:54,columnNumber:5},this)}function $(){const[e,m]=u.useState([]),[t,n]=u.useState(!0),[s,a]=u.useState(!1),[r,k]=u.useState(null),[D,q]=u.useState({name:""}),[I,$]=u.useState(!1),[B,K]=u.useState(!1),[R,T]=u.useState(null),[A,F]=u.useState(""),[H,J]=u.useState(""),{user:Q,loading:U}=g(),W=z(),X=d(N(w),N(v,{coordinateGetter:f}));if(u.useEffect(()=>{U||Q||W("/login")},[Q,U,W]),U)return h.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:h.jsxDEV("div",{className:"text-center",children:[h.jsxDEV("div",{className:"text-green-400 text-2xl font-mono mb-4",children:"加载中..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:147,columnNumber:11},this),h.jsxDEV("div",{className:"text-green-600 font-mono",children:"正在验证用户身份"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:148,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:146,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:145,columnNumber:7},this);u.useEffect(()=>{Y()},[]);const Y=()=>l(this,null,function*(){n(!0),F("");try{if(!Q)return void F("用户未登录，请重新登录");const{data:e,error:t}=yield c.from("companies").select("*").order("order_index",{ascending:!0});if(t)throw console.error("获取公司列表失败:",t),t;console.log("获取到公司列表:",e),m(e||[])}catch(e){console.error("获取公司列表失败:",e),F("获取公司列表失败，请重试")}finally{n(!1)}}),Z=e=>{k(e),q({name:e.name}),a(!0)},ee=e=>{T(e),K(!0)},me=()=>{q({name:""}),k(null),a(!1),F("")};return t?h.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:h.jsxDEV("div",{className:"text-green-400 text-xl animate-pulse font-mono",children:"加载中..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:340,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:339,columnNumber:7},this):h.jsxDEV("div",{className:"min-h-screen bg-black text-green-300 p-6",children:h.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[h.jsxDEV("div",{className:"mb-8",children:[h.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[h.jsxDEV("div",{className:"flex items-center",children:[h.jsxDEV(C,{className:"w-8 h-8 text-green-400 mr-3"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:355,columnNumber:15},this),h.jsxDEV("h1",{className:"text-4xl font-bold text-green-400 font-mono",children:"公司管理"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:356,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:354,columnNumber:13},this),h.jsxDEV(G,{to:"/dashboard",className:"flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2 bg-gradient-to-r from-gray-700 to-gray-800 hover:from-gray-600 hover:to-gray-700 text-green-300 hover:text-green-200 rounded-lg font-mono transition-all duration-200 shadow-md hover:shadow-lg border border-gray-600 hover:border-green-500/50",children:[h.jsxDEV(E,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:362,columnNumber:15},this),h.jsxDEV("span",{className:"hidden sm:inline",children:"返回控制台"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:363,columnNumber:15},this),h.jsxDEV("span",{className:"sm:hidden",children:"返回"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:364,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:358,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:353,columnNumber:11},this),h.jsxDEV("div",{className:"h-1 bg-gradient-to-r from-transparent via-green-400 to-transparent"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:367,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:352,columnNumber:9},this),h.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[h.jsxDEV("div",{className:"flex-1",children:h.jsxDEV("div",{className:"relative",children:[h.jsxDEV(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-green-400/60"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:374,columnNumber:15},this),h.jsxDEV("input",{type:"text",placeholder:"搜索公司名称...",className:"w-full bg-black border border-green-400/30 rounded px-10 py-2 text-green-400 placeholder-green-400/60 focus:outline-none focus:border-green-400"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:375,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:373,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:372,columnNumber:11},this),h.jsxDEV("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-black font-bold rounded transition-colors font-mono",children:[h.jsxDEV(V,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:386,columnNumber:13},this),"新增公司"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:382,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:371,columnNumber:9},this),A&&h.jsxDEV("div",{className:"mb-6 p-4 bg-red-900/50 border border-red-400 rounded text-red-300",children:A},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:392,columnNumber:11},this),s&&h.jsxDEV("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:h.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[h.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[h.jsxDEV("h2",{className:"text-2xl font-bold text-green-400 font-mono",children:r?"编辑公司":"新增公司"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:404,columnNumber:17},this),h.jsxDEV("button",{onClick:me,className:"text-green-400 hover:text-green-300",children:h.jsxDEV(S,{className:"w-6 h-6"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:411,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:407,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:403,columnNumber:15},this),h.jsxDEV("form",{onSubmit:e=>l(this,null,function*(){e.preventDefault(),$(!0),F("");let t="";try{if(r){const{data:e,error:n}=yield c.from("companies").update({name:D.name,updated_at:(new Date).toISOString()}).eq("id",r.id).select();if(n)throw new Error(n.message);if(!e||0===e.length)throw new Error("更新失败：权限不足或记录不存在");const s=e[0];m(e=>e.map(e=>e.id===s.id?s:e)),t=`公司 "${s.name}" 更新成功`}else{const{data:e,error:n}=yield c.from("companies").insert([D]).select();if(n)throw new Error(n.message);const s=e[0];m(e=>[...e,s]),t=`公司 "${s.name}" 创建成功`}F(""),J(t),yield Y(),me()}catch(n){F(n.message||"保存失败")}finally{$(!1)}}),className:"space-y-4",children:[h.jsxDEV("div",{children:[h.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"公司名称 *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:417,columnNumber:19},this),h.jsxDEV("input",{type:"text",name:"name",value:D.name,onChange:e=>{q(o(i({},D),{[e.target.name]:e.target.value}))},required:!0,className:"w-full px-3 py-2 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",placeholder:"请输入公司名称"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:420,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:416,columnNumber:17},this),h.jsxDEV("div",{className:"flex gap-3 pt-4",children:[h.jsxDEV("button",{type:"submit",disabled:I,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 disabled:bg-green-800 text-black font-bold rounded transition-colors font-mono",children:[h.jsxDEV(O,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:439,columnNumber:21},this),I?"保存中...":"保存"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:434,columnNumber:19},this),h.jsxDEV("button",{type:"button",onClick:me,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white font-bold rounded transition-colors font-mono",children:"取消"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:442,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:433,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:415,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:402,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:401,columnNumber:11},this),B&&R&&h.jsxDEV("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:h.jsxDEV("div",{className:"bg-gray-900 border border-red-400 rounded-lg p-6 w-full max-w-md",children:[h.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[h.jsxDEV(P,{className:"text-red-400 w-8 h-8"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:460,columnNumber:17},this),h.jsxDEV("h2",{className:"text-xl font-bold text-red-400 font-mono",children:"确认删除"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:461,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:459,columnNumber:15},this),h.jsxDEV("div",{className:"mb-6",children:[h.jsxDEV("p",{className:"text-green-300 font-mono mb-2",children:"您确定要删除以下公司吗？"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:467,columnNumber:17},this),h.jsxDEV("div",{className:"bg-black border border-green-400 rounded p-3 mb-3",children:h.jsxDEV("p",{className:"text-green-400 font-mono font-bold",children:R.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:471,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:470,columnNumber:17},this),h.jsxDEV("p",{className:"text-red-300 text-sm font-mono",children:"⚠️ 此操作不可恢复，请谨慎操作！"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:475,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:466,columnNumber:15},this),h.jsxDEV("div",{className:"flex gap-3",children:[h.jsxDEV("button",{onClick:()=>l(this,null,function*(){if(R)try{const{error:e}=yield c.from("companies").delete().eq("id",R.id);if(e)throw e;yield Y(),K(!1),T(null)}catch(e){F(e.message||"删除失败")}}),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-500 text-white font-bold rounded transition-colors font-mono",children:[h.jsxDEV(_,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:485,columnNumber:19},this),"确认删除"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:481,columnNumber:17},this),h.jsxDEV("button",{onClick:()=>{K(!1),T(null)},className:"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white font-bold rounded transition-colors font-mono",children:"取消"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:488,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:480,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:458,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:457,columnNumber:11},this),h.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg overflow-hidden",children:[h.jsxDEV("div",{className:"bg-green-900/30 border-b border-green-400 px-6 py-4",children:h.jsxDEV("div",{className:"grid grid-cols-12 gap-4 items-center",children:[h.jsxDEV("div",{className:"col-span-1",children:h.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"排序"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:505,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:504,columnNumber:15},this),h.jsxDEV("div",{className:"col-span-6",children:h.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"公司名称"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:508,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:507,columnNumber:15},this),h.jsxDEV("div",{className:"col-span-3",children:h.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"创建时间"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:511,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:510,columnNumber:15},this),h.jsxDEV("div",{className:"col-span-2",children:h.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"操作"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:514,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:513,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:503,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:502,columnNumber:11},this),h.jsxDEV(y,{sensors:X,collisionDetection:b,onDragEnd:t=>l(this,null,function*(){const{active:n,over:s}=t;if(n.id!==(null==s?void 0:s.id)){const t=e.findIndex(e=>e.id===n.id),r=e.findIndex(e=>e.id===(null==s?void 0:s.id)),i=j(e,t,r);m(i);try{const e=i.map((e,m)=>({id:e.id,order_index:m+1}));for(const m of e)yield c.from("companies").update({order_index:m.order_index}).eq("id",m.id)}catch(a){yield Y()}}}),children:h.jsxDEV(x,{items:e.map(e=>e.id),strategy:p,children:h.jsxDEV("div",{className:"divide-y divide-green-800",children:e.map((e,m)=>h.jsxDEV(L,{company:e,index:m,onEdit:Z,onDelete:ee},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:531,columnNumber:19},this))},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:529,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:525,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:520,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:500,columnNumber:9},this),0===e.length&&h.jsxDEV("div",{className:"text-center py-12",children:[h.jsxDEV(C,{className:"w-16 h-16 text-green-600 mx-auto mb-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:546,columnNumber:13},this),h.jsxDEV("p",{className:"text-green-400 text-lg font-mono",children:"暂无公司数据"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:547,columnNumber:13},this),h.jsxDEV("p",{className:"text-green-600 text-sm font-mono mt-2",children:"点击上方按钮添加第一家公司"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:550,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:545,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:349,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:348,columnNumber:5},this)}export{$ as default};
