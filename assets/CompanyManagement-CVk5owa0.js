var e=Object.defineProperty,m=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(m,t,n)=>t in m?e(m,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):m[t]=n,i=(e,m)=>{for(var t in m||(m={}))s.call(m,t)&&r(e,t,m[t]);if(n)for(var t of n(m))a.call(m,t)&&r(e,t,m[t]);return e},o=(e,n)=>m(e,t(n)),l=(e,m,t)=>new Promise((n,s)=>{var a=e=>{try{i(t.next(e))}catch(m){s(m)}},r=e=>{try{i(t.throw(e))}catch(m){s(m)}},i=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,r);i((t=t.apply(e,m)).next())});import{r as g,d as h,j as c,B as u,f as d,l as N,G as y,D as b,X as x,I as p,J as f,T as v,M as w,O as j}from"./react-core-CmOG7fiH.js";import{u as k,s as D}from"./index-4WlE4plX.js";import{u as C,a as E,D as M,c as V,S,v as O,s as P,K as _,P as I,b as q,d as z,C as G}from"./dnd-DpnmCEtS.js";import"./vendor-Dj0T90Ik.js";import"./supabase-k270UWii.js";import"./ui-BpXc_XmY.js";function T({company:e,index:m,onEdit:t,onDelete:n}){const{attributes:s,listeners:a,setNodeRef:r,transform:l,transition:g,isDragging:h}=z({id:e.id}),u={transform:G.Transform.toString(l),transition:g,opacity:h?.5:1};return c.jsxDEV("div",{ref:r,style:u,className:"px-6 py-4 hover:bg-green-900/10 transition-colors "+(h?"bg-gray-800/70 shadow-lg":""),children:c.jsxDEV("div",{className:"grid grid-cols-12 gap-4 items-center",children:[c.jsxDEV("div",{className:"col-span-1 flex items-center gap-2",children:[c.jsxDEV("div",o(i(i({},s),a),{className:"cursor-grab active:cursor-grabbing text-green-400 hover:text-green-300 p-1",title:"拖拽排序",children:c.jsxDEV(w,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:69,columnNumber:13},this)}),void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:63,columnNumber:11},this),c.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-lg",children:m+1},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:71,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:62,columnNumber:9},this),c.jsxDEV("div",{className:"col-span-6",children:c.jsxDEV("h3",{className:"text-green-400 font-bold font-mono text-lg",children:e.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:76,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:75,columnNumber:9},this),c.jsxDEV("div",{className:"col-span-3",children:c.jsxDEV("span",{className:"text-green-600 font-mono text-sm",children:new Date(e.created_at).toLocaleString()},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:81,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:80,columnNumber:9},this),c.jsxDEV("div",{className:"col-span-2",children:c.jsxDEV("div",{className:"flex gap-2",children:[c.jsxDEV("button",{onClick:()=>t(e),className:"text-green-400 hover:text-green-300 transition-colors p-1",title:"编辑",children:c.jsxDEV(j,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:92,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:87,columnNumber:13},this),c.jsxDEV("button",{onClick:()=>n(e),className:"text-red-400 hover:text-red-300 transition-colors p-1",title:"删除",children:c.jsxDEV(v,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:99,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:94,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:86,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:85,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:61,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:54,columnNumber:5},this)}function $(){const[e,m]=g.useState([]),[t,n]=g.useState(!0),[s,a]=g.useState(!1),[r,w]=g.useState(null),[j,z]=g.useState({name:""}),[G,$]=g.useState(!1),[B,J]=g.useState(!1),[K,L]=g.useState(null),[R,A]=g.useState(""),[F,H]=g.useState(""),{user:Q,loading:U}=k(),W=h(),X=C(E(I),E(_,{coordinateGetter:P}));if(g.useEffect(()=>{U||Q||W("/login")},[Q,U,W]),U)return c.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:c.jsxDEV("div",{className:"text-center",children:[c.jsxDEV("div",{className:"text-green-400 text-2xl font-mono mb-4",children:"加载中..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:147,columnNumber:11},this),c.jsxDEV("div",{className:"text-green-600 font-mono",children:"正在验证用户身份"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:148,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:146,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:145,columnNumber:7},this);g.useEffect(()=>{Y()},[]);const Y=()=>l(this,null,function*(){n(!0),A("");try{if(!Q)return void A("用户未登录，请重新登录");const{data:e,error:t}=yield D.from("companies").select("*").order("order_index",{ascending:!0});if(t)throw console.error("获取公司列表失败:",t),t;console.log("获取到公司列表:",e),m(e||[])}catch(e){console.error("获取公司列表失败:",e),A("获取公司列表失败，请重试")}finally{n(!1)}}),Z=e=>{w(e),z({name:e.name}),a(!0)},ee=e=>{L(e),J(!0)},me=()=>{z({name:""}),w(null),a(!1),A("")};return t?c.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:c.jsxDEV("div",{className:"text-green-400 text-xl animate-pulse font-mono",children:"加载中..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:340,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:339,columnNumber:7},this):c.jsxDEV("div",{className:"min-h-screen bg-black text-green-300 p-6",children:c.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[c.jsxDEV("div",{className:"mb-8",children:[c.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[c.jsxDEV("div",{className:"flex items-center",children:[c.jsxDEV(u,{className:"w-8 h-8 text-green-400 mr-3"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:355,columnNumber:15},this),c.jsxDEV("h1",{className:"text-4xl font-bold text-green-400 font-mono",children:"公司管理"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:356,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:354,columnNumber:13},this),c.jsxDEV(d,{to:"/dashboard",className:"flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2 bg-gradient-to-r from-gray-700 to-gray-800 hover:from-gray-600 hover:to-gray-700 text-green-300 hover:text-green-200 rounded-lg font-mono transition-all duration-200 shadow-md hover:shadow-lg border border-gray-600 hover:border-green-500/50",children:[c.jsxDEV(N,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:362,columnNumber:15},this),c.jsxDEV("span",{className:"hidden sm:inline",children:"返回控制台"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:363,columnNumber:15},this),c.jsxDEV("span",{className:"sm:hidden",children:"返回"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:364,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:358,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:353,columnNumber:11},this),c.jsxDEV("div",{className:"h-1 bg-gradient-to-r from-transparent via-green-400 to-transparent"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:367,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:352,columnNumber:9},this),c.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[c.jsxDEV("div",{className:"flex-1",children:c.jsxDEV("div",{className:"relative",children:[c.jsxDEV(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-green-400/60"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:374,columnNumber:15},this),c.jsxDEV("input",{type:"text",placeholder:"搜索公司名称...",className:"w-full bg-black border border-green-400/30 rounded px-10 py-2 text-green-400 placeholder-green-400/60 focus:outline-none focus:border-green-400"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:375,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:373,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:372,columnNumber:11},this),c.jsxDEV("button",{onClick:()=>a(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-black font-bold rounded transition-colors font-mono",children:[c.jsxDEV(b,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:386,columnNumber:13},this),"新增公司"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:382,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:371,columnNumber:9},this),R&&c.jsxDEV("div",{className:"mb-6 p-4 bg-red-900/50 border border-red-400 rounded text-red-300",children:R},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:392,columnNumber:11},this),s&&c.jsxDEV("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:c.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[c.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[c.jsxDEV("h2",{className:"text-2xl font-bold text-green-400 font-mono",children:r?"编辑公司":"新增公司"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:404,columnNumber:17},this),c.jsxDEV("button",{onClick:me,className:"text-green-400 hover:text-green-300",children:c.jsxDEV(x,{className:"w-6 h-6"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:411,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:407,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:403,columnNumber:15},this),c.jsxDEV("form",{onSubmit:e=>l(this,null,function*(){e.preventDefault(),$(!0),A("");let t="";try{if(r){const{data:e,error:n}=yield D.from("companies").update({name:j.name,updated_at:(new Date).toISOString()}).eq("id",r.id).select();if(n)throw new Error(n.message);if(!e||0===e.length)throw new Error("更新失败：权限不足或记录不存在");const s=e[0];m(e=>e.map(e=>e.id===s.id?s:e)),t=`公司 "${s.name}" 更新成功`}else{const{data:e,error:n}=yield D.from("companies").insert([j]).select();if(n)throw new Error(n.message);const s=e[0];m(e=>[...e,s]),t=`公司 "${s.name}" 创建成功`}A(""),H(t),yield Y(),me()}catch(n){A(n.message||"保存失败")}finally{$(!1)}}),className:"space-y-4",children:[c.jsxDEV("div",{children:[c.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"公司名称 *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:417,columnNumber:19},this),c.jsxDEV("input",{type:"text",name:"name",value:j.name,onChange:e=>{z(o(i({},j),{[e.target.name]:e.target.value}))},required:!0,className:"w-full px-3 py-2 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",placeholder:"请输入公司名称"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:420,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:416,columnNumber:17},this),c.jsxDEV("div",{className:"flex gap-3 pt-4",children:[c.jsxDEV("button",{type:"submit",disabled:G,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 disabled:bg-green-800 text-black font-bold rounded transition-colors font-mono",children:[c.jsxDEV(p,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:439,columnNumber:21},this),G?"保存中...":"保存"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:434,columnNumber:19},this),c.jsxDEV("button",{type:"button",onClick:me,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white font-bold rounded transition-colors font-mono",children:"取消"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:442,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:433,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:415,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:402,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:401,columnNumber:11},this),B&&K&&c.jsxDEV("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:c.jsxDEV("div",{className:"bg-gray-900 border border-red-400 rounded-lg p-6 w-full max-w-md",children:[c.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[c.jsxDEV(f,{className:"text-red-400 w-8 h-8"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:460,columnNumber:17},this),c.jsxDEV("h2",{className:"text-xl font-bold text-red-400 font-mono",children:"确认删除"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:461,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:459,columnNumber:15},this),c.jsxDEV("div",{className:"mb-6",children:[c.jsxDEV("p",{className:"text-green-300 font-mono mb-2",children:"您确定要删除以下公司吗？"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:467,columnNumber:17},this),c.jsxDEV("div",{className:"bg-black border border-green-400 rounded p-3 mb-3",children:c.jsxDEV("p",{className:"text-green-400 font-mono font-bold",children:K.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:471,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:470,columnNumber:17},this),c.jsxDEV("p",{className:"text-red-300 text-sm font-mono",children:"⚠️ 此操作不可恢复，请谨慎操作！"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:475,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:466,columnNumber:15},this),c.jsxDEV("div",{className:"flex gap-3",children:[c.jsxDEV("button",{onClick:()=>l(this,null,function*(){if(K)try{const{error:e}=yield D.from("companies").delete().eq("id",K.id);if(e)throw e;yield Y(),J(!1),L(null)}catch(e){A(e.message||"删除失败")}}),className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-500 text-white font-bold rounded transition-colors font-mono",children:[c.jsxDEV(v,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:485,columnNumber:19},this),"确认删除"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:481,columnNumber:17},this),c.jsxDEV("button",{onClick:()=>{J(!1),L(null)},className:"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white font-bold rounded transition-colors font-mono",children:"取消"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:488,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:480,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:458,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:457,columnNumber:11},this),c.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg overflow-hidden",children:[c.jsxDEV("div",{className:"bg-green-900/30 border-b border-green-400 px-6 py-4",children:c.jsxDEV("div",{className:"grid grid-cols-12 gap-4 items-center",children:[c.jsxDEV("div",{className:"col-span-1",children:c.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"排序"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:505,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:504,columnNumber:15},this),c.jsxDEV("div",{className:"col-span-6",children:c.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"公司名称"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:508,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:507,columnNumber:15},this),c.jsxDEV("div",{className:"col-span-3",children:c.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"创建时间"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:511,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:510,columnNumber:15},this),c.jsxDEV("div",{className:"col-span-2",children:c.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"操作"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:514,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:513,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:503,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:502,columnNumber:11},this),c.jsxDEV(M,{sensors:X,collisionDetection:V,onDragEnd:t=>l(this,null,function*(){const{active:n,over:s}=t;if(n.id!==(null==s?void 0:s.id)){const t=e.findIndex(e=>e.id===n.id),r=e.findIndex(e=>e.id===(null==s?void 0:s.id)),i=q(e,t,r);m(i);try{const e=i.map((e,m)=>({id:e.id,order_index:m+1}));for(const m of e)yield D.from("companies").update({order_index:m.order_index}).eq("id",m.id)}catch(a){yield Y()}}}),children:c.jsxDEV(S,{items:e.map(e=>e.id),strategy:O,children:c.jsxDEV("div",{className:"divide-y divide-green-800",children:e.map((e,m)=>c.jsxDEV(T,{company:e,index:m,onEdit:Z,onDelete:ee},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:531,columnNumber:19},this))},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:529,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:525,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:520,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:500,columnNumber:9},this),0===e.length&&c.jsxDEV("div",{className:"text-center py-12",children:[c.jsxDEV(u,{className:"w-16 h-16 text-green-600 mx-auto mb-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:546,columnNumber:13},this),c.jsxDEV("p",{className:"text-green-400 text-lg font-mono",children:"暂无公司数据"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:547,columnNumber:13},this),c.jsxDEV("p",{className:"text-green-600 text-sm font-mono mt-2",children:"点击上方按钮添加第一家公司"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:550,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:545,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:349,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:348,columnNumber:5},this)}export{$ as default};
