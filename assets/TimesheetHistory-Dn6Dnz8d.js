var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(t,s,m)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:m}):t[s]=m,a=(e,t)=>{for(var s in t||(t={}))n.call(t,s)&&i(e,s,t[s]);if(m)for(var s of m(t))r.call(t,s)&&i(e,s,t[s]);return e},o=(e,m)=>t(e,s(m)),l=(e,t,s)=>new Promise((m,n)=>{var r=e=>{try{a(s.next(e))}catch(t){n(t)}},i=e=>{try{a(s.throw(e))}catch(t){n(t)}},a=e=>e.done?m(e.value):Promise.resolve(e.value).then(r,i);a((s=s.apply(e,t)).next())});import{r as h,j as u,i as c,F as g,G as d,z as N,H as y,e as x,T as b}from"./react-core-CEw6lU7H.js";import{u as p,s as f}from"./index-Cdxzs9eZ.js";import{t as v}from"./ui-BmDV7GQB.js";import"./vendor-Dj0T90Ik.js";import"./supabase-DInoECZ_.js";function w(){var e,t,s,m,n,r;const{user:i}=p(),[w,k]=h.useState(!0),[j,D]=h.useState(!1),[T,E]=h.useState([]),[H,V]=h.useState([]),[_,S]=h.useState([]),[I,C]=h.useState({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0],status:"",productionLineId:"",workTypeId:"",productId:""}),[O,q]=h.useState([]),[F,L]=h.useState(null),[P,z]=h.useState(!1),[M,A]=h.useState(null),[G,$]=h.useState(!1),[B,R]=h.useState(!1),[Y,J]=h.useState(1),[K,Q]=h.useState(1),[U,W]=h.useState(0);h.useEffect(()=>{X()},[]),h.useEffect(()=>{se()},[Y]);const X=()=>l(this,null,function*(){try{k(!0),yield Promise.all([Z(),ee(),te()]),yield se()}catch(e){console.error("加载数据失败:",e),v.error("加载数据失败")}finally{k(!1)}}),Z=()=>l(this,null,function*(){try{const{data:e,error:t}=yield f.from("processes").select("production_line");if(t)throw t;const s=(e?[...new Set(e.map(e=>e.production_line).filter(Boolean))]:[]).map((e,t)=>({id:t+1,name:e}));E(s)}catch(e){console.error("加载生产线失败:",e),E([])}}),ee=()=>l(this,null,function*(){const{data:e,error:t}=yield f.from("work_types").select("id, name").eq("is_active",!0).order("name");if(t)throw t;V(e||[])}),te=()=>l(this,null,function*(){const{data:e,error:t}=yield f.from("products").select("id, name, code").eq("is_active",!0).order("name");if(t)throw t;S(e||[])}),se=(e=!1)=>l(this,null,function*(){if(i)try{D(!0),e&&J(1);const t=10*((e?1:Y)-1);let s=f.from("timesheet_records").select("*",{count:"exact"}).eq("user_id",i.id).gte("record_date",I.startDate).lte("record_date",I.endDate).order("record_date",{ascending:!1}).order("created_at",{ascending:!1}).range(t,t+10-1);I.status&&(s=s.eq("status",I.status)),I.productionLineId&&(s=s.eq("production_line_id",parseInt(I.productionLineId)));const{data:m,error:n,count:r}=yield s;if(n)throw n;const l=(null==m?void 0:m.map(e=>e.id))||[];let h=[];if(l.length>0){const{data:e,error:t}=yield f.from("timesheet_record_items").select("*").in("timesheet_record_id",l);if(t)throw t;h=e||[]}const u=(null==m?void 0:m.map(e=>{const t=h.filter(t=>t.timesheet_record_id===e.id);return o(a({},e),{items:t,total_amount:t.reduce((e,t)=>e+t.quantity*t.unit_price,0)||0})}))||[];q(u),W(r||0),Q(Math.ceil((r||0)/10))}catch(t){console.error("查询失败:",t),v.error("查询失败，请重试")}finally{D(!1)}}),me=(e,t)=>{C(s=>o(a({},s),{[e]:t}))},ne=()=>{$(!1),A(null)},re=e=>{switch(e){case"draft":return"草稿";case"submitted":return"已提交";case"approved":return"已审核";case"rejected":return"已拒绝";default:return e}},ie=e=>{switch(e){case"draft":default:return"bg-gray-600 text-gray-300";case"submitted":return"bg-yellow-600 text-yellow-100";case"approved":return"bg-green-600 text-green-100";case"rejected":return"bg-red-600 text-red-100"}};return w?u.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:u.jsxDEV("div",{className:"text-green-400 text-xl animate-pulse font-mono",children:"加载中..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:346,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:345,columnNumber:7},this):u.jsxDEV("div",{className:"min-h-screen bg-black text-green-300",children:[u.jsxDEV("header",{className:"bg-gray-900 border-b border-green-400 px-6 py-4",children:u.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[u.jsxDEV("h1",{className:"text-2xl font-bold text-green-400 font-mono flex items-center gap-2",children:[u.jsxDEV(c,{className:"w-8 h-8"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:359,columnNumber:13},this),"工时记录历史"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:358,columnNumber:11},this),u.jsxDEV("p",{className:"text-green-600 text-sm font-mono mt-1",children:"TIMESHEET HISTORY MANAGEMENT"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:362,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:357,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:356,columnNumber:7},this),u.jsxDEV("div",{className:"max-w-7xl mx-auto p-6",children:[u.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-6 mb-6",children:[u.jsxDEV("h2",{className:"text-xl font-bold text-green-400 font-mono mb-4 flex items-center gap-2",children:[u.jsxDEV(g,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:372,columnNumber:13},this),"查询条件"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:371,columnNumber:11},this),u.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[u.jsxDEV("div",{children:[u.jsxDEV("label",{className:"block text-green-300 font-mono text-sm mb-2",children:"开始日期"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:378,columnNumber:15},this),u.jsxDEV("input",{type:"date",value:I.startDate,onChange:e=>me("startDate",e.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-green-600 rounded text-green-300 font-mono focus:outline-none focus:border-green-400"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:381,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:377,columnNumber:13},this),u.jsxDEV("div",{children:[u.jsxDEV("label",{className:"block text-green-300 font-mono text-sm mb-2",children:"结束日期"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:390,columnNumber:15},this),u.jsxDEV("input",{type:"date",value:I.endDate,onChange:e=>me("endDate",e.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-green-600 rounded text-green-300 font-mono focus:outline-none focus:border-green-400"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:393,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:389,columnNumber:13},this),u.jsxDEV("div",{children:[u.jsxDEV("label",{className:"block text-green-300 font-mono text-sm mb-2",children:"状态"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:402,columnNumber:15},this),u.jsxDEV("select",{value:I.status,onChange:e=>me("status",e.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-green-600 rounded text-green-300 font-mono focus:outline-none focus:border-green-400",children:[u.jsxDEV("option",{value:"",children:"全部状态"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:410,columnNumber:17},this),u.jsxDEV("option",{value:"draft",children:"草稿"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:411,columnNumber:17},this),u.jsxDEV("option",{value:"submitted",children:"已提交"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:412,columnNumber:17},this),u.jsxDEV("option",{value:"approved",children:"已审核"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:413,columnNumber:17},this),u.jsxDEV("option",{value:"rejected",children:"已拒绝"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:414,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:405,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:401,columnNumber:13},this),u.jsxDEV("div",{children:[u.jsxDEV("label",{className:"block text-green-300 font-mono text-sm mb-2",children:"生产线"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:419,columnNumber:15},this),u.jsxDEV("select",{value:I.productionLineId,onChange:e=>me("productionLineId",e.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-green-600 rounded text-green-300 font-mono focus:outline-none focus:border-green-400",children:[u.jsxDEV("option",{value:"",children:"全部生产线"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:427,columnNumber:17},this),T.map(e=>u.jsxDEV("option",{value:e.id,children:e.name},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:429,columnNumber:19},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:422,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:418,columnNumber:13},this),u.jsxDEV("div",{children:[u.jsxDEV("label",{className:"block text-green-300 font-mono text-sm mb-2",children:"工时类型"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:435,columnNumber:15},this),u.jsxDEV("select",{value:I.workTypeId,onChange:e=>me("workTypeId",e.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-green-600 rounded text-green-300 font-mono focus:outline-none focus:border-green-400",children:[u.jsxDEV("option",{value:"",children:"全部类型"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:443,columnNumber:17},this),H.map(e=>u.jsxDEV("option",{value:e.id,children:e.name},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:445,columnNumber:19},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:438,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:434,columnNumber:13},this),u.jsxDEV("div",{children:[u.jsxDEV("label",{className:"block text-green-300 font-mono text-sm mb-2",children:"产品"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:451,columnNumber:15},this),u.jsxDEV("select",{value:I.productId,onChange:e=>me("productId",e.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-green-600 rounded text-green-300 font-mono focus:outline-none focus:border-green-400",children:[u.jsxDEV("option",{value:"",children:"全部产品"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:459,columnNumber:17},this),_.map(e=>u.jsxDEV("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:461,columnNumber:19},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:454,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:450,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:376,columnNumber:11},this),u.jsxDEV("div",{className:"flex gap-2",children:[u.jsxDEV("button",{onClick:()=>{se(!0)},disabled:j,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 disabled:bg-gray-600 text-white font-bold rounded transition-colors font-mono",children:[u.jsxDEV(d,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:473,columnNumber:15},this),j?"查询中...":"查询"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:468,columnNumber:13},this),u.jsxDEV("button",{onClick:()=>{C({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0],status:"",productionLineId:"",workTypeId:"",productId:""}),J(1)},className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white font-bold rounded transition-colors font-mono",children:[u.jsxDEV(N,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:481,columnNumber:15},this),"重置"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:477,columnNumber:13},this),u.jsxDEV("button",{onClick:()=>l(this,null,function*(){try{v.info("导出功能开发中...")}catch(e){v.error("导出失败")}}),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded transition-colors font-mono",children:[u.jsxDEV(y,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:489,columnNumber:15},this),"导出"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:485,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:467,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:370,columnNumber:9},this),u.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-4 mb-6",children:u.jsxDEV("div",{className:"flex justify-between items-center",children:[u.jsxDEV("div",{className:"text-green-300 font-mono",children:["共找到 ",u.jsxDEV("span",{className:"text-green-400 font-bold",children:U},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:499,columnNumber:19},this)," 条记录"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:498,columnNumber:13},this),u.jsxDEV("div",{className:"text-green-300 font-mono",children:["总金额: ",u.jsxDEV("span",{className:"text-green-400 font-bold",children:["￥",O.reduce((e,t)=>e+(t.total_amount||0),0).toFixed(2)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:502,columnNumber:20},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:501,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:497,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:496,columnNumber:9},this),u.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg overflow-hidden",children:u.jsxDEV("div",{className:"overflow-x-auto",children:u.jsxDEV("table",{className:"w-full",children:[u.jsxDEV("thead",{className:"bg-gray-800 border-b border-green-600",children:u.jsxDEV("tr",{children:[u.jsxDEV("th",{className:"px-4 py-3 text-left text-green-400 font-mono text-sm",children:"记录日期"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:513,columnNumber:19},this),u.jsxDEV("th",{className:"px-4 py-3 text-left text-green-400 font-mono text-sm",children:"生产线"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:514,columnNumber:19},this),u.jsxDEV("th",{className:"px-4 py-3 text-left text-green-400 font-mono text-sm",children:"工时项数"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:515,columnNumber:19},this),u.jsxDEV("th",{className:"px-4 py-3 text-left text-green-400 font-mono text-sm",children:"总金额"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:516,columnNumber:19},this),u.jsxDEV("th",{className:"px-4 py-3 text-left text-green-400 font-mono text-sm",children:"状态"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:517,columnNumber:19},this),u.jsxDEV("th",{className:"px-4 py-3 text-left text-green-400 font-mono text-sm",children:"创建时间"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:518,columnNumber:19},this),u.jsxDEV("th",{className:"px-4 py-3 text-left text-green-400 font-mono text-sm",children:"操作"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:519,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:512,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:511,columnNumber:15},this),u.jsxDEV("tbody",{children:0===O.length?u.jsxDEV("tr",{children:u.jsxDEV("td",{colSpan:7,className:"px-4 py-8 text-center",children:[u.jsxDEV(c,{className:"w-12 h-12 text-green-600 mx-auto mb-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:526,columnNumber:23},this),u.jsxDEV("p",{className:"text-green-600 font-mono",children:"暂无工时记录"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:527,columnNumber:23},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:525,columnNumber:21},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:524,columnNumber:19},this):O.map(e=>{var t,s;return u.jsxDEV("tr",{className:"border-b border-green-800 hover:bg-gray-800 transition-colors",children:[u.jsxDEV("td",{className:"px-4 py-3 text-green-300 font-mono text-sm",children:e.record_date},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:533,columnNumber:23},this),u.jsxDEV("td",{className:"px-4 py-3 text-green-300 font-mono text-sm",children:null==(t=e.production_line)?void 0:t.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:536,columnNumber:23},this),u.jsxDEV("td",{className:"px-4 py-3 text-green-300 font-mono text-sm",children:(null==(s=e.items)?void 0:s.length)||0},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:539,columnNumber:23},this),u.jsxDEV("td",{className:"px-4 py-3 text-green-300 font-mono text-sm",children:["￥",(e.total_amount||0).toFixed(2)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:542,columnNumber:23},this),u.jsxDEV("td",{className:"px-4 py-3",children:u.jsxDEV("span",{className:`px-2 py-1 rounded text-xs font-mono ${ie(e.status)}`,children:re(e.status)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:546,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:545,columnNumber:23},this),u.jsxDEV("td",{className:"px-4 py-3 text-green-300 font-mono text-sm",children:new Date(e.created_at).toLocaleString("zh-CN")},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:550,columnNumber:23},this),u.jsxDEV("td",{className:"px-4 py-3",children:u.jsxDEV("div",{className:"flex items-center gap-2",children:[u.jsxDEV("button",{onClick:()=>(e=>{L(e),z(!0)})(e),className:"p-1 text-blue-400 hover:text-blue-300 transition-colors",title:"查看详情",children:u.jsxDEV(x,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:560,columnNumber:29},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:555,columnNumber:27},this),"draft"===e.status&&u.jsxDEV("button",{onClick:()=>(e=>{"draft"===e.status?(A(e),$(!0)):v.error("只有草稿状态的工时记录可以删除")})(e),className:"p-1 text-red-400 hover:text-red-300 transition-colors",title:"删除记录",children:u.jsxDEV(b,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:568,columnNumber:31},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:563,columnNumber:29},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:554,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:553,columnNumber:23},this)]},e.id,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:532,columnNumber:21},this)})},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:522,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:510,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:509,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:508,columnNumber:9},this),K>1&&u.jsxDEV("div",{className:"flex justify-center items-center gap-2 mt-6",children:[u.jsxDEV("button",{onClick:()=>J(e=>Math.max(1,e-1)),disabled:1===Y,className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 text-green-300 font-mono rounded transition-colors",children:"上一页"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:584,columnNumber:13},this),u.jsxDEV("span",{className:"text-green-300 font-mono",children:["第 ",Y," 页，共 ",K," 页"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:592,columnNumber:13},this),u.jsxDEV("button",{onClick:()=>J(e=>Math.min(K,e+1)),disabled:Y===K,className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 text-green-300 font-mono rounded transition-colors",children:"下一页"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:596,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:583,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:368,columnNumber:7},this),P&&F&&u.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:u.jsxDEV("div",{className:"p-6",children:[u.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[u.jsxDEV("h2",{className:"text-xl font-bold text-green-400 font-mono",children:"工时记录详情"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:613,columnNumber:17},this),u.jsxDEV("button",{onClick:()=>z(!1),className:"text-green-400 hover:text-green-300 transition-colors",children:"✕"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:616,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:612,columnNumber:15},this),u.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[u.jsxDEV("div",{className:"space-y-2",children:[u.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[u.jsxDEV("span",{className:"text-green-600",children:"记录日期:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:628,columnNumber:21},this)," ",F.record_date]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:627,columnNumber:19},this),u.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[u.jsxDEV("span",{className:"text-green-600",children:"生产线:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:631,columnNumber:21},this)," ",null==(e=F.production_line)?void 0:e.name]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:630,columnNumber:19},this),u.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[u.jsxDEV("span",{className:"text-green-600",children:"班长:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:634,columnNumber:21},this)," ",(null==(t=F.supervisor)?void 0:t.name)||"未指定"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:633,columnNumber:19},this),u.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[u.jsxDEV("span",{className:"text-green-600",children:"段长:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:637,columnNumber:21},this)," ",(null==(s=F.section_chief)?void 0:s.name)||"未指定"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:636,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:626,columnNumber:17},this),u.jsxDEV("div",{className:"space-y-2",children:[u.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[u.jsxDEV("span",{className:"text-green-600",children:"状态:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:642,columnNumber:21},this),u.jsxDEV("span",{className:`ml-2 px-2 py-1 rounded text-xs ${ie(F.status)}`,children:re(F.status)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:643,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:641,columnNumber:19},this),u.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[u.jsxDEV("span",{className:"text-green-600",children:"创建时间:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:648,columnNumber:21},this)," ",new Date(F.created_at).toLocaleString("zh-CN")]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:647,columnNumber:19},this),u.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[u.jsxDEV("span",{className:"text-green-600",children:"更新时间:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:651,columnNumber:21},this)," ",new Date(F.updated_at).toLocaleString("zh-CN")]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:650,columnNumber:19},this),u.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[u.jsxDEV("span",{className:"text-green-600",children:"总金额:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:654,columnNumber:21},this)," ￥",(F.total_amount||0).toFixed(2)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:653,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:640,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:625,columnNumber:15},this),u.jsxDEV("div",{children:[u.jsxDEV("h3",{className:"text-lg font-bold text-green-400 font-mono mb-4",children:"工时明细"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:661,columnNumber:17},this),u.jsxDEV("div",{className:"overflow-x-auto",children:u.jsxDEV("table",{className:"w-full",children:[u.jsxDEV("thead",{className:"bg-gray-800 border-b border-green-600",children:u.jsxDEV("tr",{children:[u.jsxDEV("th",{className:"px-4 py-2 text-left text-green-400 font-mono text-sm",children:"工时类型"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:668,columnNumber:25},this),u.jsxDEV("th",{className:"px-4 py-2 text-left text-green-400 font-mono text-sm",children:"产品"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:669,columnNumber:25},this),u.jsxDEV("th",{className:"px-4 py-2 text-left text-green-400 font-mono text-sm",children:"工序"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:670,columnNumber:25},this),u.jsxDEV("th",{className:"px-4 py-2 text-left text-green-400 font-mono text-sm",children:"数量"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:671,columnNumber:25},this),u.jsxDEV("th",{className:"px-4 py-2 text-left text-green-400 font-mono text-sm",children:"单位"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:672,columnNumber:25},this),u.jsxDEV("th",{className:"px-4 py-2 text-left text-green-400 font-mono text-sm",children:"单价"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:673,columnNumber:25},this),u.jsxDEV("th",{className:"px-4 py-2 text-left text-green-400 font-mono text-sm",children:"小计"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:674,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:667,columnNumber:23},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:666,columnNumber:21},this),u.jsxDEV("tbody",{children:(null==(m=F.items)?void 0:m.map((e,t)=>{var s,m,n,r;return u.jsxDEV("tr",{className:"border-b border-green-800",children:[u.jsxDEV("td",{className:"px-4 py-2 text-green-300 font-mono text-sm",children:null==(s=e.work_type)?void 0:s.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:680,columnNumber:27},this),u.jsxDEV("td",{className:"px-4 py-2 text-green-300 font-mono text-sm",children:[null==(m=e.product)?void 0:m.name," (",null==(n=e.product)?void 0:n.code,")"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:683,columnNumber:27},this),u.jsxDEV("td",{className:"px-4 py-2 text-green-300 font-mono text-sm",children:null==(r=e.process)?void 0:r.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:686,columnNumber:27},this),u.jsxDEV("td",{className:"px-4 py-2 text-green-300 font-mono text-sm",children:e.quantity},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:689,columnNumber:27},this),u.jsxDEV("td",{className:"px-4 py-2 text-green-300 font-mono text-sm",children:e.unit},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:692,columnNumber:27},this),u.jsxDEV("td",{className:"px-4 py-2 text-green-300 font-mono text-sm",children:["￥",e.unit_price.toFixed(2)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:695,columnNumber:27},this),u.jsxDEV("td",{className:"px-4 py-2 text-green-300 font-mono text-sm",children:["￥",(e.quantity*e.unit_price).toFixed(2)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:698,columnNumber:27},this)]},e.id||t,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:679,columnNumber:25},this)}))||[]},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:677,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:665,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:664,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:660,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:611,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:610,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:609,columnNumber:9},this),G&&M&&u.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:u.jsxDEV("div",{className:"bg-gray-900 border border-red-400 rounded-lg max-w-md w-full",children:u.jsxDEV("div",{className:"p-6",children:[u.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[u.jsxDEV("h2",{className:"text-xl font-bold text-red-400 font-mono",children:"确认删除"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:718,columnNumber:17},this),u.jsxDEV("button",{onClick:ne,className:"text-red-400 hover:text-red-300 transition-colors",disabled:B,children:"✕"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:721,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:717,columnNumber:15},this),u.jsxDEV("div",{className:"mb-6",children:[u.jsxDEV("p",{className:"text-red-300 font-mono mb-2",children:"您确定要删除以下工时记录吗？"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:731,columnNumber:17},this),u.jsxDEV("div",{className:"bg-gray-800 border border-red-600 rounded p-3",children:u.jsxDEV("div",{className:"text-green-300 font-mono text-sm space-y-1",children:[u.jsxDEV("div",{children:[u.jsxDEV("span",{className:"text-red-400",children:"记录日期:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:736,columnNumber:26},this)," ",M.record_date]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:736,columnNumber:21},this),u.jsxDEV("div",{children:[u.jsxDEV("span",{className:"text-red-400",children:"生产线:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:737,columnNumber:26},this)," ",null==(n=M.production_line)?void 0:n.name]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:737,columnNumber:21},this),u.jsxDEV("div",{children:[u.jsxDEV("span",{className:"text-red-400",children:"工时项数:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:738,columnNumber:26},this)," ",(null==(r=M.items)?void 0:r.length)||0]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:738,columnNumber:21},this),u.jsxDEV("div",{children:[u.jsxDEV("span",{className:"text-red-400",children:"总金额:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:739,columnNumber:26},this)," ￥",(M.total_amount||0).toFixed(2)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:739,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:735,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:734,columnNumber:17},this),u.jsxDEV("p",{className:"text-red-400 font-mono text-sm mt-3",children:"⚠️ 此操作将同时删除所有相关的工时明细和审核历史，且无法恢复！"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:742,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:730,columnNumber:15},this),u.jsxDEV("div",{className:"flex justify-end gap-3",children:[u.jsxDEV("button",{onClick:ne,disabled:B,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 text-green-300 font-mono rounded transition-colors",children:"取消"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:748,columnNumber:17},this),u.jsxDEV("button",{onClick:()=>l(this,null,function*(){if(M)try{R(!0);const{error:e}=yield f.from("timesheet_records").delete().eq("id",M.id).eq("user_id",null==i?void 0:i.id);if(e)throw e;v.success("工时记录删除成功"),yield se(),$(!1),A(null)}catch(e){console.error("删除工时记录失败:",e),v.error("删除失败，请重试")}finally{R(!1)}}),disabled:B,className:"px-4 py-2 bg-red-600 hover:bg-red-500 disabled:bg-red-800 text-white font-mono rounded transition-colors flex items-center gap-2",children:B?u.jsxDEV(u.Fragment,{children:[u.jsxDEV("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:762,columnNumber:23},this),"删除中..."]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:761,columnNumber:21},this):u.jsxDEV(u.Fragment,{children:[u.jsxDEV(b,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:767,columnNumber:23},this),"确认删除"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:766,columnNumber:21},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:755,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:747,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:716,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:715,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:714,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:354,columnNumber:5},this)}export{w as default};
