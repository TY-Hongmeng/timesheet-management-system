var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,m=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,r=(t,s,m)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:m}):t[s]=m,o=(e,t)=>{for(var s in t||(t={}))n.call(t,s)&&r(e,s,t[s]);if(m)for(var s of m(t))i.call(t,s)&&r(e,s,t[s]);return e},a=(e,m)=>t(e,s(m)),l=(e,t,s)=>new Promise((m,n)=>{var i=e=>{try{o(s.next(e))}catch(t){n(t)}},r=e=>{try{o(s.throw(e))}catch(t){n(t)}},o=e=>e.done?m(e.value):Promise.resolve(e.value).then(i,r);o((s=s.apply(e,t)).next())});import{j as c,X as d,d as u,r as h,i as g,z as p,f as y,l as N,U as f,D as x}from"./react-core-CEw6lU7H.js";import{t as b}from"./ui-BmDV7GQB.js";import{u as _,i as v,s as w}from"./index-Bu9C9BlJ.js";import"./vendor-Dj0T90Ik.js";import"./supabase-DInoECZ_.js";function k({isOpen:e,onClose:t,onConfirm:s,record:m,items:n,productionLines:i,supervisors:r,sectionLeaders:o,workTypes:a,products:l,processes:u}){if(!e)return null;const h=e=>{var t;return(null==(t=a.find(t=>t.id===e))?void 0:t.name)||"æœªçŸ¥å·¥æ—¶ç±»å‹"},g=e=>{var t;return(null==(t=l.find(t=>t.id===e))?void 0:t.name)||"æœªçŸ¥äº§å“"},p=e=>{var t;return(null==(t=u.find(t=>t.id===e))?void 0:t.product_process)||"æœªçŸ¥å·¥åº"};return c.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:c.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-6 max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[c.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[c.jsxDEV("h2",{className:"text-xl font-bold text-green-400",children:"ç¡®è®¤æäº¤å·¥æ—¶è®°å½•"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:86,columnNumber:11},this),c.jsxDEV("button",{onClick:t,className:"text-gray-400 hover:text-white transition-colors",children:c.jsxDEV(d,{className:"w-6 h-6"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:91,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:87,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:85,columnNumber:9},this),c.jsxDEV("div",{className:"space-y-6",children:[c.jsxDEV("div",{className:"bg-gray-800 border border-green-400 rounded-lg p-4",children:[c.jsxDEV("h3",{className:"text-lg font-semibold text-green-300 mb-4",children:"åŸºæœ¬ä¿¡æ¯"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:98,columnNumber:13},this),c.jsxDEV("div",{className:"space-y-2",children:[c.jsxDEV("div",{className:"flex justify-between",children:[c.jsxDEV("div",{children:[c.jsxDEV("span",{className:"text-green-300 font-medium",children:"è®°å½•æ—¥æœŸï¼š"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:103,columnNumber:19},this),c.jsxDEV("span",{className:"text-white",children:m.record_date},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:104,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:102,columnNumber:17},this),c.jsxDEV("div",{children:[c.jsxDEV("span",{className:"text-green-300 font-medium",children:"ç”Ÿäº§çº¿ï¼š"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:107,columnNumber:19},this),c.jsxDEV("span",{className:"text-white",children:(N=m.production_line_id,N?(null==(f=i.find(e=>e.id===N))?void 0:f.name)||"æœªçŸ¥ç”Ÿäº§çº¿":"æœªé€‰æ‹©")},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:108,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:106,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:101,columnNumber:15},this),c.jsxDEV("div",{className:"flex justify-between",children:[c.jsxDEV("div",{children:[c.jsxDEV("span",{className:"text-green-300 font-medium",children:"ç­æ¬¡ï¼š"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:114,columnNumber:19},this),c.jsxDEV("span",{className:"text-white",children:(y=m.shift_type,"ç™½ç­"===y||"day"===y?"ç™½ç­":"å¤œç­"===y||"night"===y?"å¤œç­":"æœªçŸ¥ç­æ¬¡")},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:115,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:113,columnNumber:17},this),c.jsxDEV("div",{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:117,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:112,columnNumber:15},this),c.jsxDEV("div",{className:"flex justify-between",children:[c.jsxDEV("div",{children:[c.jsxDEV("span",{className:"text-green-300 font-medium",children:"ç­é•¿ï¼š"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:122,columnNumber:19},this),c.jsxDEV("span",{className:"text-white",children:(e=>{var t;return e?(null==(t=r.find(t=>t.id.toString()===e))?void 0:t.name)||"æœªçŸ¥ç­é•¿":"æœªé€‰æ‹©"})(m.supervisor_id)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:123,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:121,columnNumber:17},this),c.jsxDEV("div",{children:[c.jsxDEV("span",{className:"text-green-300 font-medium",children:"æ®µé•¿ï¼š"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:126,columnNumber:19},this),c.jsxDEV("span",{className:"text-white",children:(e=>{var t;return e?(null==(t=o.find(t=>t.id.toString()===e))?void 0:t.name)||"æœªçŸ¥æ®µé•¿":"æœªé€‰æ‹©"})(m.section_chief_id)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:127,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:125,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:120,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:99,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:97,columnNumber:11},this),c.jsxDEV("div",{className:"bg-gray-800 border border-green-400 rounded-lg p-4",children:[c.jsxDEV("h3",{className:"text-lg font-semibold text-green-300 mb-4",children:["å·¥æ—¶è®°å½•é¡¹ (",n.length,"é¡¹)"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:135,columnNumber:13},this),c.jsxDEV("div",{className:"overflow-x-auto",children:c.jsxDEV("table",{className:"w-full text-sm",children:[c.jsxDEV("thead",{children:c.jsxDEV("tr",{className:"border-b border-green-400",children:[c.jsxDEV("th",{className:"text-left text-green-300 py-2 px-2",children:"åºå·"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:140,columnNumber:21},this),c.jsxDEV("th",{className:"text-left text-green-300 py-2 px-2",children:"å·¥æ—¶ç±»å‹"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:141,columnNumber:21},this),c.jsxDEV("th",{className:"text-left text-green-300 py-2 px-2",children:"äº§å“åç§°"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:142,columnNumber:21},this),c.jsxDEV("th",{className:"text-left text-green-300 py-2 px-2",children:"å·¥åºåç§°"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:143,columnNumber:21},this),c.jsxDEV("th",{className:"text-left text-green-300 py-2 px-2",children:"æ•°é‡"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:144,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:139,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:138,columnNumber:17},this),c.jsxDEV("tbody",{children:n.map((e,t)=>c.jsxDEV("tr",{className:"border-b border-gray-600",children:[c.jsxDEV("td",{className:"py-2 px-2 text-white",children:t+1},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:150,columnNumber:23},this),c.jsxDEV("td",{className:"py-2 px-2 text-white",children:h(e.work_type_id)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:151,columnNumber:23},this),c.jsxDEV("td",{className:"py-2 px-2 text-white",children:g(e.product_id)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:152,columnNumber:23},this),c.jsxDEV("td",{className:"py-2 px-2 text-white",children:p(e.process_id)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:153,columnNumber:23},this),c.jsxDEV("td",{className:"py-2 px-2 text-white",children:e.quantity},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:154,columnNumber:23},this)]},t,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:149,columnNumber:21},this))},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:147,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:137,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:136,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:134,columnNumber:11},this),c.jsxDEV("div",{className:"bg-yellow-900/30 border border-yellow-600 rounded-lg p-2 mb-4",children:c.jsxDEV("p",{className:"text-yellow-300 text-xs",children:"âš ï¸ æ•°æ®æäº¤åå°†ä¸å¯ä¿®æ”¹ï¼Œè¯·ä»”ç»†æ ¸å¯¹ä»¥ä¸Šä¿¡æ¯æ˜¯å¦æ­£ç¡®ã€‚æ•°æ®ç¡®è®¤æäº¤åï¼Œéœ€è¦ç­‰å¾…ç­é•¿å’Œæ®µé•¿å®¡æ ¸é€šè¿‡ã€‚"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:164,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:163,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:95,columnNumber:9},this),c.jsxDEV("div",{className:"flex justify-end gap-4 mt-6",children:[c.jsxDEV("button",{onClick:t,className:"px-6 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-500 transition-colors",children:"å–æ¶ˆ"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:172,columnNumber:11},this),c.jsxDEV("button",{onClick:s,className:"px-6 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors",children:"ç¡®è®¤æäº¤"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:178,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:171,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:84,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/TimesheetConfirmDialog.tsx",lineNumber:83,columnNumber:5},this);var y,N,f}function D(){var e;const{user:t,isAuthenticated:s,refreshUser:m}=_(),n=u(),[i,r]=h.useState(!0),[d,D]=h.useState([]),[j,T]=h.useState([]),[E,V]=h.useState([]),[R,C]=h.useState([]),[q,S]=h.useState([]),[P,I]=h.useState([]),[O,L]=h.useState([]),[W,$]=h.useState(null),[F,z]=h.useState([]),[B,A]=h.useState([]),[M,U]=h.useState({user_id:(null==t?void 0:t.id)||"",record_date:(new Date).toISOString().split("T")[0],production_line_id:0,supervisor_id:null,section_chief_id:null,shift_type:"ç™½ç­",status:"draft",items:[]}),[G,H]=h.useState({work_type_id:0,product_id:0,process_id:"",quantity:0}),[J,K]=h.useState(""),Q=()=>({work_type_id:j.length>0?j[0].id:1,product_id:0,process_id:"",quantity:0}),[X,Y]=h.useState([Q()]),[Z,ee]=h.useState({}),[te,se]=h.useState({}),[me,ne]=h.useState(""),[ie,re]=h.useState(!1),[oe,ae]=h.useState(!1),[le,ce]=h.useState(!1),de=()=>l(this,null,function*(){if(t)try{const{data:e,error:s}=yield w.from("users").select("company_id").eq("id",t.id).single();if(s)throw s;$(e.company_id)}catch(e){b.error("è·å–ç”¨æˆ·å…¬å¸ä¿¡æ¯å¤±è´¥")}});h.useEffect(()=>{const e=e=>{e.target.closest(".production-line-dropdown")||re(!1)};return ie&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[ie]),h.useEffect(()=>{t&&ue()},[t]),h.useEffect(()=>{M.production_line_id?(U(e=>a(o({},e),{supervisor_id:null,section_chief_id:null})),fe(M.production_line_id.toString()),xe(M.production_line_id.toString())):(I([]),L([]),U(e=>a(o({},e),{supervisor_id:null,section_chief_id:null})))},[M.production_line_id,d]),h.useEffect(()=>{M.production_line_id?(H(e=>a(o({},e),{work_type_id:0,product_id:0,process_id:""})),K(""),ge(),pe(),ye()):(console.log("ğŸ§¹ æ¸…ç©ºæ‰€æœ‰ä¸‰çº§è”åŠ¨æ•°æ®"),T([]),V([]),C([]),H(e=>a(o({},e),{work_type_id:0,product_id:0,process_id:""})),K(""))},[M.production_line_id,d]),h.useEffect(()=>{1===d.length&&0===M.production_line_id&&U(e=>a(o({},e),{production_line_id:d[0].id}))},[d,M.production_line_id]),h.useEffect(()=>{if(M.production_line_id&&!M.supervisor_id&&q.length>0&&W){const e=q.filter(e=>{var t;if("ç­é•¿"!==(null==(t=e.role)?void 0:t.name))return!1;if(e.company_id!==W)return!1;if(M.production_line_id){const e=d.find(e=>e.id===M.production_line_id);if(e){return R.filter(t=>t.production_line===e.name).length>0}}return!0});1===e.length&&U(t=>a(o({},t),{supervisor_id:e[0].id}))}},[M.production_line_id,M.supervisor_id,q,W,d,R]),h.useEffect(()=>{if(M.production_line_id&&!M.section_chief_id&&q.length>0&&W){const e=q.filter(e=>{var t;if("æ®µé•¿"!==(null==(t=e.role)?void 0:t.name))return!1;if(e.company_id!==W)return!1;if(M.production_line_id){const e=d.find(e=>e.id===M.production_line_id);if(e){return R.filter(t=>t.production_line===e.name).length>0}}return!0});1===e.length&&U(t=>a(o({},t),{section_chief_id:e[0].id}))}},[M.production_line_id,M.section_chief_id,q,W,d,R]),h.useEffect(()=>{if(j.length>0&&M.production_line_id&&R.length>0){const e=j.find(e=>e.id===G.work_type_id);if(!e&&j.length>0)return void H(e=>a(o({},e),{work_type_id:j[0].id}));if(e){const e=G.work_type_id;_e(e)}}},[j,M.production_line_id,R,G.work_type_id]),h.useEffect(()=>{1===E.length&&0===G.product_id&&H(e=>a(o({},e),{product_id:E[0].id}))},[E,G.product_id]),h.useEffect(()=>{1===R.length&&""===G.process_id&&H(e=>a(o({},e),{process_id:R[0].id}))},[R,G.process_id]);const ue=()=>l(this,null,function*(){if(t)try{r(!0),yield Promise.all([de(),he(),Ne()])}catch(e){b.error("åŠ è½½æ•°æ®å¤±è´¥")}finally{r(!1)}}),he=()=>l(this,null,function*(){if(t)try{const e=v(t.role);let s=w.from("processes").select("id, production_line, company_id, is_active").eq("is_active",!0).order("production_line");if(e);else{const{data:e,error:m}=yield w.from("users").select("company_id").eq("id",t.id).single();if(m)throw console.error("loadProductionLines: è·å–ç”¨æˆ·å…¬å¸ä¿¡æ¯å¤±è´¥:",m),m;console.log("loadProductionLines: ç”¨æˆ·å…¬å¸ID:",e.company_id),s=s.eq("company_id",e.company_id)}const{data:m,error:n}=yield s;if(n)throw console.error("loadProductionLines: æŸ¥è¯¢processesè¡¨å¤±è´¥:",n),n;console.log("loadProductionLines: æŸ¥è¯¢åˆ°çš„processesæ•°æ®:",m);const i=new Map;null==m||m.forEach(e=>{e.production_line&&i.set(e.production_line,{company_id:e.company_id,is_active:e.is_active})});const r=Array.from(i.entries()).map(([e,t],s)=>({id:s+1,name:e,is_active:t.is_active,company_id:t.company_id}));D(r)}catch(e){b.error("åŠ è½½ç”Ÿäº§çº¿ä¿¡æ¯å¤±è´¥")}}),ge=()=>l(this,null,function*(){if(t)try{if(!M.production_line_id)return void T([]);const e=d.find(e=>e.id===M.production_line_id);if(!e)return void T([]);let s;if(v(t.role)){if(!e.company_id)return console.error("loadWorkTypes: ç”Ÿäº§çº¿ç¼ºå°‘company_idä¿¡æ¯"),void T([]);s=e.company_id}else{const{data:e,error:m}=yield w.from("users").select("company_id").eq("id",t.id).single();if(m)throw m;s=e.company_id}const{data:m,error:n}=yield w.from("processes").select("production_category").eq("company_id",s).eq("production_line",e.name).eq("is_active",!0).not("production_category","is",null);if(n)throw n;const i=[...new Set((null==m?void 0:m.map(e=>e.production_category))||[])].filter(e=>e&&isNaN(Number(e))).sort().map((e,t)=>({id:t+1,name:e,is_active:!0}));T(i)}catch(e){b.error("åŠ è½½å·¥æ—¶ç±»å‹æ•°æ®å¤±è´¥")}}),pe=()=>l(this,null,function*(){if(t)try{if(console.log("loadProducts: å¼€å§‹åŠ è½½äº§å“æ•°æ®ï¼Œç”¨æˆ·ID:",t.id),!M.production_line_id)return console.log("loadProducts: æœªé€‰æ‹©ç”Ÿäº§çº¿ï¼Œæ¸…ç©ºäº§å“"),void V([]);const e=d.find(e=>e.id===M.production_line_id);if(!e)return console.log("loadProducts: æœªæ‰¾åˆ°å¯¹åº”çš„ç”Ÿäº§çº¿ä¿¡æ¯"),void V([]);console.log("loadProducts: å½“å‰é€‰æ‹©çš„ç”Ÿäº§çº¿:",e.name);let s;if(v(t.role)){if(!e.company_id)return console.error("loadProducts: ç”Ÿäº§çº¿ç¼ºå°‘company_idä¿¡æ¯"),void V([]);s=e.company_id,console.log("loadProducts: è¶…çº§ç®¡ç†å‘˜ä½¿ç”¨ç”Ÿäº§çº¿å…¬å¸ID:",s)}else{const{data:e,error:m}=yield w.from("users").select("company_id").eq("id",t.id).single();if(m)throw console.error("loadProducts: è·å–ç”¨æˆ·å…¬å¸ä¿¡æ¯å¤±è´¥:",m),m;s=e.company_id,console.log("loadProducts: æ™®é€šç”¨æˆ·ä½¿ç”¨è‡ªå·±çš„å…¬å¸ID:",s)}const{data:m,error:n}=yield w.from("processes").select("id, product_name, production_line").eq("company_id",s).eq("production_line",e.name).eq("is_active",!0);if(n)throw console.error("loadProducts: æŸ¥è¯¢processesè¡¨å¤±è´¥:",n),n;console.log("loadProducts: æŸ¥è¯¢åˆ°çš„åŸå§‹äº§å“æ•°æ®:",m);const i=[...new Set((null==m?void 0:m.map(e=>e.product_name))||[])].filter(Boolean).sort().map((e,t)=>({id:t+1,name:e,code:"",is_active:!0}));console.log("loadProducts: å»é‡åçš„äº§å“æ•°æ®:",i),V(i)}catch(e){console.error("loadProducts: åŠ è½½äº§å“æ•°æ®å¤±è´¥:",e),b.error("åŠ è½½äº§å“æ•°æ®å¤±è´¥")}}),ye=()=>l(this,null,function*(){if(t)try{if(console.log("loadProcesses: å¼€å§‹åŠ è½½å·¥åºæ•°æ®ï¼Œç”¨æˆ·ID:",t.id),!M.production_line_id)return console.log("loadProcesses: æœªé€‰æ‹©ç”Ÿäº§çº¿ï¼Œæ¸…ç©ºå·¥åº"),void C([]);const e=d.find(e=>e.id===M.production_line_id);if(!e)return console.log("loadProcesses: æœªæ‰¾åˆ°å¯¹åº”çš„ç”Ÿäº§çº¿ä¿¡æ¯"),void C([]);console.log("loadProcesses: å½“å‰é€‰æ‹©çš„ç”Ÿäº§çº¿:",e.name);let s;if(v(t.role)){if(!e.company_id)return console.error("loadProcesses: ç”Ÿäº§çº¿ç¼ºå°‘company_idä¿¡æ¯"),void C([]);s=e.company_id,console.log("loadProcesses: è¶…çº§ç®¡ç†å‘˜ä½¿ç”¨ç”Ÿäº§çº¿å…¬å¸ID:",s)}else{const{data:e,error:m}=yield w.from("users").select("company_id").eq("id",t.id).single();if(m)throw console.error("loadProcesses: è·å–ç”¨æˆ·å…¬å¸ä¿¡æ¯å¤±è´¥:",m),m;s=e.company_id,console.log("loadProcesses: æ™®é€šç”¨æˆ·ä½¿ç”¨è‡ªå·±çš„å…¬å¸ID:",s)}const{data:m,error:n}=yield w.from("processes").select("id, product_process, product_name, company_id, production_line, production_category, unit_price, is_active").eq("company_id",s).eq("production_line",e.name).eq("is_active",!0).order("product_process");if(n)throw console.error("loadProcesses: æŸ¥è¯¢processesè¡¨å¤±è´¥:",n),n;console.log("loadProcesses: æŸ¥è¯¢åˆ°çš„åŸå§‹æ•°æ®:",m);const i=(null==m?void 0:m.map(e=>({id:e.id,name:e.product_process,product_name:e.product_name,company_id:e.company_id,production_line:e.production_line,production_category:e.production_category,product_process:e.product_process,unit_price:e.unit_price,is_active:e.is_active})))||[];C(i)}catch(e){b.error("åŠ è½½å·¥åºæ•°æ®å¤±è´¥")}}),Ne=()=>l(this,null,function*(){const{data:e,error:t}=yield w.from("users").select("id, name, company_id, production_line, role:user_roles!inner(name)").eq("is_active",!0).order("name");if(t)throw t;S(e||[])}),fe=e=>l(this,null,function*(){if(e)try{const t=d.find(t=>t.id===parseInt(e));if(!t)return void I([]);const{data:s,error:m}=yield w.from("users").select("\n          id, \n          name, \n          production_line,\n          role:user_roles!inner(name)\n        ").eq("production_line",t.name).eq("user_roles.name","ç­é•¿").eq("is_active",!0).order("name");if(m)throw m;I(s||[]),s&&1===s.length&&!M.supervisor_id&&U(e=>a(o({},e),{supervisor_id:s[0].id}))}catch(t){b.error("åŠ è½½ç­é•¿æ•°æ®å¤±è´¥"),I([])}else I([])}),xe=e=>l(this,null,function*(){if(e)try{const t=d.find(t=>t.id===parseInt(e));if(!t)return void L([]);const{data:s,error:m}=yield w.from("users").select("\n          id, \n          name, \n          production_line,\n          role:user_roles!inner(name)\n        ").eq("production_line",t.name).eq("user_roles.name","æ®µé•¿").eq("is_active",!0).order("name");if(m)throw m;L(s||[]),s&&1===s.length&&!M.section_chief_id&&U(e=>a(o({},e),{section_chief_id:s[0].id}))}catch(t){b.error("åŠ è½½æ®µé•¿æ•°æ®å¤±è´¥"),L([])}else L([])}),be=(e,t)=>{U(s=>{let m=t;"production_line_id"===e?m=parseInt(t)||0:"supervisor_id"!==e&&"section_chief_id"!==e||(m=t||null);const n=a(o({},s),{[e]:m});return"production_line_id"===e&&(n.supervisor_id=null,n.section_chief_id=null),n})},_e=e=>{if(H(t=>a(o({},t),{work_type_id:e,product_id:0,process_id:""})),K(""),0===e)return z([]),void A([]);const t=j.find(t=>t.id===e);if(!t)return console.error("handleWorkTypeChange: æœªæ‰¾åˆ°å¯¹åº”çš„å·¥æ—¶ç±»å‹:",e),z([]),void A([]);console.log("handleWorkTypeChange: é€‰æ‹©çš„å·¥æ—¶ç±»å‹åç§°:",t.name);const s=ve();if(console.log("handleWorkTypeChange: ç”¨æˆ·ç”Ÿäº§çº¿:",s),console.log("handleWorkTypeChange: æ‰€æœ‰å·¥åºæ•°æ®:",R),console.log("handleWorkTypeChange: æ‰€æœ‰äº§å“æ•°æ®:",E),s){const e=R.filter(e=>{const m=e.production_line===s,n=e.production_category===t.name,i=m&&n;return console.log(`handleWorkTypeChange: å·¥åº ${e.product_process} ç”Ÿäº§çº¿åŒ¹é…:${m} å·¥æ—¶ç±»å‹åŒ¹é…:${n} æ€»åŒ¹é…:${i}`),i});console.log("handleWorkTypeChange: æŒ‰ç”Ÿäº§çº¿å’Œå·¥æ—¶ç±»å‹è¿‡æ»¤çš„å·¥åº:",e);const m=e.map(e=>e.product_name).filter((e,t,s)=>e&&s.indexOf(e)===t).filter(Boolean);console.log("handleWorkTypeChange: å¯ç”¨äº§å“åˆ—è¡¨:",m),z(m)}else console.log("handleWorkTypeChange: ç”¨æˆ·ç”Ÿäº§çº¿ä¸ºç©ºï¼Œæ¸…ç©ºäº§å“åˆ—è¡¨"),z([]);A([])},ve=()=>{if(M.production_line_id){const e=d.find(e=>e.id===M.production_line_id);return null==e?void 0:e.name}return null},we=(e,t,s)=>{Y(m=>{const n=[...m];let i=s;return"work_type_id"===t||"product_id"===t?i=parseInt(s)||0:"process_id"===t?i=s||"":"quantity"===t&&(i=parseFloat(s)||0),n[e]=a(o({},n[e]),{[t]:i}),"work_type_id"===t?(n[e].product_id=0,n[e].process_id="",ee(t=>a(o({},t),{[e]:""}))):"product_id"===t&&(n[e].process_id=""),n})},ke=e=>{if(!e||!M.production_line_id)return[];const t=j.find(t=>t.id===e),s=ve();if(!t||!s)return[];const m=R.filter(e=>e.production_line===s&&e.production_category===t.name&&e.is_active);return[...new Set(m.map(e=>e.product_name))].map((e,t)=>({id:t+1,name:e}))},De=(e,t)=>{if(!e)return[];const s=ve();if(!s)return[];const m=(t?ke(t):[]).find(t=>t.id===e);if(!m)return[];return R.filter(e=>e.production_line===s&&e.product_name===m.name&&e.is_active)},je=()=>l(this,null,function*(){const e=X.filter(e=>e.work_type_id&&e.process_id&&e.quantity>0),t=[...M.items,...e.map(e=>a(o({},e),{total_amount:e.quantity}))];e.length>0&&b.success(`æˆåŠŸæ·»åŠ  ${e.length} æ¡å·¥æ—¶è®°å½•`),yield Te(t)}),Te=e=>l(this,null,function*(){var s,m;let i;if(!t)return void b.error("âŒ ç”¨æˆ·æœªç™»å½•ï¼Œè¯·é‡æ–°ç™»å½•åå†è¯•",{duration:5e3,description:"ç™»å½•çŠ¶æ€å·²è¿‡æœŸï¼Œè¯·åˆ·æ–°é¡µé¢é‡æ–°ç™»å½•"});if(!M.supervisor_id)return void b.error("âŒ è¯·é€‰æ‹©ç­é•¿",{duration:4e3,description:"ç­é•¿æ˜¯å¿…å¡«é¡¹ï¼Œè¯·åœ¨åŸºæœ¬ä¿¡æ¯ä¸­é€‰æ‹©ç­é•¿"});if(!M.section_chief_id)return void b.error("âŒ è¯·é€‰æ‹©æ®µé•¿",{duration:4e3,description:"æ®µé•¿æ˜¯å¿…å¡«é¡¹ï¼Œè¯·åœ¨åŸºæœ¬ä¿¡æ¯ä¸­é€‰æ‹©æ®µé•¿"});const o=e||M.items;if(0!==o.length){b.loading("ğŸ”„ æ­£åœ¨æäº¤å·¥æ—¶è®°å½•ï¼Œè¯·ç¨å€™...",{id:"submit-loading",description:`æ­£åœ¨æäº¤ ${o.length} æ¡å·¥æ—¶è®°å½•åˆ°å®¡æ ¸ç³»ç»Ÿ`});try{r(!0);try{const{data:e,error:t}=yield w.from("users").select("id").limit(1);if(t)throw new Error(`æ•°æ®åº“è¿æ¥å¤±è´¥: ${t.message}`)}catch(a){return void b.error("æ•°æ®åº“è¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥")}if(!(null==t?void 0:t.id))return void b.error("ç”¨æˆ·ä¿¡æ¯æ— æ•ˆï¼Œè¯·é‡æ–°ç™»å½•");i={user_id:t.id,work_date:M.record_date,supervisor_id:M.supervisor_id,section_chief_id:M.section_chief_id,shift_type:M.shift_type,status:"pending"};const{data:s,error:m}=yield w.from("timesheet_records").insert(i).select().single();if(m)throw m;const o=(e||M.items).map(e=>{const t=R.find(t=>t.id===e.process_id),m=t&&null!==t.unit_price?parseFloat(t.unit_price.toString()):0;return{timesheet_record_id:s.id,process_id:e.process_id,quantity:e.quantity,unit_price:m,amount:e.quantity*m}}),{error:l}=yield w.from("timesheet_record_items").insert(o);if(l)throw l;const c=P.find(e=>e.id===M.supervisor_id);null==c||c.name;b.dismiss("submit-loading"),b.success("æ•°æ®æäº¤æˆåŠŸè¿”å›é¦–é¡µ",{duration:1500}),setTimeout(()=>{n("/dashboard")},1500),Y([Q()]),U({user_id:t.id,record_date:(new Date).toISOString().split("T")[0],production_line_id:0,supervisor_id:null,section_chief_id:null,shift_type:"ç™½ç­",status:"draft",items:[]})}catch(l){b.dismiss("submit-loading");let e="âŒ å·¥æ—¶è®°å½•æäº¤å¤±è´¥",n="è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•ï¼Œå¦‚é—®é¢˜æŒç»­è¯·è”ç³»ç®¡ç†å‘˜";"42501"===(null==l?void 0:l.code)?(e="âŒ æƒé™ä¸è¶³ï¼Œæäº¤å¤±è´¥",n="æ‚¨æ²¡æœ‰æƒé™åˆ›å»ºå·¥æ—¶è®°å½•ï¼Œè¯·è”ç³»ç®¡ç†å‘˜æ£€æŸ¥æ•°æ®åº“æƒé™é…ç½®ã€‚å¦‚æœæ‚¨æ˜¯æ–°å‘˜å·¥ï¼Œå¯èƒ½éœ€è¦ç®¡ç†å‘˜ä¸ºæ‚¨åˆ†é…ç›¸åº”æƒé™ã€‚"):"23502"===(null==l?void 0:l.code)?(e="âŒ æ•°æ®éªŒè¯å¤±è´¥",n="æäº¤çš„æ•°æ®ç¼ºå°‘å¿…å¡«å­—æ®µï¼Œè¯·æ£€æŸ¥æ‰€æœ‰å¿…å¡«é¡¹ï¼ˆç”Ÿäº§çº¿ã€ç­é•¿ã€æ®µé•¿ã€å·¥æ—¶è®°å½•é¡¹ï¼‰æ˜¯å¦å·²æ­£ç¡®å¡«å†™ã€‚"):"23503"===(null==l?void 0:l.code)?(e="âŒ æ•°æ®å…³è”é”™è¯¯",n="æ‚¨é€‰æ‹©çš„ç”Ÿäº§çº¿ã€ç­é•¿æˆ–æ®µé•¿å¯èƒ½å·²è¢«åˆ é™¤æˆ–æ— æ•ˆï¼Œè¯·é‡æ–°é€‰æ‹©åå†è¯•ã€‚å¦‚é—®é¢˜æŒç»­ï¼Œè¯·è”ç³»ç®¡ç†å‘˜ã€‚"):"42703"===(null==l?void 0:l.code)?(e="âŒ æ•°æ®æ ¼å¼é”™è¯¯",n="æäº¤çš„æ•°æ®æ ¼å¼ä¸æ­£ç¡®ï¼Œè¿™å¯èƒ½æ˜¯ç³»ç»Ÿç‰ˆæœ¬é—®é¢˜ï¼Œè¯·è”ç³»æŠ€æœ¯æ”¯æŒã€‚"):(null==(s=null==l?void 0:l.message)?void 0:s.includes("ç½‘ç»œ"))||(null==(m=null==l?void 0:l.message)?void 0:m.includes("è¿æ¥"))?(e="âŒ ç½‘ç»œè¿æ¥å¤±è´¥",n="æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œè¯·æ£€æŸ¥æ‚¨çš„ç½‘ç»œè¿æ¥ï¼Œç¨åå†è¯•ã€‚å¦‚æœé—®é¢˜æŒç»­ï¼Œè¯·è”ç³»ITæ”¯æŒã€‚"):(null==l?void 0:l.message)&&(e="âŒ æäº¤å¤±è´¥",n=`é”™è¯¯è¯¦æƒ…: ${l.message}ã€‚è¯·æˆªå›¾æ­¤é”™è¯¯ä¿¡æ¯å¹¶è”ç³»ç®¡ç†å‘˜ã€‚`),b.error(e,{duration:8e3,description:n,action:{label:"é‡è¯•",onClick:()=>{ae(!0)}}}),console.error("å·¥æ—¶è®°å½•æäº¤å¤±è´¥:",{error:l,errorCode:null==l?void 0:l.code,errorMessage:null==l?void 0:l.message,timestamp:(new Date).toISOString(),userId:null==t?void 0:t.id,recordData:{production_line_id:M.production_line_id,supervisor_id:M.supervisor_id,section_chief_id:M.section_chief_id,itemsCount:o.length}})}finally{r(!1)}}else b.error("âŒ è¯·è‡³å°‘æ·»åŠ ä¸€æ¡å·¥æ—¶è®°å½•",{duration:4e3,description:"å·¥æ—¶è®°å½•ä¸èƒ½ä¸ºç©ºï¼Œè¯·æ·»åŠ è‡³å°‘ä¸€æ¡æœ‰æ•ˆçš„å·¥æ—¶è®°å½•"})});return c.jsxDEV("div",{className:"min-h-screen bg-black text-green-400 font-mono",children:[c.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[c.jsxDEV("div",{className:"mb-4 sm:mb-8",children:[c.jsxDEV("div",{className:"flex justify-between items-center mb-2 sm:mb-4",children:[c.jsxDEV("div",{className:"flex items-center",children:[c.jsxDEV(g,{className:"w-5 h-5 sm:w-8 sm:h-8 text-green-400 mr-2 sm:mr-3"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1602,columnNumber:15},this),c.jsxDEV("h1",{className:"text-xl sm:text-4xl font-bold text-green-400 font-mono",children:"å·¥æ—¶è®°å½•"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1603,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1601,columnNumber:13},this),c.jsxDEV("div",{className:"flex items-center space-x-2",children:[c.jsxDEV("button",{onClick:()=>l(this,null,function*(){ce(!0);try{U({user_id:(null==t?void 0:t.id)||"",record_date:(new Date).toISOString().split("T")[0],production_line_id:0,supervisor_id:null,section_chief_id:null,shift_type:"ç™½ç­",status:"draft",items:[]}),Y([Q()]),ee({}),se({}),K(""),H({work_type_id:0,product_id:0,process_id:"",quantity:0}),yield ue(),b.success("æ•°æ®å·²åˆ·æ–°")}catch(e){b.error("åˆ·æ–°å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{ce(!1)}}),disabled:le,className:"flex items-center space-x-1 sm:space-x-2 px-2 py-1 sm:px-4 sm:py-2 bg-gradient-to-r from-gray-600 to-gray-800 hover:from-gray-500 hover:to-gray-700 disabled:from-gray-600 disabled:to-gray-800 text-green-300 border border-green-400 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 font-mono text-sm sm:text-base disabled:cursor-not-allowed",children:[c.jsxDEV(p,{className:"w-4 h-4 sm:w-5 sm:h-5 "+(le?"animate-spin":"")},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1611,columnNumber:17},this),c.jsxDEV("span",{className:"hidden sm:inline",children:le?"åˆ·æ–°ä¸­...":"åˆ·æ–°"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1612,columnNumber:17},this),c.jsxDEV("span",{className:"sm:hidden",children:le?"...":"åˆ·æ–°"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1613,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1606,columnNumber:15},this),c.jsxDEV(y,{to:"/dashboard",className:"flex items-center space-x-1 sm:space-x-2 px-2 py-1 sm:px-4 sm:py-2 bg-gradient-to-r from-gray-600 to-gray-800 hover:from-gray-500 hover:to-gray-700 text-green-300 border border-green-400 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 font-mono text-sm sm:text-base",children:[c.jsxDEV(N,{className:"w-4 h-4 sm:w-5 sm:h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1619,columnNumber:17},this),c.jsxDEV("span",{className:"hidden sm:inline",children:"è¿”å›æ§åˆ¶å°"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1620,columnNumber:17},this),c.jsxDEV("span",{className:"sm:hidden",children:"è¿”å›"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1621,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1615,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1605,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1600,columnNumber:11},this),c.jsxDEV("div",{className:"h-0.5 sm:h-1 bg-gradient-to-r from-transparent via-green-400 to-transparent"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1625,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1599,columnNumber:9},this),c.jsxDEV("div",{className:"space-y-3 sm:space-y-6",children:c.jsxDEV("div",{className:"flex flex-col lg:flex-row gap-3 sm:gap-6",children:[c.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-3 sm:p-6 flex-1",children:[c.jsxDEV("h2",{className:"text-lg sm:text-xl font-bold text-green-400 mb-2 sm:mb-4 flex items-center gap-2",children:[c.jsxDEV(f,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-400"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1633,columnNumber:17},this),"åŸºæœ¬ä¿¡æ¯"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1632,columnNumber:15},this),c.jsxDEV("div",{className:"space-y-3",children:[c.jsxDEV("div",{className:"grid grid-cols-2 gap-2 sm:gap-4",children:[c.jsxDEV("div",{children:[c.jsxDEV("label",{className:"block text-green-300 text-xs font-medium mb-1",children:"è®°å½•æ—¥æœŸ"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1642,columnNumber:21},this),c.jsxDEV("input",{type:"date",value:M.record_date,onChange:e=>be("record_date",e.target.value),className:"w-full px-2 py-1.5 sm:px-3 sm:py-2 bg-gray-800 border border-green-400 text-green-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-300 text-xs sm:text-sm"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1643,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1641,columnNumber:19},this),c.jsxDEV("div",{children:[c.jsxDEV("label",{className:"block text-green-300 text-xs font-medium mb-1",children:["ç”Ÿäº§çº¿ ",c.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1653,columnNumber:27},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1652,columnNumber:21},this),c.jsxDEV("div",{className:"relative production-line-dropdown",children:[c.jsxDEV("input",{type:"text",value:(null==(e=d.find(e=>e.id===M.production_line_id))?void 0:e.name)||"",onChange:e=>{ne(e.target.value),re(!0)},onFocus:()=>re(!0),placeholder:"æœç´¢æˆ–é€‰æ‹©ç”Ÿäº§çº¿",className:"w-full px-2 py-1.5 sm:px-3 sm:py-2 bg-gray-800 border border-green-400 text-green-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-300 text-xs sm:text-sm"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1656,columnNumber:23},this),ie&&c.jsxDEV("div",{className:"absolute z-20 w-full mt-1 bg-gray-800 border border-green-400 rounded-md shadow-lg max-h-48 overflow-y-auto",children:[d.filter(e=>e.name.toLowerCase().includes(me.toLowerCase())).slice(0,10).map(e=>c.jsxDEV("div",{onClick:()=>{be("production_line_id",e.id),ne(""),re(!1)},className:"px-2 py-1.5 sm:px-3 sm:py-2 text-green-300 hover:bg-gray-700 cursor-pointer border-b border-gray-600 last:border-b-0 text-xs sm:text-sm",children:e.name},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1675,columnNumber:29},this)),0===d.filter(e=>e.name.toLowerCase().includes(me.toLowerCase())).length&&c.jsxDEV("div",{className:"px-2 py-1.5 sm:px-3 sm:py-2 text-gray-400 text-xs sm:text-sm",children:"æœªæ‰¾åˆ°åŒ¹é…çš„ç”Ÿäº§çº¿"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1690,columnNumber:29},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1668,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1655,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1651,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1640,columnNumber:17},this),c.jsxDEV("div",{className:"grid grid-cols-2 gap-2 sm:gap-4",children:[c.jsxDEV("div",{children:[c.jsxDEV("label",{className:"block text-green-300 text-xs font-medium mb-1",children:["ç­é•¿ ",c.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1704,columnNumber:26},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1703,columnNumber:21},this),c.jsxDEV("select",{value:M.supervisor_id||"",onChange:e=>be("supervisor_id",e.target.value||null),disabled:!M.production_line_id,className:"w-full px-2 py-1.5 sm:px-3 sm:py-2 bg-gray-800 border border-green-400 text-green-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-300 text-xs sm:text-sm "+(M.production_line_id?"":"opacity-50 cursor-not-allowed"),children:[c.jsxDEV("option",{value:"",children:(M.production_line_id,"è¯·é€‰æ‹©ç­é•¿")},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1714,columnNumber:23},this),P.map(e=>c.jsxDEV("option",{value:e.id,children:e.name},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1718,columnNumber:25},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1706,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1702,columnNumber:19},this),c.jsxDEV("div",{children:[c.jsxDEV("label",{className:"block text-green-300 text-xs font-medium mb-1",children:["æ®µé•¿ ",c.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1725,columnNumber:26},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1724,columnNumber:21},this),c.jsxDEV("select",{value:M.section_chief_id||"",onChange:e=>be("section_chief_id",e.target.value||null),disabled:!M.production_line_id,className:"w-full px-2 py-1.5 sm:px-3 sm:py-2 bg-gray-800 border border-green-400 text-green-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-300 text-xs sm:text-sm "+(M.production_line_id?"":"opacity-50 cursor-not-allowed"),children:[c.jsxDEV("option",{value:"",children:(M.production_line_id,"è¯·é€‰æ‹©æ®µé•¿")},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1735,columnNumber:23},this),O.map(e=>c.jsxDEV("option",{value:e.id,children:e.name},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1739,columnNumber:25},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1727,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1723,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1701,columnNumber:17},this),c.jsxDEV("div",{className:"grid grid-cols-1 gap-2 sm:gap-4",children:c.jsxDEV("div",{children:[c.jsxDEV("label",{className:"block text-green-300 text-xs font-medium mb-1",children:["ç­æ¬¡ ",c.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1749,columnNumber:26},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1748,columnNumber:21},this),c.jsxDEV("select",{value:M.shift_type,onChange:e=>be("shift_type",e.target.value),className:"w-full px-2 py-1.5 sm:px-3 sm:py-2 bg-gray-800 border border-green-400 text-green-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-300 text-xs sm:text-sm",children:[c.jsxDEV("option",{value:"ç™½ç­",children:"ç™½ç­"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1756,columnNumber:23},this),c.jsxDEV("option",{value:"å¤œç­",children:"å¤œç­"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1757,columnNumber:23},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1751,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1747,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1746,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1638,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1631,columnNumber:13},this),c.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-3 sm:p-6 flex-1",children:[c.jsxDEV("h2",{className:"text-lg sm:text-xl font-bold text-green-400 mb-2 sm:mb-4 flex items-center gap-2",children:[c.jsxDEV(x,{className:"w-4 h-4 sm:w-5 sm:h-5 text-green-400"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1767,columnNumber:17},this),"æ·»åŠ è®°å½•"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1766,columnNumber:15},this),c.jsxDEV("div",{className:"space-y-3 sm:space-y-4",children:X.map((e,t)=>c.jsxDEV("div",{className:"bg-gray-800/50 p-3 sm:p-4 rounded-lg border border-gray-700",children:[c.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[c.jsxDEV("span",{className:"text-green-400 font-medium text-sm",children:["è®°å½• ",t+1]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1778,columnNumber:23},this),c.jsxDEV("button",{onClick:()=>(e=>{Y(t=>{const s=t.filter((t,s)=>s!==e);return 0===s.length?[Q()]:s}),ee(t=>{const s=o({},t);delete s[e];const m={};return Object.keys(s).map(e=>parseInt(e)).filter(t=>t>e).forEach(e=>{m[e-1]=s[e]}),Object.keys(s).map(e=>parseInt(e)).filter(t=>t<e).forEach(e=>{m[e]=s[e]}),m}),se(t=>{const s=o({},t);delete s[e];const m={};return Object.keys(s).map(e=>parseInt(e)).filter(t=>t>e).forEach(e=>{m[e-1]=s[e]}),Object.keys(s).map(e=>parseInt(e)).filter(t=>t<e).forEach(e=>{m[e]=s[e]}),m})})(t),className:"px-3 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-red-500 transition-colors",title:"åˆ é™¤æ­¤è¡Œ",children:"åˆ é™¤"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1779,columnNumber:23},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1777,columnNumber:21},this),c.jsxDEV("div",{className:"space-y-3",children:[c.jsxDEV("div",{className:"grid grid-cols-2 gap-2 sm:gap-4",children:[c.jsxDEV("div",{children:[c.jsxDEV("label",{className:"block text-green-300 text-xs font-medium mb-1",children:["å·¥æ—¶ç±»å‹ ",c.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1794,columnNumber:34},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1793,columnNumber:27},this),c.jsxDEV("select",{value:e.work_type_id||0,onChange:e=>we(t,"work_type_id",parseInt(e.target.value)||0),className:"w-full px-2 py-1.5 sm:px-3 sm:py-2 bg-gray-800 border border-green-400 text-green-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-300 text-xs sm:text-sm",children:[c.jsxDEV("option",{value:0,children:"è¯·é€‰æ‹©å·¥æ—¶ç±»å‹"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1801,columnNumber:29},this),j.map(e=>c.jsxDEV("option",{value:e.id,children:e.name},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1803,columnNumber:31},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1796,columnNumber:27},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1792,columnNumber:25},this),c.jsxDEV("div",{children:[c.jsxDEV("label",{className:"block text-green-300 text-xs font-medium mb-1",children:["äº§å“åç§° ",c.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1812,columnNumber:34},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1811,columnNumber:27},this),c.jsxDEV("div",{className:"relative",children:[c.jsxDEV("input",{type:"text",value:Z[t]||"",onChange:e=>{const s=e.target.value;ee(e=>a(o({},e),{[t]:s})),s||we(t,"product_id",0)},onBlur:s=>{setTimeout(()=>{se(e=>a(o({},e),{[t]:!1}))},200);const m=s.target.value,n=ke(e.work_type_id).find(e=>e.name===m);n&&we(t,"product_id",n.id)},onClick:s=>{e.work_type_id&&(s.currentTarget.focus(),se(e=>a(o({},e),{[t]:!0})))},onFocus:()=>{e.work_type_id&&se(e=>a(o({},e),{[t]:!0}))},className:"w-full px-2 py-1.5 sm:px-3 sm:py-2 bg-gray-800 border border-green-400 text-green-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-300 text-xs sm:text-sm "+(e.work_type_id?"":"opacity-50 cursor-not-allowed"),placeholder:e.work_type_id?"è¯·è¾“å…¥äº§å“åç§°":"è¯·å…ˆé€‰æ‹©å·¥æ—¶ç±»å‹",disabled:!e.work_type_id},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1815,columnNumber:29},this),te[t]&&e.work_type_id&&c.jsxDEV("div",{className:"absolute z-10 w-full mt-1 bg-gray-800 border border-green-400 rounded-md shadow-lg max-h-40 overflow-y-auto",children:ke(e.work_type_id).filter(e=>e.name.toLowerCase().includes((Z[t]||"").toLowerCase())).map(e=>c.jsxDEV("div",{onClick:()=>{ee(s=>a(o({},s),{[t]:e.name})),we(t,"product_id",e.id),se(e=>a(o({},e),{[t]:!1}))},className:"px-2 py-1.5 sm:px-3 sm:py-2 text-green-300 hover:bg-gray-700 cursor-pointer border-b border-gray-600 last:border-b-0 text-xs sm:text-sm",children:e.name},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1868,columnNumber:35},this))},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1862,columnNumber:31},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1814,columnNumber:27},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1810,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1791,columnNumber:23},this),c.jsxDEV("div",{className:"grid grid-cols-2 gap-2 sm:gap-4",children:[c.jsxDEV("div",{children:[c.jsxDEV("label",{className:"block text-green-300 text-xs font-medium mb-1",children:["å·¥åºåç§° ",c.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1890,columnNumber:34},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1889,columnNumber:27},this),c.jsxDEV("select",{value:e.process_id||"",onChange:e=>we(t,"process_id",e.target.value||""),className:"w-full px-2 py-1.5 sm:px-3 sm:py-2 bg-gray-800 border border-green-400 text-green-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-300 text-xs sm:text-sm "+(e.product_id?"":"opacity-50 cursor-not-allowed"),disabled:!e.product_id,children:[c.jsxDEV("option",{value:"",children:e.product_id?"è¯·é€‰æ‹©å·¥åºåç§°":"è¯·å…ˆé€‰æ‹©äº§å“"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1900,columnNumber:29},this),De(e.product_id,e.work_type_id).map(e=>c.jsxDEV("option",{value:e.id,children:e.product_process},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1904,columnNumber:31},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1892,columnNumber:27},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1888,columnNumber:25},this),c.jsxDEV("div",{children:[c.jsxDEV("label",{className:"block text-green-300 text-xs font-medium mb-1",children:["æ•°é‡ ",c.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1913,columnNumber:32},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1912,columnNumber:27},this),c.jsxDEV("input",{type:"number",value:e.quantity||"",onChange:e=>we(t,"quantity",parseFloat(e.target.value)||0),onWheel:e=>e.currentTarget.blur(),className:"w-full px-2 py-1.5 sm:px-3 sm:py-2 bg-gray-800 border border-green-400 text-green-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-300 text-xs sm:text-sm [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:"è¯·è¾“å…¥æ•°é‡",min:"0",step:"0.01"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1915,columnNumber:27},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1911,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1887,columnNumber:23},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1789,columnNumber:21},this)]},t,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1776,columnNumber:19},this))},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1774,columnNumber:15},this),c.jsxDEV("div",{className:"mt-4 sm:mt-6 grid grid-cols-2 gap-2 sm:flex sm:justify-between sm:items-center",children:[c.jsxDEV("button",{onClick:()=>{Y(e=>[...e,Q()]);const e=X.length;ee(t=>a(o({},t),{[e]:""})),se(t=>a(o({},t),{[e]:!1}))},className:"px-2 py-2 sm:px-4 sm:py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 transition-colors flex items-center justify-center gap-1 sm:gap-2 text-xs sm:text-sm",children:[c.jsxDEV(x,{className:"w-3 h-3 sm:w-4 sm:h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1938,columnNumber:19},this),c.jsxDEV("span",{className:"hidden sm:inline",children:"æ·»åŠ æ–°è®°å½•é¡¹"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1939,columnNumber:19},this),c.jsxDEV("span",{className:"sm:hidden",children:"æ·»åŠ è®°å½•"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1940,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1934,columnNumber:17},this),c.jsxDEV("button",{onClick:()=>{if(!M.supervisor_id)return void b.error("âŒ è¯·é€‰æ‹©ç­é•¿",{duration:4e3,description:"ç­é•¿æ˜¯å¿…å¡«é¡¹ï¼Œè¯·åœ¨åŸºæœ¬ä¿¡æ¯ä¸­é€‰æ‹©ç­é•¿"});if(!M.section_chief_id)return void b.error("âŒ è¯·é€‰æ‹©æ®µé•¿",{duration:4e3,description:"æ®µé•¿æ˜¯å¿…å¡«é¡¹ï¼Œè¯·åœ¨åŸºæœ¬ä¿¡æ¯ä¸­é€‰æ‹©æ®µé•¿"});const e=X.filter(e=>e.work_type_id&&e.process_id&&e.quantity>0);for(let t=0;t<e.length;t++){const s=e[t],m=E.find(e=>e.id===s.product_id);if(!m||!m.name||""===m.name.trim())return void b.error("âŒ äº§å“åç§°ä¸å®Œæ•´",{duration:4e3,description:`ç¬¬ ${X.indexOf(s)+1} æ¡è®°å½•çš„äº§å“åç§°ä¸å®Œæ•´ï¼Œè¯·é‡æ–°é€‰æ‹©äº§å“`})}ae(!0)},className:"px-2 py-2 sm:px-6 sm:py-2 rounded-md focus:outline-none focus:ring-2 transition-colors text-xs sm:text-sm font-medium "+(0!==X.filter(e=>e.work_type_id&&e.process_id&&e.quantity>0).length&&M.supervisor_id&&M.section_chief_id?"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500":"bg-gray-500 text-gray-300 cursor-not-allowed"),disabled:0===X.filter(e=>e.work_type_id&&e.process_id&&e.quantity>0).length||!M.supervisor_id||!M.section_chief_id,children:"æäº¤å®¡æ ¸"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1942,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1933,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1765,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1629,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1627,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1597,columnNumber:7},this),c.jsxDEV(k,{isOpen:oe,onClose:()=>ae(!1),onConfirm:()=>l(this,null,function*(){ae(!1),yield je()}),record:M,items:X.filter(e=>e.work_type_id&&e.process_id&&e.quantity>0),productionLines:d,supervisors:P,sectionLeaders:O,workTypes:j,products:E,processes:R},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1965,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetRecord.tsx",lineNumber:1596,columnNumber:5},this)}export{D as default};
