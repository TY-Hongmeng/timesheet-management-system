import{r as e,j as t,s as m,c as s,d as n,t as r,T as a,b as o,P as i,X as c,S as l,f as u}from"../libs/lib-react-CmVvENop.js";import{u as d,c as g,s as h,i as p,P as N}from"./page-admin-DIiCL3HX.js";import{t as b}from"../libs/lib-toast-BLtamXt4.js";import{C as x,E as v}from"../components/components-shared-zNXwIS8Z.js";import{u as y,L as f}from"../vendor-BPcnth7H.js";import"../libs/lib-dnd-kit-NakZffAn.js";import"../libs/lib-react-dom-xIK_1wjR.js";import"../libs/lib-supabase-CwH9oqoL.js";import"./page-reports-BuKKTJso.js";import"../libs/lib-excel-ChPHbVhZ.js";const w=()=>{var w;const{user:k,loading:_}=d(),j=y(),[D,M]=e.useState([]),[E,P]=e.useState([]),[V,C]=e.useState(!0),[S,L]=e.useState(""),[O,T]=e.useState(""),[B,z]=e.useState(""),[F,I]=e.useState(""),[q,W]=e.useState(!1),[A,G]=e.useState(!1),[R,U]=e.useState(null),[$,H]=e.useState(!1),[J,K]=e.useState([]),[Q,X]=e.useState([]),[Y,Z]=e.useState([]),[ee,te]=e.useState([]),[me,se]=e.useState([]),[ne,re]=e.useState([]),[ae,oe]=e.useState(!1),[ie,ce]=e.useState(!1),[le,ue]=e.useState(!1),[de,ge]=e.useState({production_line:"",production_category:"",product_name:""}),[he,pe]=e.useState({company_id:"",production_line:"",production_category:"",product_name:"",product_process:"",unit_price:"",effective_date:(new Date).toISOString().slice(0,7),work_time_type:"生产工时"}),[Ne,be]=e.useState(null),[xe,ve]=e.useState(!1),[ye,fe]=e.useState(1),[we,ke]=e.useState(20),[_e,je]=e.useState(null),[De,Me]=e.useState(!1),[Ee,Pe]=e.useState(!1);e.useEffect(()=>{if(!_&&!k)return b.error("请先登录"),void j("/login");k&&Ve()},[k,_,j]);const Ve=async()=>{if(k)return await g(k.id,N.PROCESS_MANAGEMENT)?(Ce(),void Te()):(b.error("您没有权限访问工序管理功能"),void j("/dashboard"))},Ce=async()=>{var e;try{if(C(!0),!k)return void b.error("用户信息不存在");let t=h.from("processes").select("\n          *,\n          companies!inner(\n            name\n          )\n        ").eq("is_active",!0);if(!p(k.role)){if(!(null==(e=k.company)?void 0:e.id))return void b.error("用户没有关联的公司，请联系管理员");t=t.eq("company_id",k.company.id)}const{data:m,error:s}=await t.order("created_at",{ascending:!1});if(s)return void b.error("获取工序列表失败: ".concat(s.message));const n=(m||[]).map(e=>{var t;return{...e,company_name:(null==(t=e.companies)?void 0:t.name)||"未知公司"}});M(n),Se(n)}catch(t){b.error("获取工序列表失败: ".concat(t.message||"未知错误"))}finally{C(!1)}},Se=e=>{var t;if(!(null==(t=null==k?void 0:k.company)?void 0:t.id))return;const m=e.filter(e=>{var t;return e.company_id===(null==(t=k.company)?void 0:t.id)}),s=[...new Set(m.map(e=>e.production_line).filter(Boolean))];K(s);const n=[...new Set(m.map(e=>e.product_name).filter(Boolean))];X(n);const r=[...new Set(m.map(e=>e.product_process).filter(Boolean))];Z(r)},Le=(e,t)=>{switch(pe(m=>({...m,[e]:t})),e){case"production_line":const e=J.filter(e=>e.toLowerCase().includes(t.toLowerCase()));te(e),oe(t.length>0&&e.length>0);break;case"product_name":const m=Q.filter(e=>e.toLowerCase().includes(t.toLowerCase()));se(m),ce(t.length>0&&m.length>0);break;case"product_process":const s=Y.filter(e=>e.toLowerCase().includes(t.toLowerCase()));re(s),ue(t.length>0&&s.length>0)}},Oe=(e,t)=>{switch(pe(m=>({...m,[e]:t})),e){case"production_line":oe(!1);break;case"product_name":ce(!1);break;case"product_process":ue(!1)}},Te=async()=>{var e,t;try{if(!k)return void b.error("用户信息不存在");let m=h.from("companies").select("id, name");p(k.role)||(m=m.eq("id",null==(e=k.company)?void 0:e.id));const{data:s,error:n}=await m.order("name");if(n)return void b.error("获取公司列表失败");P(s||[]),!p(k.role)&&(null==(t=k.company)?void 0:t.id)&&pe(e=>({...e,company_id:k.company.id}))}catch(m){b.error("获取公司列表失败")}},Be=()=>{var e;return!p(null==k?void 0:k.role)&&(null==(e=null==k?void 0:k.company)?void 0:e.id)?k.company.id:""},ze=D.reduce((e,t)=>{var m,s,n;const r="".concat(t.company_id,"_").concat(null==(m=t.production_line)?void 0:m.trim(),"_").concat(t.production_category,"_").concat(null==(s=t.product_name)?void 0:s.trim(),"_").concat(null==(n=t.product_process)?void 0:n.trim());return(!e[r]||new Date(t.created_at)>new Date(e[r].created_at))&&(e[r]=t),e},{}),Fe=Object.values(ze).filter(e=>{if(Ee)return!e.unit_price||e.unit_price<=0;const t=""===S||e.production_line.toLowerCase().includes(S.toLowerCase())||e.product_name.toLowerCase().includes(S.toLowerCase())||e.production_category&&e.production_category.toLowerCase().includes(S.toLowerCase())||e.product_process&&e.product_process.toLowerCase().includes(S.toLowerCase()),m=""===de.production_line||e.production_line===de.production_line,s=""===de.production_category||e.production_category===de.production_category,n=!F||e.effective_date===F;return t&&m&&s&&n}),Ie=Fe.length,qe=Math.ceil(Ie/we),We=(ye-1)*we,Ae=We+we,Ge=Fe.slice(We,Ae),Re=[...new Set(D.map(e=>e.production_line).filter(Boolean))],Ue=[...new Set(D.map(e=>e.production_category).filter(Boolean))];return t.jsxDEV("div",{className:"min-h-screen bg-black text-green-400 font-mono",children:[t.jsxDEV("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[t.jsxDEV("div",{className:"mb-8",children:[t.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[t.jsxDEV("div",{className:"flex items-center",children:[t.jsxDEV(m,{className:"w-8 h-8 text-green-400 mr-3"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:792,columnNumber:15},void 0),t.jsxDEV("h1",{className:"text-4xl font-bold text-green-400 font-mono",children:"工序管理"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:793,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:791,columnNumber:13},void 0),t.jsxDEV(f,{to:"/dashboard",className:"flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2 bg-gradient-to-r from-gray-700 to-gray-800 hover:from-gray-600 hover:to-gray-700 text-green-300 hover:text-green-200 rounded-lg font-mono transition-all duration-200 shadow-md hover:shadow-lg border border-gray-600 hover:border-green-500/50",children:[t.jsxDEV(s,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:799,columnNumber:15},void 0),t.jsxDEV("span",{className:"hidden sm:inline",children:"返回控制台"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:800,columnNumber:15},void 0),t.jsxDEV("span",{className:"sm:hidden",children:"返回"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:801,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:795,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:790,columnNumber:11},void 0),t.jsxDEV("div",{className:"h-1 bg-gradient-to-r from-transparent via-green-400 to-transparent"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:804,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:789,columnNumber:9},void 0),t.jsxDEV("div",{className:"mb-6 space-y-4",children:[t.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4",children:t.jsxDEV("div",{className:"flex-1",children:t.jsxDEV("div",{className:"relative",children:[t.jsxDEV(n,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-green-400/60"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:812,columnNumber:17},void 0),t.jsxDEV("input",{type:"text",placeholder:"搜索工序内容、生产线、产品名称...",value:S,onChange:e=>{L(e.target.value),fe(1)},className:"w-full bg-black border border-green-400/30 rounded px-10 py-2 text-green-400 placeholder-green-400/60 focus:outline-none focus:border-green-400"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:813,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:811,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:810,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:809,columnNumber:11},void 0),t.jsxDEV("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-4",children:[t.jsxDEV("button",{onClick:()=>H(!$),className:"flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-4 py-2 bg-green-600 hover:bg-green-500 text-black font-bold rounded transition-colors font-mono text-sm sm:text-base",children:[t.jsxDEV(r,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:833,columnNumber:15},void 0),t.jsxDEV("span",{className:"hidden sm:inline",children:"筛选"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:834,columnNumber:15},void 0),t.jsxDEV("span",{className:"sm:hidden",children:"筛选"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:835,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:829,columnNumber:13},void 0),t.jsxDEV("button",{onClick:()=>{0===D.filter(e=>!e.unit_price||e.unit_price<=0).length?b.info("当前没有未定价的工序"):(L(""),ge({production_line:"",production_category:"",product_name:""}),I(""),Pe(!Ee))},className:"flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-4 py-2 font-bold rounded transition-colors font-mono text-sm sm:text-base ".concat(Ee?"bg-red-600 hover:bg-red-500 text-white":"bg-orange-600 hover:bg-orange-500 text-white"),children:[t.jsxDEV(a,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:856,columnNumber:15},void 0),t.jsxDEV("span",{className:"hidden sm:inline",children:Ee?"显示全部":"未定价工序"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:857,columnNumber:15},void 0),t.jsxDEV("span",{className:"sm:hidden",children:Ee?"全部":"未定价"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:858,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:837,columnNumber:13},void 0),t.jsxDEV("button",{onClick:()=>Me(!0),className:"flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-4 py-2 bg-green-600 hover:bg-green-500 text-black font-bold rounded transition-colors font-mono text-sm sm:text-base",children:[t.jsxDEV(o,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:864,columnNumber:15},void 0),t.jsxDEV("span",{className:"hidden sm:inline",children:"批量导入"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:865,columnNumber:15},void 0),t.jsxDEV("span",{className:"sm:hidden",children:"导入"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:866,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:860,columnNumber:13},void 0),t.jsxDEV("button",{onClick:()=>{q||(Ne?pe({...Ne,unit_price:""}):(()=>{const e=Be();pe({company_id:e,production_line:"",production_category:"",product_name:"",product_process:"",unit_price:"",effective_date:(new Date).toISOString().slice(0,7),work_time_type:"生产工时"})})()),W(!q)},className:"flex items-center justify-center gap-1 sm:gap-2 px-2 sm:px-4 py-2 bg-green-600 hover:bg-green-500 text-black font-bold rounded transition-colors font-mono text-sm sm:text-base",children:[t.jsxDEV(i,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:886,columnNumber:15},void 0),t.jsxDEV("span",{className:"hidden sm:inline",children:"添加工序"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:887,columnNumber:15},void 0),t.jsxDEV("span",{className:"sm:hidden",children:"添加"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:888,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:868,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:828,columnNumber:11},void 0),$&&t.jsxDEV("div",{className:"bg-green-900/10 border border-green-400/30 rounded p-4",children:[t.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-sm font-medium text-green-400 mb-2",children:"生产线"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:897,columnNumber:19},void 0),t.jsxDEV("select",{value:de.production_line,onChange:e=>{ge({...de,production_line:e.target.value}),fe(1)},className:"w-full bg-black border border-green-400/30 rounded px-3 py-2 text-green-400 focus:outline-none focus:border-green-400",children:[t.jsxDEV("option",{value:"",children:"全部生产线"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:908,columnNumber:21},void 0),Re.map(e=>t.jsxDEV("option",{value:e,children:e},e,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:910,columnNumber:23},void 0))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:900,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:896,columnNumber:17},void 0),t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-sm font-medium text-green-400 mb-2",children:"工时类型"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:915,columnNumber:19},void 0),t.jsxDEV("select",{value:de.production_category,onChange:e=>{ge({...de,production_category:e.target.value}),fe(1)},className:"w-full bg-black border border-green-400/30 rounded px-3 py-2 text-green-400 focus:outline-none focus:border-green-400",children:[t.jsxDEV("option",{value:"",children:"全部类别"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:926,columnNumber:21},void 0),Ue.map(e=>t.jsxDEV("option",{value:e,children:e},e,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:928,columnNumber:23},void 0))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:918,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:914,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:895,columnNumber:15},void 0),t.jsxDEV("div",{className:"flex justify-start mt-4",children:t.jsxDEV("button",{onClick:()=>{ge({production_line:"",production_category:"",product_name:""}),L(""),I(""),Pe(!1),fe(1)},className:"flex items-center space-x-2 bg-gray-900/20 border border-gray-400/30 px-4 py-2 rounded hover:bg-gray-900/30 transition-colors text-gray-400",children:[t.jsxDEV(c,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:944,columnNumber:19},void 0),t.jsxDEV("span",{children:"清除筛选"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:945,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:934,columnNumber:17},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:933,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:894,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:808,columnNumber:9},void 0),q&&t.jsxDEV("div",{className:"mb-6 p-4 border border-green-400/30 rounded bg-green-900/10",children:[t.jsxDEV("h3",{className:"text-lg font-semibold mb-4 text-green-400",children:["为 ",t.jsxDEV("strong",{children:(null==(w=null==k?void 0:k.company)?void 0:w.name)||"未设置公司"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:956,columnNumber:17},void 0)," 添加新工序"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:955,columnNumber:13},void 0),t.jsxDEV("div",{className:"space-y-4",children:[t.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxDEV("div",{className:"relative",children:[t.jsxDEV("label",{className:"block text-sm font-medium mb-2 text-green-400",children:["生产线 ",t.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:963,columnNumber:88},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:963,columnNumber:19},void 0),t.jsxDEV("input",{type:"text",value:he.production_line,onChange:e=>Le("production_line",e.target.value),onFocus:()=>{he.production_line&&ee.length>0&&oe(!0)},onBlur:()=>{setTimeout(()=>oe(!1),200)},className:"w-full bg-black border border-green-400/30 rounded px-3 py-2 text-green-400 focus:outline-none focus:border-green-400",placeholder:"请输入生产线"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:964,columnNumber:19},void 0),ae&&ee.length>0&&t.jsxDEV("div",{className:"absolute z-10 w-full mt-1 bg-gray-800 border border-green-400/30 rounded-md shadow-lg max-h-40 overflow-y-auto",children:ee.map((e,m)=>t.jsxDEV("div",{onClick:()=>Oe("production_line",e),className:"px-3 py-2 text-green-400 hover:bg-green-900/20 cursor-pointer border-b border-green-400/10 last:border-b-0",children:e},m,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:982,columnNumber:25},void 0))},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:980,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:962,columnNumber:17},void 0),t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-sm font-medium mb-2 text-green-400",children:["工时类型 ",t.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:994,columnNumber:89},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:994,columnNumber:19},void 0),t.jsxDEV("select",{value:he.work_time_type,onChange:e=>pe({...he,work_time_type:e.target.value}),className:"w-full bg-black border border-green-400/30 rounded px-3 py-2 text-green-400 focus:outline-none focus:border-green-400",children:[t.jsxDEV("option",{value:"生产工时",children:"生产工时"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1e3,columnNumber:21},void 0),t.jsxDEV("option",{value:"非生产工时",children:"非生产工时"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1001,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:995,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:993,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:961,columnNumber:15},void 0),t.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxDEV("div",{className:"relative",children:[t.jsxDEV("label",{className:"block text-sm font-medium mb-2 text-green-400",children:["产品名称 ",t.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1009,columnNumber:89},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1009,columnNumber:19},void 0),t.jsxDEV("input",{type:"text",value:he.product_name,onChange:e=>Le("product_name",e.target.value),onFocus:()=>{he.product_name&&me.length>0&&ce(!0)},onBlur:()=>{setTimeout(()=>ce(!1),200)},className:"w-full bg-black border border-green-400/30 rounded px-3 py-2 text-green-400 focus:outline-none focus:border-green-400",placeholder:"请输入产品名称"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1010,columnNumber:19},void 0),ie&&me.length>0&&t.jsxDEV("div",{className:"absolute z-10 w-full mt-1 bg-gray-800 border border-green-400/30 rounded-md shadow-lg max-h-40 overflow-y-auto",children:me.map((e,m)=>t.jsxDEV("div",{onClick:()=>Oe("product_name",e),className:"px-3 py-2 text-green-400 hover:bg-green-900/20 cursor-pointer border-b border-green-400/10 last:border-b-0",children:e},m,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1028,columnNumber:23},void 0))},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1026,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1008,columnNumber:17},void 0),t.jsxDEV("div",{className:"relative",children:[t.jsxDEV("label",{className:"block text-sm font-medium mb-2 text-green-400",children:["产品工序 ",t.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1040,columnNumber:89},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1040,columnNumber:19},void 0),t.jsxDEV("input",{type:"text",value:he.product_process,onChange:e=>Le("product_process",e.target.value),onFocus:()=>{he.product_process&&ne.length>0&&ue(!0)},onBlur:()=>{setTimeout(()=>ue(!1),200)},className:"w-full bg-black border border-green-400/30 rounded px-3 py-2 text-green-400 focus:outline-none focus:border-green-400",placeholder:"请输入产品工序"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1041,columnNumber:19},void 0),le&&ne.length>0&&t.jsxDEV("div",{className:"absolute z-10 w-full mt-1 bg-gray-800 border border-green-400/30 rounded-md shadow-lg max-h-40 overflow-y-auto",children:ne.map((e,m)=>t.jsxDEV("div",{onClick:()=>Oe("product_process",e),className:"px-3 py-2 text-green-400 hover:bg-green-900/20 cursor-pointer border-b border-green-400/10 last:border-b-0",children:e},m,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1059,columnNumber:25},void 0))},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1057,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1039,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1007,columnNumber:15},void 0),t.jsxDEV("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-sm font-medium mb-2 text-green-400",children:"单价（可选）"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1075,columnNumber:19},void 0),t.jsxDEV("input",{type:"number",step:"0.01",value:he.unit_price,onChange:e=>pe({...he,unit_price:e.target.value}),onWheel:e=>e.currentTarget.blur(),className:"w-full bg-black border border-green-400/30 rounded px-3 py-2 text-green-400 focus:outline-none focus:border-green-400 [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none [-moz-appearance:textfield]",placeholder:"请输入单价"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1076,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1074,columnNumber:17},void 0),t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-sm font-medium mb-2 text-green-400",children:"生效年月"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1087,columnNumber:19},void 0),t.jsxDEV("input",{type:"month",value:he.effective_date,onChange:e=>pe({...he,effective_date:e.target.value}),className:"w-full bg-black border border-green-400/30 rounded px-3 py-2 text-green-400 focus:outline-none focus:border-green-400"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1088,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1086,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1073,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:959,columnNumber:13},void 0),t.jsxDEV("div",{className:"flex space-x-4 mt-4",children:[t.jsxDEV("button",{type:"button",onClick:async()=>{var e,t;if(!k)return b.error("用户未登录，请重新登录"),void j("/login");const m=null==(e=k.company)?void 0:e.id;if(m)if(he.production_line.trim())if(he.product_name.trim())if(he.product_process.trim())if(D.find(e=>e.company_id===m&&e.production_line.trim()===he.production_line.trim()&&e.production_category===he.work_time_type&&e.product_name.trim()===he.product_name.trim()&&e.product_process.trim()===he.product_process.trim()))b.error("该工序已存在，请检查输入信息！",{duration:4e3,style:{fontSize:"16px",fontWeight:"bold"}});else try{const e={company_id:m,production_line:he.production_line,production_category:he.work_time_type,product_name:he.product_name,product_process:he.product_process,unit_price:he.unit_price&&""!==he.unit_price.trim()?parseFloat(he.unit_price):null,effective_date:he.effective_date?"".concat(he.effective_date,"-01"):null,is_active:!0},{data:s,error:n}=await h.from("processes").insert(e).select("\n          *,\n          companies!inner(\n            name\n          )\n        ").single();if(n)return void b.error("添加工序失败: ".concat(n.message));const r={...s,company_name:(null==(t=s.companies)?void 0:t.name)||"未知公司"};M([r,...D]),be({...he}),pe({...he,product_process:""}),W(!1),b.success("工序添加成功")}catch(s){b.error("添加工序失败: ".concat(s.message||"未知错误"))}else b.error("请填写产品工序");else b.error("请填写产品名称");else b.error("请填写生产线");else b.error("用户没有关联的公司，请联系管理员")},className:"bg-green-900/20 border border-green-400/30 px-4 py-2 rounded hover:bg-green-900/30 transition-colors text-green-400",children:"确认添加"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1098,columnNumber:15},void 0),t.jsxDEV("button",{onClick:()=>{W(!1);const e=Be();pe({company_id:e,production_line:"",production_category:"",product_name:"",product_process:"",unit_price:"",effective_date:(new Date).toISOString().slice(0,7),work_time_type:"生产工时"})},className:"border border-green-400/30 px-4 py-2 rounded hover:bg-green-900/20 transition-colors text-green-400",children:"取消"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1103,columnNumber:15},void 0),t.jsxDEV("button",{onClick:()=>{const e=Be();pe({company_id:e,production_line:"",production_category:"",product_name:"",product_process:"",unit_price:"",effective_date:(new Date).toISOString().slice(0,7),work_time_type:"生产工时"}),b.success("表单内容已清除")},className:"bg-red-900/20 border border-red-400/30 px-4 py-2 rounded hover:bg-red-900/30 transition-colors text-red-400",children:"清除内容"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1122,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1097,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:954,columnNumber:11},void 0),A&&R&&t.jsxDEV("div",{className:"bg-gray-800 border border-green-500 rounded-lg p-6 mb-6",children:[t.jsxDEV("h3",{className:"text-lg font-semibold text-green-400 mb-4",children:"编辑工序"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1148,columnNumber:13},void 0),t.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["公司 ",t.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1152,columnNumber:22},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1151,columnNumber:17},void 0),t.jsxDEV("select",{value:he.company_id,onChange:e=>pe({...he,company_id:e.target.value}),className:"w-full bg-black border border-green-400/30 rounded px-3 py-2 text-green-400 focus:outline-none focus:border-green-400",children:[t.jsxDEV("option",{value:"",children:"请选择公司"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1159,columnNumber:19},void 0),E.map(e=>t.jsxDEV("option",{value:e.id,children:e.name},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1161,columnNumber:21},void 0))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1154,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1150,columnNumber:15},void 0),t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["生产线 ",t.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1169,columnNumber:23},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1168,columnNumber:17},void 0),t.jsxDEV("input",{type:"text",value:he.production_line,onChange:e=>pe({...he,production_line:e.target.value}),className:"w-full bg-black border border-green-400/30 rounded px-3 py-2 text-green-400 focus:outline-none focus:border-green-400",placeholder:"请输入生产线"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1171,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1167,columnNumber:15},void 0),t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["工时类型 ",t.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1181,columnNumber:24},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1180,columnNumber:17},void 0),t.jsxDEV("select",{value:he.work_time_type,onChange:e=>pe({...he,work_time_type:e.target.value}),className:"w-full bg-black border border-green-400/30 rounded px-3 py-2 text-green-400 focus:outline-none focus:border-green-400",children:[t.jsxDEV("option",{value:"生产工时",children:"生产工时"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1188,columnNumber:19},void 0),t.jsxDEV("option",{value:"非生产工时",children:"非生产工时"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1189,columnNumber:19},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1183,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1179,columnNumber:15},void 0),t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["产品名称 ",t.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1194,columnNumber:24},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1193,columnNumber:17},void 0),t.jsxDEV("input",{type:"text",value:he.product_name,onChange:e=>pe({...he,product_name:e.target.value}),className:"w-full bg-black border border-green-400/30 rounded px-3 py-2 text-green-400 focus:outline-none focus:border-green-400",placeholder:"请输入产品名称"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1196,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1192,columnNumber:15},void 0),t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["产品工序 ",t.jsxDEV("span",{className:"text-red-400",children:"*"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1206,columnNumber:24},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1205,columnNumber:17},void 0),t.jsxDEV("input",{type:"text",value:he.product_process,onChange:e=>pe({...he,product_process:e.target.value}),className:"w-full bg-black border border-green-400/30 rounded px-3 py-2 text-green-400 focus:outline-none focus:border-green-400",placeholder:"请输入产品工序"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1208,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1204,columnNumber:15},void 0),t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"单价"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1217,columnNumber:17},void 0),t.jsxDEV("input",{type:"number",step:"0.001",value:he.unit_price,onChange:e=>pe({...he,unit_price:e.target.value}),onWheel:e=>e.currentTarget.blur(),className:"w-full bg-black border border-green-400/30 rounded px-3 py-2 text-green-400 focus:outline-none focus:border-green-400 [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none [-moz-appearance:textfield]",placeholder:"请输入单价（精确到小数点后三位）"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1220,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1216,columnNumber:15},void 0),t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"生效年月"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1231,columnNumber:17},void 0),t.jsxDEV("input",{type:"month",value:he.effective_date,onChange:e=>pe({...he,effective_date:e.target.value}),className:"w-full bg-black border border-green-400/30 rounded px-3 py-2 text-green-400 focus:outline-none focus:border-green-400"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1234,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1230,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1149,columnNumber:13},void 0),t.jsxDEV("div",{className:"flex justify-end space-x-3 mt-4",children:[t.jsxDEV("button",{onClick:()=>{G(!1),U(null),pe({company_id:"",production_line:"",production_category:"",product_name:"",product_process:"",unit_price:"",effective_date:(new Date).toISOString().slice(0,7),work_time_type:"生产工时"})},className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 transition-colors",children:"取消"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1243,columnNumber:15},void 0),t.jsxDEV("button",{onClick:async()=>{var e,t,m;if(R){if(!k)return b.error("用户未登录，请重新登录"),void j("/login");if(p(k.role)||R.company_id===(null==(e=k.company)?void 0:e.id))if(p(k.role)||he.company_id===(null==(t=k.company)?void 0:t.id))if(he.company_id)if(he.production_line.trim())if(he.product_name.trim())if(D.find(e=>e.id!==R.id&&e.company_id===he.company_id&&e.production_line.trim()===he.production_line.trim()&&e.production_category===he.work_time_type&&e.product_name.trim()===he.product_name.trim()&&e.product_process.trim()===he.product_process.trim()))b.error("该工序已存在，请检查输入信息！",{duration:4e3,style:{fontSize:"16px",fontWeight:"bold"}});else try{const{data:e,error:t}=await h.from("processes").update({company_id:he.company_id,production_line:he.production_line,production_category:he.work_time_type,product_name:he.product_name,product_process:he.product_process,unit_price:he.unit_price?parseFloat(he.unit_price):null,effective_date:he.effective_date?"".concat(he.effective_date,"-01"):null}).eq("id",R.id).select("\n          *,\n          companies!inner(\n            name\n          )\n        ").single();if(t)return void b.error("更新工序失败");const s={...e,company_name:(null==(m=e.companies)?void 0:m.name)||"未知公司"};M(D.map(e=>e.id===R.id?s:e)),be({...he}),G(!1),U(null),b.success("工序更新成功")}catch(s){b.error("更新工序失败")}else b.error("请输入产品名称");else b.error("请输入生产线");else b.error("请选择公司");else b.error("您只能将工序分配给自己的公司");else b.error("您只能编辑自己公司的工序")}},className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"更新"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1262,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1242,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1147,columnNumber:11},void 0),t.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg overflow-hidden",children:V?t.jsxDEV("div",{className:"p-8 text-center text-green-400/60",children:t.jsxDEV("div",{className:"animate-pulse",children:"加载中..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1277,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1276,columnNumber:13},void 0):0===Fe.length?t.jsxDEV("div",{className:"p-8 text-center text-green-400/60",children:S?"未找到匹配的工序":"暂无工序数据"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1280,columnNumber:13},void 0):t.jsxDEV("div",{className:"overflow-x-auto",children:t.jsxDEV("table",{className:"w-full",children:[t.jsxDEV("thead",{className:"bg-green-900/30",children:t.jsxDEV("tr",{children:[t.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-mono font-medium text-green-400 uppercase tracking-wider",children:"序号"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1288,columnNumber:21},void 0),t.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-mono font-medium text-green-400 uppercase tracking-wider",children:"公司"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1291,columnNumber:21},void 0),t.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-mono font-medium text-green-400 uppercase tracking-wider",children:"生产线"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1294,columnNumber:21},void 0),t.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-mono font-medium text-green-400 uppercase tracking-wider",children:"工时类型"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1297,columnNumber:21},void 0),t.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-mono font-medium text-green-400 uppercase tracking-wider",children:"产品名称"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1298,columnNumber:21},void 0),t.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-mono font-medium text-green-400 uppercase tracking-wider",children:"产品工序"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1301,columnNumber:21},void 0),t.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-mono font-medium text-green-400 uppercase tracking-wider",children:"单价"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1304,columnNumber:21},void 0),t.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-mono font-medium text-green-400 uppercase tracking-wider",children:"生效年月"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1307,columnNumber:21},void 0),t.jsxDEV("th",{className:"px-4 py-3 text-left text-sm font-mono font-medium text-green-400 uppercase tracking-wider",children:"操作"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1310,columnNumber:21},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1287,columnNumber:19},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1286,columnNumber:17},void 0),t.jsxDEV("tbody",{className:"divide-y divide-green-800",children:Ge.map((e,m)=>t.jsxDEV("tr",{className:"hover:bg-green-900/10",children:[t.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsxDEV("span",{className:"text-sm font-mono text-green-300",children:We+m+1},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1319,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1318,columnNumber:23},void 0),t.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsxDEV("span",{className:"text-sm font-mono text-green-300",title:e.company_name,children:e.company_name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1324,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1323,columnNumber:23},void 0),t.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsxDEV("span",{className:"text-sm font-mono text-green-300",title:e.production_line,children:e.production_line},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1329,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1328,columnNumber:23},void 0),t.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsxDEV("span",{className:"text-sm font-mono text-green-300",title:e.production_category||"-",children:e.production_category||"-"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1334,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1333,columnNumber:23},void 0),t.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsxDEV("span",{className:"text-sm font-mono text-green-300",title:e.product_name,children:e.product_name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1339,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1338,columnNumber:23},void 0),t.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsxDEV("span",{className:"text-sm font-mono text-green-300",title:e.product_process||"-",children:e.product_process||"-"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1344,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1343,columnNumber:23},void 0),t.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsxDEV("span",{className:"text-sm font-mono ".concat(null==e.unit_price||void 0===e.unit_price?"text-red-400 font-bold":"text-green-300"),title:null!=e.unit_price?"¥".concat(e.unit_price.toFixed(3)):"未定价",children:null!=e.unit_price?"¥".concat(e.unit_price.toFixed(3)):"未定价"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1349,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1348,columnNumber:23},void 0),t.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsxDEV("span",{className:"text-sm font-mono text-green-300",title:e.effective_date,children:e.effective_date?e.effective_date.substring(0,7):""},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1354,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1353,columnNumber:23},void 0),t.jsxDEV("td",{className:"px-4 py-3 whitespace-nowrap",children:t.jsxDEV("div",{className:"flex justify-center space-x-1",children:[t.jsxDEV("button",{onClick:()=>(e=>{var t;U(e);let m="";m=e.effective_date?e.effective_date.includes("-")&&e.effective_date.length>=7?e.effective_date.substring(0,7):e.effective_date:(new Date).toISOString().slice(0,7),pe({company_id:e.company_id,production_line:e.production_line,production_category:e.production_category,product_name:e.product_name,product_process:e.product_process,unit_price:(null==(t=e.unit_price)?void 0:t.toString())||"",effective_date:m,work_time_type:e.production_category}),G(!0)})(e),className:"p-1 text-blue-400/60 hover:text-blue-400 hover:bg-blue-900/20 rounded transition-colors",title:"编辑工序",children:t.jsxDEV(l,{className:"w-3 h-3"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1365,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1360,columnNumber:27},void 0),t.jsxDEV("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),je(e),ve(!0)},className:"p-1 text-red-400/60 hover:text-red-400 hover:bg-red-900/20 rounded transition-colors",title:"删除工序",children:t.jsxDEV(u,{className:"w-3 h-3"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1377,columnNumber:29},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1367,columnNumber:27},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1359,columnNumber:25},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1358,columnNumber:23},void 0)]},e.id,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1317,columnNumber:21},void 0))},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1315,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1285,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1284,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1273,columnNumber:9},void 0),t.jsxDEV("div",{className:"mt-6 text-center text-green-400/60 text-sm",children:["共 ",Fe.length," 个工序",S&&" (从 ".concat(D.length," 个工序中筛选)"),Ee&&t.jsxDEV("span",{className:"ml-2 text-red-400 font-bold",children:"(显示未定价工序)"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1394,columnNumber:13},void 0),!Ee&&t.jsxDEV("span",{className:"ml-2 text-orange-400",children:["(未定价: ",D.filter(e=>null==e.unit_price||void 0===e.unit_price).length," 个)"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1399,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1390,columnNumber:9},void 0),qe>1&&t.jsxDEV("div",{className:"mt-6 flex flex-col sm:flex-row items-center justify-between gap-4",children:[t.jsxDEV("div",{className:"flex items-center gap-2 text-sm text-green-400",children:[t.jsxDEV("span",{children:"每页显示:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1410,columnNumber:15},void 0),t.jsxDEV("select",{value:we,onChange:e=>{ke(Number(e.target.value)),fe(1)},className:"bg-gray-800 border border-green-400/30 rounded px-2 py-1 text-green-400 focus:outline-none focus:border-green-400",children:[t.jsxDEV("option",{value:10,children:"10"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1419,columnNumber:17},void 0),t.jsxDEV("option",{value:20,children:"20"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1420,columnNumber:17},void 0),t.jsxDEV("option",{value:50,children:"50"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1421,columnNumber:17},void 0),t.jsxDEV("option",{value:100,children:"100"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1422,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1411,columnNumber:15},void 0),t.jsxDEV("span",{children:"条"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1424,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1409,columnNumber:13},void 0),t.jsxDEV("div",{className:"text-sm text-green-400/60",children:["显示第 ",We+1," - ",Math.min(Ae,Ie)," 条，共 ",Ie," 条"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1428,columnNumber:13},void 0),t.jsxDEV("div",{className:"flex items-center gap-2",children:[t.jsxDEV("button",{onClick:()=>fe(1),disabled:1===ye,className:"px-3 py-1 bg-gray-800 border border-green-400/30 rounded text-green-400 hover:bg-green-900/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"首页"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1434,columnNumber:15},void 0),t.jsxDEV("button",{onClick:()=>fe(e=>Math.max(1,e-1)),disabled:1===ye,className:"px-3 py-1 bg-gray-800 border border-green-400/30 rounded text-green-400 hover:bg-green-900/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"上一页"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1441,columnNumber:15},void 0),t.jsxDEV("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,qe)},(e,m)=>{let s;return s=qe<=5||ye<=3?m+1:ye>=qe-2?qe-4+m:ye-2+m,t.jsxDEV("button",{onClick:()=>fe(s),className:"px-3 py-1 border rounded transition-colors ".concat(ye===s?"bg-green-600 border-green-600 text-white":"bg-gray-800 border-green-400/30 text-green-400 hover:bg-green-900/20"),children:s},s,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1464,columnNumber:21},void 0)})},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1450,columnNumber:15},void 0),t.jsxDEV("button",{onClick:()=>fe(e=>Math.min(qe,e+1)),disabled:ye===qe,className:"px-3 py-1 bg-gray-800 border border-green-400/30 rounded text-green-400 hover:bg-green-900/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"下一页"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1479,columnNumber:15},void 0),t.jsxDEV("button",{onClick:()=>fe(qe),disabled:ye===qe,className:"px-3 py-1 bg-gray-800 border border-green-400/30 rounded text-green-400 hover:bg-green-900/20 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"末页"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1486,columnNumber:15},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1433,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1407,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:787,columnNumber:7},void 0),t.jsxDEV(x,{isOpen:xe,title:"确认删除",message:_e?'确定要删除工序"'.concat(_e.product_name,'"吗？\n\n此操作不可撤销！'):"",onConfirm:()=>{_e&&((async e=>{var t;if(!k)return b.error("用户未登录，请重新登录"),void j("/login");const m=D.find(t=>t.id===e);if(m)if(p(k.role)||m.company_id===(null==(t=k.company)?void 0:t.id))try{const{error:t}=await h.from("processes").update({is_active:!1}).eq("id",e);if(t)return void b.error("删除工序失败: ".concat(t.message));M(D.filter(t=>t.id!==e)),b.success("工序删除成功")}catch(s){b.error("删除工序失败")}else b.error("您只能删除自己公司的工序");else b.error("工序不存在")})(_e.id),ve(!1),je(null))},onCancel:()=>{ve(!1),je(null)},confirmText:"删除",cancelText:"取消",type:"danger"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1499,columnNumber:7},void 0),t.jsxDEV(v,{isOpen:De,onClose:()=>Me(!1),onImport:async e=>{var t,m;if(!k)return b.error("用户未登录，请重新登录"),void j("/login");let s=0,n=0;const r=[];try{for(let o=0;o<e.length;o++){const i=e[o];try{const e=null==(t=k.company)?void 0:t.id;if(!e){r.push("第 ".concat(o+1," 行: 无法获取用户公司信息")),n++;continue}if(!p(k.role)&&i.company_id!==e){r.push("第 ".concat(o+1," 行: 您只能导入自己公司的工序")),n++;continue}const{data:a,error:c}=await h.from("processes").insert({company_id:e,production_line:i.production_line,production_category:i.production_category,product_name:i.product_name,product_process:i.product_process,unit_price:i.unit_price,effective_date:i.effective_date?i.effective_date.match(/^\d{4}-\d{2}$/)?"".concat(i.effective_date,"-01"):i.effective_date:null,is_active:!0}).select("\n              *,\n              companies!inner(\n                name\n              )\n            ").single();if(c)r.push("第 ".concat(o+1," 行: ").concat(c.message)),n++;else{const e={...a,company_name:(null==(m=a.companies)?void 0:m.name)||"未知公司"};M(t=>[e,...t]),s++}}catch(a){r.push("第 ".concat(o+1," 行: ").concat(a.message||"未知错误")),n++}}s>0&&0===n?b.success("批量导入成功！共导入 ".concat(s," 条工序")):s>0&&n>0?b.warning("部分导入成功！成功 ".concat(s," 条，失败 ").concat(n," 条")):b.error("导入失败！共 ".concat(n," 条数据导入失败"))}catch(o){b.error("批量导入失败: ".concat(o.message||"未知错误"))}},companies:E,currentUser:k,existingProcesses:D},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:1520,columnNumber:7},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ProcessManagement.tsx",lineNumber:786,columnNumber:5},void 0)};export{w as default};
