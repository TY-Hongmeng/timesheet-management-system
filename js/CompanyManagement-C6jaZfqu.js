import{r as e,f as m,j as t,B as n,i as s,n as a,F as r,G as i,X as o,H as l,T as g,I as h,J as c,M as u}from"./react-vendor-DJh0NlN6.js";import{u as d,s as N}from"./index-DXRv2NX8.js";import{u as y,a as x,D as b,c as p,S as f,v,s as w,K as k,P as j,b as C,d as D,C as E}from"./dnd-DHlixQjt.js";import"./vendor-BiPrETSv.js";import"./supabase-BfQEXDvU.js";import"./ui-components-C7XcqZ4h.js";function M({company:e,index:m,onEdit:n,onDelete:s}){const{attributes:a,listeners:r,setNodeRef:i,transform:o,transition:l,isDragging:g}=D({id:e.id}),d={transform:E.Transform.toString(o),transition:l,opacity:g?.5:1};return t.jsxDEV("div",{ref:i,style:d,className:"px-6 py-4 hover:bg-green-900/10 transition-colors "+(g?"bg-gray-800/70 shadow-lg":""),children:t.jsxDEV("div",{className:"grid grid-cols-12 gap-4 items-center",children:[t.jsxDEV("div",{className:"col-span-1 flex items-center gap-2",children:[t.jsxDEV("div",{...a,...r,className:"cursor-grab active:cursor-grabbing text-green-400 hover:text-green-300 p-1",title:"拖拽排序",children:t.jsxDEV(c,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:69,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:63,columnNumber:11},this),t.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-lg",children:m+1},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:71,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:62,columnNumber:9},this),t.jsxDEV("div",{className:"col-span-6",children:t.jsxDEV("h3",{className:"text-green-400 font-bold font-mono text-lg",children:e.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:76,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:75,columnNumber:9},this),t.jsxDEV("div",{className:"col-span-3",children:t.jsxDEV("span",{className:"text-green-600 font-mono text-sm",children:new Date(e.created_at).toLocaleString()},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:81,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:80,columnNumber:9},this),t.jsxDEV("div",{className:"col-span-2",children:t.jsxDEV("div",{className:"flex gap-2",children:[t.jsxDEV("button",{onClick:()=>n(e),className:"text-green-400 hover:text-green-300 transition-colors p-1",title:"编辑",children:t.jsxDEV(u,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:92,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:87,columnNumber:13},this),t.jsxDEV("button",{onClick:()=>s(e),className:"text-red-400 hover:text-red-300 transition-colors p-1",title:"删除",children:t.jsxDEV(h,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:99,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:94,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:86,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:85,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:61,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:54,columnNumber:5},this)}function V(){const[c,u]=e.useState([]),[D,E]=e.useState(!0),[V,S]=e.useState(!1),[_,q]=e.useState(null),[I,z]=e.useState({name:""}),[G,T]=e.useState(!1),[$,B]=e.useState(!1),[F,H]=e.useState(null),[J,K]=e.useState(""),[L,O]=e.useState(""),{user:P,loading:R}=d(),A=m(),Q=y(x(j),x(k,{coordinateGetter:w}));if(e.useEffect(()=>{R||P||A("/login")},[P,R,A]),R)return t.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsxDEV("div",{className:"text-center",children:[t.jsxDEV("div",{className:"text-green-400 text-2xl font-mono mb-4",children:"加载中..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:147,columnNumber:11},this),t.jsxDEV("div",{className:"text-green-600 font-mono",children:"正在验证用户身份"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:148,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:146,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:145,columnNumber:7},this);e.useEffect(()=>{U()},[]);const U=async()=>{E(!0),K("");try{if(!P)return void K("用户未登录，请重新登录");const{data:e,error:m}=await N.from("companies").select("*").order("order_index",{ascending:!0});if(m)throw m;u(e||[])}catch(e){K("获取公司列表失败，请重试")}finally{E(!1)}},W=e=>{q(e),z({name:e.name}),S(!0)},X=e=>{H(e),B(!0)},Y=()=>{z({name:""}),q(null),S(!1),K("")};return D?t.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsxDEV("div",{className:"text-green-400 text-xl animate-pulse font-mono",children:"加载中..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:340,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:339,columnNumber:7},this):t.jsxDEV("div",{className:"min-h-screen bg-black text-green-300 p-6",children:t.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[t.jsxDEV("div",{className:"mb-8",children:[t.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[t.jsxDEV("div",{className:"flex items-center",children:[t.jsxDEV(n,{className:"w-8 h-8 text-green-400 mr-3"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:355,columnNumber:15},this),t.jsxDEV("h1",{className:"text-4xl font-bold text-green-400 font-mono",children:"公司管理"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:356,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:354,columnNumber:13},this),t.jsxDEV(s,{to:"/dashboard",className:"flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2 bg-gradient-to-r from-gray-700 to-gray-800 hover:from-gray-600 hover:to-gray-700 text-green-300 hover:text-green-200 rounded-lg font-mono transition-all duration-200 shadow-md hover:shadow-lg border border-gray-600 hover:border-green-500/50",children:[t.jsxDEV(a,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:362,columnNumber:15},this),t.jsxDEV("span",{className:"hidden sm:inline",children:"返回控制台"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:363,columnNumber:15},this),t.jsxDEV("span",{className:"sm:hidden",children:"返回"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:364,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:358,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:353,columnNumber:11},this),t.jsxDEV("div",{className:"h-1 bg-gradient-to-r from-transparent via-green-400 to-transparent"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:367,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:352,columnNumber:9},this),t.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[t.jsxDEV("div",{className:"flex-1",children:t.jsxDEV("div",{className:"relative",children:[t.jsxDEV(r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-green-400/60"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:374,columnNumber:15},this),t.jsxDEV("input",{type:"text",placeholder:"搜索公司名称...",className:"w-full bg-black border border-green-400/30 rounded px-10 py-2 text-green-400 placeholder-green-400/60 focus:outline-none focus:border-green-400"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:375,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:373,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:372,columnNumber:11},this),t.jsxDEV("button",{onClick:()=>S(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-black font-bold rounded transition-colors font-mono",children:[t.jsxDEV(i,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:386,columnNumber:13},this),"新增公司"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:382,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:371,columnNumber:9},this),J&&t.jsxDEV("div",{className:"mb-6 p-4 bg-red-900/50 border border-red-400 rounded text-red-300",children:J},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:392,columnNumber:11},this),V&&t.jsxDEV("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:t.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[t.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[t.jsxDEV("h2",{className:"text-2xl font-bold text-green-400 font-mono",children:_?"编辑公司":"新增公司"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:404,columnNumber:17},this),t.jsxDEV("button",{onClick:Y,className:"text-green-400 hover:text-green-300",children:t.jsxDEV(o,{className:"w-6 h-6"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:411,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:407,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:403,columnNumber:15},this),t.jsxDEV("form",{onSubmit:async e=>{e.preventDefault(),T(!0),K("");let m="";try{if(_){const{data:e,error:t}=await N.from("companies").update({name:I.name,updated_at:(new Date).toISOString()}).eq("id",_.id).select();if(t)throw new Error(t.message);if(!e||0===e.length)throw new Error("更新失败：权限不足或记录不存在");const n=e[0];u(e=>e.map(e=>e.id===n.id?n:e)),m=`公司 "${n.name}" 更新成功`}else{const{data:e,error:t}=await N.from("companies").insert([I]).select();if(t)throw new Error(t.message);const n=e[0];u(e=>[...e,n]),m=`公司 "${n.name}" 创建成功`}K(""),O(m),await U(),Y()}catch(t){K(t.message||"保存失败")}finally{T(!1)}},className:"space-y-4",children:[t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"公司名称 *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:417,columnNumber:19},this),t.jsxDEV("input",{type:"text",name:"name",value:I.name,onChange:e=>{z({...I,[e.target.name]:e.target.value})},required:!0,className:"w-full px-3 py-2 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",placeholder:"请输入公司名称"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:420,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:416,columnNumber:17},this),t.jsxDEV("div",{className:"flex gap-3 pt-4",children:[t.jsxDEV("button",{type:"submit",disabled:G,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 disabled:bg-green-800 text-black font-bold rounded transition-colors font-mono",children:[t.jsxDEV(l,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:439,columnNumber:21},this),G?"保存中...":"保存"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:434,columnNumber:19},this),t.jsxDEV("button",{type:"button",onClick:Y,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white font-bold rounded transition-colors font-mono",children:"取消"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:442,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:433,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:415,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:402,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:401,columnNumber:11},this),$&&F&&t.jsxDEV("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:t.jsxDEV("div",{className:"bg-gray-900 border border-red-400 rounded-lg p-6 w-full max-w-md",children:[t.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[t.jsxDEV(g,{className:"text-red-400 w-8 h-8"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:460,columnNumber:17},this),t.jsxDEV("h2",{className:"text-xl font-bold text-red-400 font-mono",children:"确认删除"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:461,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:459,columnNumber:15},this),t.jsxDEV("div",{className:"mb-6",children:[t.jsxDEV("p",{className:"text-green-300 font-mono mb-2",children:"您确定要删除以下公司吗？"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:467,columnNumber:17},this),t.jsxDEV("div",{className:"bg-black border border-green-400 rounded p-3 mb-3",children:t.jsxDEV("p",{className:"text-green-400 font-mono font-bold",children:F.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:471,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:470,columnNumber:17},this),t.jsxDEV("p",{className:"text-red-300 text-sm font-mono",children:"⚠️ 此操作不可恢复，请谨慎操作！"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:475,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:466,columnNumber:15},this),t.jsxDEV("div",{className:"flex gap-3",children:[t.jsxDEV("button",{onClick:async()=>{if(F)try{const{error:e}=await N.from("companies").delete().eq("id",F.id);if(e)throw e;await U(),B(!1),H(null)}catch(e){K(e.message||"删除失败")}},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-500 text-white font-bold rounded transition-colors font-mono",children:[t.jsxDEV(h,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:485,columnNumber:19},this),"确认删除"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:481,columnNumber:17},this),t.jsxDEV("button",{onClick:()=>{B(!1),H(null)},className:"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white font-bold rounded transition-colors font-mono",children:"取消"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:488,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:480,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:458,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:457,columnNumber:11},this),t.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg overflow-hidden",children:[t.jsxDEV("div",{className:"bg-green-900/30 border-b border-green-400 px-6 py-4",children:t.jsxDEV("div",{className:"grid grid-cols-12 gap-4 items-center",children:[t.jsxDEV("div",{className:"col-span-1",children:t.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"排序"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:505,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:504,columnNumber:15},this),t.jsxDEV("div",{className:"col-span-6",children:t.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"公司名称"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:508,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:507,columnNumber:15},this),t.jsxDEV("div",{className:"col-span-3",children:t.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"创建时间"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:511,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:510,columnNumber:15},this),t.jsxDEV("div",{className:"col-span-2",children:t.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"操作"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:514,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:513,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:503,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:502,columnNumber:11},this),t.jsxDEV(b,{sensors:Q,collisionDetection:p,onDragEnd:async e=>{const{active:m,over:t}=e;if(m.id!==(null==t?void 0:t.id)){const e=c.findIndex(e=>e.id===m.id),s=c.findIndex(e=>e.id===(null==t?void 0:t.id)),a=C(c,e,s);u(a);try{const e=a.map((e,m)=>({id:e.id,order_index:m+1}));for(const m of e)await N.from("companies").update({order_index:m.order_index}).eq("id",m.id)}catch(n){await U()}}},children:t.jsxDEV(f,{items:c.map(e=>e.id),strategy:v,children:t.jsxDEV("div",{className:"divide-y divide-green-800",children:c.map((e,m)=>t.jsxDEV(M,{company:e,index:m,onEdit:W,onDelete:X},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:531,columnNumber:19},this))},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:529,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:525,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:520,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:500,columnNumber:9},this),0===c.length&&t.jsxDEV("div",{className:"text-center py-12",children:[t.jsxDEV(n,{className:"w-16 h-16 text-green-600 mx-auto mb-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:546,columnNumber:13},this),t.jsxDEV("p",{className:"text-green-400 text-lg font-mono",children:"暂无公司数据"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:547,columnNumber:13},this),t.jsxDEV("p",{className:"text-green-600 text-sm font-mono mt-2",children:"点击上方按钮添加第一家公司"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:550,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:545,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:349,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:348,columnNumber:5},this)}export{V as default};
