const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/Dashboard-n-JmLGG0.js","js/react-CJFYUZ2-.js","js/dnd-BA7dvD9a.js","js/react-dom-CF0h6VJ-.js","js/vendor-BGL5XM0N.js","js/supabase-BCgBSYV2.js","js/toast-FCEag1yS.js","js/TimesheetRecord-RML7WTEG.js","js/TimesheetHistory-CT4dk9Oy.js","js/MobileDiagnostic-oUw_0MEv.js","js/CompanyManagement-QuBWo9_n.js","js/UserManagement-bp0oS8qZ.js","js/ProcessManagement-C77ro2fr.js","js/excel-ChPHbVhZ.js","js/RoleList-CpUxXKTV.js","js/RoleEdit-DHr_0zZ-.js","js/RoleCreate-TXZVMIWk.js","js/SupervisorApproval-BP6yzL0B.js","js/SectionChiefApproval-fQQ0w-_U.js","js/Reports-xX6-ZHga.js","js/History-u-OWY0xH.js","js/ToastTest-C5D1ucP5.js","js/MobileErrorPage-Rl0LEM0p.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,s)=>((t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s)(t,"symbol"!=typeof n?n+"":n,s);import{u as n,N as s,a as i,L as r,_ as o,B as m,b as a,c}from"./vendor-BGL5XM0N.js";import{r as l,j as h,W as u,b as d,d as g,P as p,L as y,E as b,e as f,X as N,U as w,C as x,f as v,h as E,A as k,i as D,B as C,S,k as j}from"./react-CJFYUZ2-.js";import{c as R}from"./react-dom-CF0h6VJ-.js";import{c as V}from"./supabase-BCgBSYV2.js";import{T as A}from"./toast-FCEag1yS.js";const P=V("https://agesdprmugyybtqrvqks.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFnZXNkcHJtdWd5eWJ0cXJ2cWtzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxNDY0OTIsImV4cCI6MjA3MDcyMjQ5Mn0.bfo_xb818yMd7-u6cJhDoJrqmDwcGY1nBDJIesFSfWk",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"X-Client-Info":"supabase-js-web-mobile-safari-optimized"},fetch:async(e,t)=>{try{const n=new AbortController,s=setTimeout(()=>n.abort(),1e4),i=await fetch(e,{...t,signal:n.signal});return clearTimeout(s),i}catch(n){throw n}}},db:{schema:"public"},realtime:{params:{eventsPerSecond:3}}});const I={USER_READ:"user:read",USER_MANAGE:"user:manage",USER_CREATE:"user:create",USER_DELETE:"user:delete",COMPANY_READ:"company:read",COMPANY_MANAGE:"company:manage",COMPANY_CREATE:"company:create",COMPANY_DELETE:"company:delete",PROCESS_READ:"process:read",PROCESS_MANAGE:"process:manage",PROCESS_CREATE:"process:create",PROCESS_DELETE:"process:delete",ROLE_MANAGE:"role:manage",SYSTEM_CONFIG:"system:config",TIME_RECORD:"time_record",REPORTS:"reports",HISTORY:"history",PROCESS_MANAGEMENT:"process_management",USER_MANAGEMENT:"user_management",COMPANY_MANAGEMENT:"company_management",SUPERVISOR_REVIEW:"supervisor_review",MANAGER_REVIEW:"manager_review",PERMISSION_MANAGEMENT:"permission_management"},L="è¶…çº§ç®¡ç†å‘˜",_=[{id:"time_record",name:"è®°å½•å·¥æ—¶",description:"è®°å½•å’Œç®¡ç†å·¥ä½œæ—¶é—´",icon:"Clock",path:"/timesheet-record",permission:I.TIME_RECORD,color:"from-green-400 to-green-600"},{id:"reports",name:"æŸ¥çœ‹æŠ¥è¡¨",description:"æŸ¥çœ‹å·¥æ—¶ç»Ÿè®¡å’Œåˆ†ææŠ¥è¡¨",icon:"BarChart3",path:"/reports",permission:I.REPORTS,color:"from-blue-400 to-blue-600"},{id:"history",name:"å†å²è®°å½•",description:"æŸ¥çœ‹ä¸ªäººå·¥æ—¶å†å²è®°å½•",icon:"Activity",path:"/history",permission:I.HISTORY,color:"from-cyan-400 to-cyan-600"},{id:"process_management",name:"å·¥åºç®¡ç†",description:"ç®¡ç†ç”Ÿäº§å·¥åºå’Œæµç¨‹",icon:"Settings",path:"/process-management",permission:I.PROCESS_MANAGEMENT,color:"from-purple-400 to-purple-600"},{id:"user_management",name:"ç”¨æˆ·ç®¡ç†",description:"ç®¡ç†ç³»ç»Ÿç”¨æˆ·å’Œæƒé™",icon:"Users",path:"/user-management",permission:I.USER_MANAGEMENT,color:"from-orange-400 to-orange-600"},{id:"company_management",name:"å…¬å¸ç®¡ç†",description:"ç®¡ç†å…¬å¸ä¿¡æ¯å’Œéƒ¨é—¨",icon:"Building2",path:"/company-management",permission:I.COMPANY_MANAGEMENT,color:"from-teal-400 to-teal-600"},{id:"supervisor_review",name:"ç­é•¿å®¡æ ¸",description:"ç­é•¿å®¡æ ¸å·¥æ—¶è®°å½•",icon:"CheckCircle",path:"/supervisor-approval",permission:I.SUPERVISOR_REVIEW,color:"from-indigo-400 to-indigo-600"},{id:"section_chief_review",name:"æ®µé•¿å®¡æ ¸",description:"æ®µé•¿å®¡æ ¸å·¥æ—¶è®°å½•",icon:"Shield",path:"/section-chief-approval",permission:I.MANAGER_REVIEW,color:"from-pink-400 to-pink-600"},{id:"permission_management",name:"æƒé™ç®¡ç†",description:"ç®¡ç†ç”¨æˆ·è§’è‰²å’Œæƒé™",icon:"Key",path:"/role-permissions",permission:I.PERMISSION_MANAGEMENT,color:"from-red-400 to-red-600"}];async function T(e,t){try{return(await z(e)).includes(t)}catch(n){return!1}}let O=null;const M=6e5;async function z(e){try{if(O&&O.userId===e&&Date.now()-O.timestamp<M)return O.permissions;const{data:t,error:n}=await async function(e){try{return await async function(e,t=3,n=1e3){let s;for(let r=1;r<=t;r++)try{return await e()}catch(i){if(s=i,r===t)break;const e=n*Math.pow(2,r-1);await new Promise(t=>setTimeout(t,e))}throw s}(e,2,500)}catch(t){return{data:null,error:{message:"ç½‘ç»œè¿æ¥å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®æˆ–ç¨åé‡è¯•",code:"NETWORK_ERROR",details:t}}}}(async()=>await P.from("users").select("\n          id,\n          role_id,\n          user_roles (\n            id,\n            name,\n            permissions\n          )\n        ").eq("id",e).single());if(n||!t)return[];let s=[];return t.user_roles&&W(t.user_roles.name)?s=B():t.user_roles&&t.user_roles.permissions&&(s=t.user_roles.permissions),O={permissions:s,timestamp:Date.now(),userId:e},s}catch(t){return[]}}function H(e){return _.filter(t=>e.includes(t.permission))}function W(e){return"object"==typeof e&&null!==e?"è¶…çº§ç®¡ç†å‘˜"===e.name:"è¶…çº§ç®¡ç†å‘˜"===e}function F(){return _}const q=(e,t)=>{if(!e)return!1;if(W(e.role||e.user_roles))return!0;const n=e.role||e.user_roles;return!(!n||!n.permissions)&&n.permissions.includes(t)},B=()=>Object.values(I),Q=l.createContext(void 0);function G({children:e}){const[t,n]=l.useState(null),[s,i]=l.useState(!0);l.useEffect(()=>{(async()=>{try{const t=localStorage.getItem("auth_user"),s=localStorage.getItem("last_login_time");if(t&&s){const r=JSON.parse(t),o=parseInt(s),m=Date.now();if(m-o>864e5)return localStorage.removeItem("auth_user"),localStorage.removeItem("last_login_time"),n(null),void i(!1);if(!navigator.onLine)return n(r),void i(!1);try{const{data:e,error:t}=await Promise.race([P.from("users").select("\n                  *,\n                  company:companies(*),\n                  role:user_roles(*)\n                ").eq("id",r.id).eq("is_active",!0).single(),new Promise((e,t)=>setTimeout(()=>t(new Error("éªŒè¯è¶…æ—¶")),8e3))]);if(e&&!t){const t=await z(e.id),s={id:e.id,phone:e.phone,name:e.name,id_card:e.id_card,company:e.company,role:e.role,department_id:e.department_id,is_active:e.is_active,permissions:t};n(s),localStorage.setItem("auth_user",JSON.stringify(s)),localStorage.setItem("last_login_time",m.toString())}else localStorage.removeItem("auth_user"),localStorage.removeItem("last_login_time"),n(null)}catch(e){n(r)}}else n(null)}catch(t){localStorage.removeItem("auth_user"),localStorage.removeItem("last_login_time"),n(null)}finally{i(!1)}})();const e=setInterval(()=>{const e=localStorage.getItem("last_login_time");if(e){const t=parseInt(e);Date.now()-t>864e5&&(localStorage.removeItem("auth_user"),localStorage.removeItem("last_login_time"),n(null),window.location.href="/login")}},6e4),{data:{subscription:t}}=P.auth.onAuthStateChange(async(e,t)=>{"SIGNED_OUT"===e&&(n(null),localStorage.removeItem("auth_user"),localStorage.removeItem("last_login_time"))});return()=>{t.unsubscribe(),clearInterval(e)}},[]);const r=async(e,t,s=0)=>{var i,o,m,a,c,l,h,u;try{if(!navigator.onLine)return{success:!1,error:"ç½‘ç»œè¿æ¥å·²æ–­å¼€ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•"};const{data:s,error:i}=await Promise.race([P.from("users").select("\n            *,\n            company:companies(*),\n            role:user_roles(*)\n          ").eq("phone",e).eq("is_active",!0).single(),new Promise((e,t)=>setTimeout(()=>t(new Error("è¯·æ±‚è¶…æ—¶")),1e4))]);if(i){if("PGRST116"===i.code)return{success:!1,error:"ç”¨æˆ·ä¸å­˜åœ¨æˆ–å·²è¢«ç¦ç”¨"};throw i}if(!s)return{success:!1,error:"ç”¨æˆ·ä¸å­˜åœ¨æˆ–å·²è¢«ç¦ç”¨"};if(s.password_hash!==t)return{success:!1,error:"å¯†ç é”™è¯¯"};let r=[];s.role&&"è¶…çº§ç®¡ç†å‘˜"===s.role.name?r=Object.values(I):setTimeout(async()=>{try{const e=await z(s.id),t=JSON.parse(localStorage.getItem("auth_user")||"{}");t.id===s.id&&(t.permissions=e,localStorage.setItem("auth_user",JSON.stringify(t)),n(t))}catch(e){}},100);const o={id:s.id,phone:s.phone,name:s.name,id_card:s.id_card,company:s.company,role:s.role,department_id:s.department_id,is_active:s.is_active,permissions:r};return n(o),localStorage.setItem("auth_user",JSON.stringify(o)),localStorage.setItem("last_login_time",Date.now().toString()),{success:!0}}catch(d){const n=(null==(i=d.message)?void 0:i.includes("fetch"))||(null==(o=d.message)?void 0:o.includes("network"))||(null==(m=d.message)?void 0:m.includes("CONNECTION_CLOSED"))||(null==(a=d.message)?void 0:a.includes("ERR_NETWORK_CHANGED"))||(null==(c=d.message)?void 0:c.includes("ERR_ABORTED"))||(null==(l=d.message)?void 0:l.includes("ERR_CONNECTION_CLOSED"))||(null==(h=d.message)?void 0:h.includes("è¯·æ±‚è¶…æ—¶"))||(null==(u=d.message)?void 0:u.includes("Failed to fetch"))||"NETWORK_ERROR"===d.code||"TypeError"===d.name||!navigator.onLine;return s<5&&n?(await new Promise(e=>setTimeout(e,1e3*Math.pow(2,s))),r(e,t,s+1)):n?{success:!1,error:"ç½‘ç»œè¿æ¥ä¸ç¨³å®šï¼Œå·²é‡è¯•".concat(s,"æ¬¡ï¼Œè¯·æ£€æŸ¥ç½‘ç»œåé‡è¯•")}:{success:!1,error:d.message||"ç™»å½•å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"}}},o={user:t,loading:s,login:r,register:async e=>{try{const{data:t,error:n}=await P.from("users").select("id").eq("id_card",e.id_card).maybeSingle();if(n&&"PGRST116"!==n.code)return{success:!1,error:"ç³»ç»Ÿé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"};const{data:s,error:i}=await P.from("users").select("id").eq("phone",e.phone).maybeSingle();if(i&&"PGRST116"!==i.code)return{success:!1,error:"ç³»ç»Ÿé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"};if(t||s){if(t)return{success:!1,error:"è¯¥èº«ä»½è¯å·å·²è¢«æ³¨å†Œ"};if(s)return{success:!1,error:"è¯¥æ‰‹æœºå·å·²è¢«æ³¨å†Œ"}}const r=crypto.randomUUID(),{error:o}=await P.from("users").insert({id:r,phone:e.phone,id_card:e.id_card,name:e.name,company_id:e.company_id,role_id:e.role_id,password_hash:e.password,production_line:e.production_line,is_active:!1});if(o)return{success:!1,error:"ç”¨æˆ·ä¿¡æ¯åˆ›å»ºå¤±è´¥"};const{data:m}=await P.from("users").select("\n          *,\n          company:companies(*),\n          role:user_roles(*)\n        ").eq("id",r).single();return{success:!0}}catch(t){return{success:!1,error:t.message||"æ³¨å†Œå¤±è´¥ï¼Œè¯·é‡è¯•"}}},logout:async()=>{try{n(null),localStorage.removeItem("auth_user"),localStorage.removeItem("last_login_time")}catch(e){n(null),localStorage.removeItem("auth_user"),localStorage.removeItem("last_login_time")}},resetPassword:async(e,t)=>{var n;try{const{data:n,error:s}=await Promise.race([P.from("users").select("id, phone, name").eq("id_card",e).eq("is_active",!0).single(),new Promise((e,t)=>setTimeout(()=>t(new Error("æŸ¥è¯¢è¶…æ—¶")),8e3))]);if(s)return"PGRST116"===s.code?{success:!1,error:"æœªæ‰¾åˆ°è¯¥èº«ä»½è¯å·å¯¹åº”çš„ç”¨æˆ·"}:{success:!1,error:"æŸ¥è¯¢ç”¨æˆ·å¤±è´¥ï¼Œè¯·é‡è¯•"};if(!n)return{success:!1,error:"æœªæ‰¾åˆ°è¯¥èº«ä»½è¯å·å¯¹åº”çš„ç”¨æˆ·"};if(!t)return{success:!0,user:{id:n.id,phone:n.phone,name:n.name}};const{error:i}=await Promise.race([P.from("users").update({password_hash:t}).eq("id",n.id),new Promise((e,t)=>setTimeout(()=>t(new Error("æ›´æ–°è¶…æ—¶")),8e3))]);return i?{success:!1,error:"å¯†ç é‡ç½®å¤±è´¥ï¼Œè¯·é‡è¯•"}:{success:!0}}catch(s){return(null==(n=s.message)?void 0:n.includes("è¶…æ—¶"))?{success:!1,error:"ç½‘ç»œè¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥åé‡è¯•"}:{success:!1,error:s.message||"å¯†ç é‡ç½®å¤±è´¥"}}},refreshUser:async()=>{if(null==t?void 0:t.id)try{const{data:e,error:s}=await P.from("users").select("\n          *,\n          company:companies(*),\n          role:user_roles(*)\n        ").eq("id",t.id).eq("is_active",!0).single();if(e&&!s){const t=await z(e.id),s={id:e.id,phone:e.phone,name:e.name,id_card:e.id_card,company:e.company,role:e.role,department_id:e.department_id,is_active:e.is_active,permissions:t};n(s),localStorage.setItem("auth_user",JSON.stringify(s))}}catch(e){}},isAuthenticated:()=>!!(t&&t.id&&t.is_active)};return h.jsxDEV(Q.Provider,{value:o,children:e},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/contexts/AuthContext.tsx",lineNumber:498,columnNumber:10},this)}function U(){const e=l.useContext(Q);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}function Z({children:e,requireAuth:t=!0}){const{user:i,loading:r,isAuthenticated:o}=U(),m=n();return r?h.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:h.jsxDEV("div",{className:"text-green-400 text-xl animate-pulse font-mono",children:"åŠ è½½ä¸­..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/ProtectedRoute.tsx",lineNumber:17,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/ProtectedRoute.tsx",lineNumber:16,columnNumber:7},this):t&&!o()?h.jsxDEV(s,{to:"/login",state:{from:m},replace:!0},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/ProtectedRoute.tsx",lineNumber:26,columnNumber:12},this):!t&&o()?h.jsxDEV(s,{to:"/dashboard",replace:!0},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/ProtectedRoute.tsx",lineNumber:31,columnNumber:12},this):h.jsxDEV(h.Fragment,{children:e},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/ProtectedRoute.tsx",lineNumber:34,columnNumber:10},this)}function J({children:e,allowedRoles:t,fallbackPath:i="/dashboard"}){var r;const{user:o,loading:m}=U(),a=n();if(m)return h.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:h.jsxDEV("div",{className:"text-green-400 text-xl animate-pulse font-mono",children:"åŠ è½½ä¸­..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:22,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:21,columnNumber:7},this);if(!o)return h.jsxDEV(s,{to:"/login",state:{from:a},replace:!0},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:31,columnNumber:12},this);const c=null==(r=o.role)?void 0:r.name;return t.some(e=>c===e||(null==c?void 0:c.toLowerCase())===e.toLowerCase())?h.jsxDEV(h.Fragment,{children:e},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:70,columnNumber:10},this):h.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:h.jsxDEV("div",{className:"text-center",children:[h.jsxDEV("div",{className:"text-red-400 text-6xl mb-4",children:"ğŸš«"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:54,columnNumber:11},this),h.jsxDEV("h1",{className:"text-2xl font-bold text-red-400 mb-2 font-mono",children:"è®¿é—®è¢«æ‹’ç»"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:55,columnNumber:11},this),h.jsxDEV("p",{className:"text-green-300 mb-6 font-mono",children:["æ‚¨æ²¡æœ‰æƒé™è®¿é—®æ­¤é¡µé¢ã€‚éœ€è¦è§’è‰²: ",t.join(", ")]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:56,columnNumber:11},this),h.jsxDEV("button",{onClick:()=>window.history.back(),className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-black font-bold rounded font-mono transition-colors",children:"è¿”å›ä¸Šä¸€é¡µ"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:59,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:53,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:52,columnNumber:7},this)}function Y({onRetry:e,showRetryButton:t=!1}){const[n,s]=l.useState(navigator.onLine),[i,r]=l.useState("unknown"),[o,m]=l.useState(!1);return l.useEffect(()=>{const e=()=>{s(!0),m(!0),setTimeout(()=>m(!1),3e3)},t=()=>{s(!1),m(!0)},n=()=>{if("connection"in navigator){const e=navigator.connection;e&&r(e.effectiveType||"unknown")}};if(window.addEventListener("online",e),window.addEventListener("offline",t),"connection"in navigator){const e=navigator.connection;e&&(e.addEventListener("change",n),n())}return()=>{if(window.removeEventListener("online",e),window.removeEventListener("offline",t),"connection"in navigator){const e=navigator.connection;e&&e.removeEventListener("change",n)}}},[]),!o&&n?null:h.jsxDEV("div",{className:"fixed top-4 right-4 z-50 transition-all duration-300 ".concat(o?"translate-y-0 opacity-100":"translate-y-[-100px] opacity-0"),children:h.jsxDEV("div",{className:"rounded-lg shadow-lg p-4 max-w-sm ".concat(n?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"),children:h.jsxDEV("div",{className:"flex items-center space-x-3",children:[h.jsxDEV("div",{className:"flex-shrink-0",children:n?h.jsxDEV(u,{className:"w-5 h-5 text-green-600"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:75,columnNumber:15},this):h.jsxDEV(d,{className:"w-5 h-5 text-red-600"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:77,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:73,columnNumber:11},this),h.jsxDEV("div",{className:"flex-1",children:[h.jsxDEV("p",{className:"text-sm font-medium",children:n?"ç½‘ç»œå·²è¿æ¥":"ç½‘ç»œè¿æ¥æ–­å¼€"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:81,columnNumber:13},this),n&&"unknown"!==i&&h.jsxDEV("p",{className:"text-xs opacity-75",children:["è¿æ¥ç±»å‹: ",i]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:85,columnNumber:15},this),!n&&h.jsxDEV("p",{className:"text-xs opacity-75",children:"è¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:90,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:80,columnNumber:11},this),!n&&t&&e&&h.jsxDEV("button",{onClick:e,className:"flex-shrink-0 p-1 rounded-full hover:bg-red-100 transition-colors",title:"é‡è¯•è¿æ¥",children:h.jsxDEV(g,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:101,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:96,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:72,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:67,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:64,columnNumber:5},this)}const K=({onNetworkChange:e})=>{const[t,n]=l.useState(navigator.onLine),[s,i]=l.useState(!1),[r,o]=l.useState(null);return l.useEffect(()=>{const t=()=>{n(!0),r&&(i(!0),setTimeout(()=>i(!1),3e3)),null==e||e(!0)},s=()=>{n(!1),o(new Date),i(!0),null==e||e(!1)};return window.addEventListener("online",t),window.addEventListener("offline",s),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}},[e,r]),t&&!s?null:h.jsxDEV("div",{style:{position:"fixed",top:0,left:0,right:0,zIndex:9999,padding:"8px 16px",backgroundColor:t?"#4CAF50":"#f44336",color:"white",textAlign:"center",fontSize:"14px",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transform:s?"translateY(0)":"translateY(-100%)",transition:"transform 0.3s ease-in-out"},children:t?h.jsxDEV("span",{children:"âœ… ç½‘ç»œè¿æ¥å·²æ¢å¤"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatusMonitor.tsx",lineNumber:67,columnNumber:9},void 0):h.jsxDEV("span",{children:"âŒ ç½‘ç»œè¿æ¥å·²æ–­å¼€ - è¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatusMonitor.tsx",lineNumber:69,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatusMonitor.tsx",lineNumber:48,columnNumber:5},void 0)};function X({message:e="æ­£åœ¨åŠ è½½...",showRetry:t=!1,onRetry:n}){const[s,i]=l.useState(e),[r,o]=l.useState(t),[m,a]=l.useState(!1),[c,p]=l.useState(0);return l.useEffect(()=>{const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;e&&a(["slow-2g","2g","3g"].includes(e.effectiveType));const t=setInterval(()=>{p(e=>e>=90?e:e+10*Math.random())},500),n=setTimeout(()=>{i("åŠ è½½æ—¶é—´è¾ƒé•¿ï¼Œè¯·ç¨å€™..."),p(60)},3e3),s=setTimeout(()=>{i("ç½‘ç»œè¾ƒæ…¢ï¼Œæ­£åœ¨åŠªåŠ›åŠ è½½..."),p(80)},8e3),r=setTimeout(()=>{o(!0),i("åŠ è½½è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥"),p(90)},15e3);return()=>{clearInterval(t),clearTimeout(n),clearTimeout(s),clearTimeout(r)}},[]),h.jsxDEV("div",{className:"fixed inset-0 bg-white z-50 flex flex-col items-center justify-center px-4",children:[h.jsxDEV("div",{className:"text-center max-w-sm w-full",children:[h.jsxDEV("div",{className:"relative mb-8",children:[h.jsxDEV("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mx-auto"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:78,columnNumber:11},this),m&&h.jsxDEV("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-orange-500 rounded-full flex items-center justify-center",children:h.jsxDEV(d,{className:"w-3 h-3 text-white"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:81,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:80,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:77,columnNumber:9},this),h.jsxDEV("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"å·¥æ—¶ç®¡ç†ç³»ç»Ÿ"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:87,columnNumber:9},this),h.jsxDEV("p",{className:"text-gray-600 mb-6 text-base",children:s},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:88,columnNumber:9},this),h.jsxDEV("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-6",children:h.jsxDEV("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(c,"%")}},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:92,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:91,columnNumber:9},this),m&&h.jsxDEV("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 mb-4",children:h.jsxDEV("div",{className:"flex items-center space-x-2",children:[h.jsxDEV(d,{className:"w-4 h-4 text-orange-600"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:102,columnNumber:15},this),h.jsxDEV("p",{className:"text-orange-700 text-sm",children:"æ£€æµ‹åˆ°ç½‘ç»œè¿æ¥è¾ƒæ…¢ï¼ŒåŠ è½½å¯èƒ½éœ€è¦æ›´é•¿æ—¶é—´"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:103,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:101,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:100,columnNumber:11},this),r&&h.jsxDEV("div",{className:"space-y-4",children:[h.jsxDEV("button",{onClick:()=>{n?n():window.location.reload()},className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[h.jsxDEV(g,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:117,columnNumber:15},this),h.jsxDEV("span",{children:"é‡æ–°åŠ è½½"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:118,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:113,columnNumber:13},this),h.jsxDEV("p",{className:"text-gray-500 text-sm",children:"å¦‚æœé—®é¢˜æŒç»­å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åå†è¯•"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:120,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:112,columnNumber:11},this),!r&&h.jsxDEV("div",{className:"space-y-2",children:[h.jsxDEV("div",{className:"flex items-center justify-center space-x-2 text-gray-500 text-sm",children:[h.jsxDEV(u,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:130,columnNumber:15},this),h.jsxDEV("span",{children:"æ­£åœ¨ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:131,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:129,columnNumber:13},this),m&&h.jsxDEV("p",{className:"text-xs text-gray-400",children:"ä¸ºäº†æ›´å¥½çš„ä½“éªŒï¼Œæˆ‘ä»¬æ­£åœ¨å‹ç¼©æ•°æ®ä¼ è¾“"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:134,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:128,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:75,columnNumber:7},this),h.jsxDEV("div",{className:"absolute bottom-8 left-4 right-4 text-center",children:h.jsxDEV("p",{className:"text-xs text-gray-400",children:"é¦–æ¬¡åŠ è½½å¯èƒ½éœ€è¦è¾ƒé•¿æ—¶é—´ï¼Œåç»­è®¿é—®ä¼šæ›´å¿«"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:144,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:143,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:73,columnNumber:5},this)}const $=Object.freeze(Object.defineProperty({__proto__:null,default:X},Symbol.toStringTag,{value:"Module"}));function ee(){var e,t;const[s,o]=l.useState({phone:"",password:""}),[m,a]=l.useState(!1),[c,u]=l.useState(!1),[d,g]=l.useState(""),[x,v]=l.useState(!1),[E,k]=l.useState(!1),[D,C]=l.useState([]),{login:S}=U(),j=i(),R=(null==(t=null==(e=n().state)?void 0:e.from)?void 0:t.pathname)||"/dashboard",V=e=>{try{return atob(e)}catch(t){return""}};l.useEffect(()=>{const e=localStorage.getItem("savedUsers"),t=localStorage.getItem("savedCredentials");if(e){const t=JSON.parse(e);C(t),t.length>0&&(o(e=>({...e,phone:t[0].phone})),v(!0))}if(t)try{const e=JSON.parse(t);e.phone&&e.password&&(o({phone:e.phone,password:V(e.password)}),k(!0),v(!0))}catch(n){}},[]);const A=e=>{o({...s,[e.target.name]:e.target.value})};return h.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center px-4",children:h.jsxDEV("div",{className:"max-w-md w-full space-y-8",children:[h.jsxDEV("div",{className:"text-center",children:[h.jsxDEV("div",{className:"flex items-center justify-center mb-2",children:[h.jsxDEV("svg",{className:"w-16 h-16 mr-4",viewBox:"0 0 80 80",xmlns:"http://www.w3.org/2000/svg",children:[h.jsxDEV("ellipse",{cx:"40",cy:"40",rx:"38",ry:"30",fill:"black",stroke:"#22c55e",strokeWidth:"3"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:163,columnNumber:15},this),h.jsxDEV("text",{x:"40",y:"50",textAnchor:"middle",fill:"#22c55e",fontSize:"28",fontWeight:"bold",fontFamily:"Arial, sans-serif",children:"JT"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:164,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:162,columnNumber:13},this),h.jsxDEV("h1",{className:"text-4xl font-bold text-green-400 font-mono",children:"å·¥æ—¶ç®¡ç†ç³»ç»Ÿ"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:166,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:161,columnNumber:11},this),h.jsxDEV("div",{className:"mt-4 h-1 bg-gradient-to-r from-transparent via-green-400 to-transparent"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:170,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:160,columnNumber:9},this),h.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-8 shadow-lg shadow-green-400/20",children:[h.jsxDEV("h2",{className:"text-2xl font-bold text-green-400 mb-6 text-center font-mono",children:"ç”¨æˆ·ç™»å½•"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:175,columnNumber:11},this),d&&h.jsxDEV("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-400 rounded text-red-300 text-sm",children:d},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:180,columnNumber:13},this),h.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),u(!0),g(""),!s.phone||!s.password)return g("è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µ"),void u(!1);const t=await S(s.phone,s.password);if(t.success){if(x){const e=JSON.parse(localStorage.getItem("savedUsers")||"[]");if(e.find(e=>e.phone===s.phone)){const t=e.filter(e=>e.phone!==s.phone),n=[{phone:s.phone},...t];localStorage.setItem("savedUsers",JSON.stringify(n))}else{const t=[{phone:s.phone},...e.slice(0,4)];localStorage.setItem("savedUsers",JSON.stringify(t))}}if(E){const e={phone:s.phone,password:(n=s.password,btoa(n))};localStorage.setItem("savedCredentials",JSON.stringify(e))}else localStorage.removeItem("savedCredentials");j(R,{replace:!0})}else g(t.error||"ç™»å½•å¤±è´¥");var n;u(!1)},className:"space-y-6",children:[h.jsxDEV("div",{children:[h.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-2",children:"æ‰‹æœºå·ç "},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:188,columnNumber:15},this),h.jsxDEV("div",{className:"relative",children:[h.jsxDEV(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:192,columnNumber:17},this),h.jsxDEV("input",{type:"tel",name:"phone",value:s.phone,onChange:A,className:"w-full pl-12 pr-4 py-3 bg-black border border-green-400 rounded-lg text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono",placeholder:"è¯·è¾“å…¥æ‰‹æœºå·ç ",maxLength:11},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:193,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:191,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:187,columnNumber:13},this),h.jsxDEV("div",{children:[h.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-2",children:"ç™»å½•å¯†ç "},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:207,columnNumber:15},this),h.jsxDEV("div",{className:"relative",children:[h.jsxDEV(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:211,columnNumber:17},this),h.jsxDEV("input",{type:m?"text":"password",name:"password",value:s.password,onChange:A,className:"w-full pl-12 pr-12 py-3 bg-black border border-green-400 rounded-lg text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono",placeholder:"è¯·è¾“å…¥å¯†ç "},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:212,columnNumber:17},this),h.jsxDEV("button",{type:"button",onClick:()=>a(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-400 hover:text-green-300",children:m?h.jsxDEV(b,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:225,columnNumber:35},this):h.jsxDEV(f,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:225,columnNumber:68},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:220,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:210,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:206,columnNumber:13},this),h.jsxDEV("div",{className:"space-y-3",children:[h.jsxDEV("div",{className:"flex items-center",children:[h.jsxDEV("input",{type:"checkbox",id:"rememberMe",checked:x,onChange:e=>v(e.target.checked),className:"w-4 h-4 text-green-600 bg-black border-green-400 rounded focus:ring-green-500 focus:ring-2"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:233,columnNumber:17},this),h.jsxDEV("label",{htmlFor:"rememberMe",className:"ml-2 text-sm text-green-300 font-mono",children:"è®°ä½è´¦å·"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:240,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:232,columnNumber:15},this),h.jsxDEV("div",{className:"flex items-center",children:[h.jsxDEV("input",{type:"checkbox",id:"rememberPassword",checked:E,onChange:e=>k(e.target.checked),className:"w-4 h-4 text-green-600 bg-black border-green-400 rounded focus:ring-green-500 focus:ring-2"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:246,columnNumber:17},this),h.jsxDEV("label",{htmlFor:"rememberPassword",className:"ml-2 text-sm text-green-300 font-mono",children:"è®°ä½å¯†ç "},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:253,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:245,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:231,columnNumber:13},this),h.jsxDEV("button",{type:"submit",disabled:c,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:bg-green-800 text-black font-bold rounded-lg transition-colors duration-200 font-mono text-lg",children:c?"ç™»å½•ä¸­...":"ç™»å½•"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:260,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:185,columnNumber:11},this),D.length>0&&h.jsxDEV("div",{className:"mt-6",children:[h.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[h.jsxDEV("h3",{className:"text-green-300 text-sm font-mono",children:"å¿«é€Ÿç™»å½•"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:273,columnNumber:17},this),h.jsxDEV("button",{type:"button",onClick:()=>{localStorage.removeItem("savedUsers"),localStorage.removeItem("savedCredentials"),C([]),o({phone:"",password:""}),v(!1),k(!1)},className:"text-red-400 hover:text-red-300 text-xs font-mono flex items-center",title:"æ¸…é™¤æ‰€æœ‰ä¿å­˜çš„ç™»å½•ä¿¡æ¯",children:[h.jsxDEV(N,{className:"w-3 h-3 mr-1"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:280,columnNumber:19},this),"æ¸…é™¤"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:274,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:272,columnNumber:15},this),h.jsxDEV("div",{className:"space-y-2",children:D.slice(0,3).map((e,t)=>h.jsxDEV("button",{type:"button",onClick:()=>(e=>{o(t=>({...t,phone:e}));const t=localStorage.getItem("savedCredentials");if(t)try{const n=JSON.parse(t);n.phone===e&&n.password&&(o({phone:e,password:V(n.password)}),k(!0))}catch(n){}})(e.phone),className:"w-full flex items-center p-2 bg-gray-800 hover:bg-gray-700 border border-green-400/30 rounded-lg transition-colors duration-200",children:[h.jsxDEV(w,{className:"w-4 h-4 text-green-400 mr-2"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:292,columnNumber:21},this),h.jsxDEV("span",{className:"text-green-300 font-mono text-sm",children:e.phone},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:293,columnNumber:21},this),s.phone===e.phone&&h.jsxDEV("span",{className:"ml-auto text-green-400 text-xs font-mono",children:"å½“å‰"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:295,columnNumber:23},this)]},e.phone,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:286,columnNumber:19},this))},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:284,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:271,columnNumber:13},this),h.jsxDEV("div",{className:"mt-6 text-center space-y-2",children:[h.jsxDEV(r,{to:"/register",className:"block text-green-400 hover:text-green-300 text-sm font-mono transition-colors",children:"è¿˜æ²¡æœ‰è´¦å·ï¼Ÿç«‹å³æ³¨å†Œ"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:305,columnNumber:13},this),h.jsxDEV(r,{to:"/reset-password",className:"block text-green-400 hover:text-green-300 text-sm font-mono transition-colors",children:"å¿˜è®°å¯†ç ï¼Ÿé‡ç½®å¯†ç "},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:311,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:304,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:174,columnNumber:9},this),h.jsxDEV("div",{className:"text-center text-green-600 text-xs font-mono",children:[h.jsxDEV("p",{children:"Â© å‰æ—çœé€šç”¨æœºæ¢°ï¼ˆé›†å›¢ï¼‰æœ‰é™è´£ä»»å…¬å¸."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:322,columnNumber:11},this),h.jsxDEV("div",{className:"mt-2 flex justify-center space-x-2",children:[h.jsxDEV("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:324,columnNumber:13},this),h.jsxDEV("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:325,columnNumber:13},this),h.jsxDEV("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:326,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:323,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:321,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:158,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:157,columnNumber:5},this)}function te({isOpen:e,onClose:t,userName:n,userPhone:s}){return e?h.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:h.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg shadow-2xl shadow-green-400/30 max-w-md w-full",children:[h.jsxDEV("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border-b border-green-400/30 p-6 rounded-t-lg",children:[h.jsxDEV("div",{className:"flex items-center justify-center mb-4",children:h.jsxDEV("div",{className:"relative",children:[h.jsxDEV(x,{className:"w-16 h-16 text-green-400"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:26,columnNumber:15},this),h.jsxDEV("div",{className:"absolute inset-0 animate-ping",children:h.jsxDEV(x,{className:"w-16 h-16 text-green-400 opacity-30"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:28,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:27,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:25,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:24,columnNumber:11},this),h.jsxDEV("h2",{className:"text-2xl font-bold text-green-400 text-center font-mono",children:"æ³¨å†Œç”³è¯·æäº¤æˆåŠŸ"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:32,columnNumber:11},this),h.jsxDEV("p",{className:"text-green-300 text-center text-sm font-mono mt-2",children:"REGISTRATION SUBMITTED SUCCESSFULLY"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:35,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:23,columnNumber:9},this),h.jsxDEV("div",{className:"p-6 space-y-6",children:[h.jsxDEV("div",{className:"bg-black/50 border border-green-400/30 rounded-lg p-4",children:[h.jsxDEV("h3",{className:"text-green-400 font-mono text-sm mb-3 flex items-center",children:[h.jsxDEV(v,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:45,columnNumber:15},this),"ç”³è¯·äººä¿¡æ¯"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:44,columnNumber:13},this),h.jsxDEV("div",{className:"space-y-2 text-sm",children:[h.jsxDEV("div",{className:"flex justify-between",children:[h.jsxDEV("span",{className:"text-green-300",children:"å§“åï¼š"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:50,columnNumber:17},this),h.jsxDEV("span",{className:"text-green-100 font-mono",children:n},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:51,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:49,columnNumber:15},this),h.jsxDEV("div",{className:"flex justify-between",children:[h.jsxDEV("span",{className:"text-green-300",children:"æ‰‹æœºå·ï¼š"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:54,columnNumber:17},this),h.jsxDEV("span",{className:"text-green-100 font-mono",children:s},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:55,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:53,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:48,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:43,columnNumber:11},this),h.jsxDEV("div",{className:"bg-yellow-900/20 border border-yellow-400/30 rounded-lg p-4",children:[h.jsxDEV("h3",{className:"text-yellow-400 font-mono text-sm mb-3 flex items-center",children:[h.jsxDEV(E,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:63,columnNumber:15},this),"å½“å‰çŠ¶æ€"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:62,columnNumber:13},this),h.jsxDEV("div",{className:"space-y-3",children:[h.jsxDEV("div",{className:"flex items-center",children:[h.jsxDEV("div",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-3 animate-pulse"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:68,columnNumber:17},this),h.jsxDEV("span",{className:"text-yellow-100 text-sm",children:"è´¦å·çŠ¶æ€ï¼šå¾…æ¿€æ´»"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:69,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:67,columnNumber:15},this),h.jsxDEV("p",{className:"text-yellow-200 text-xs leading-relaxed",children:'æ‚¨çš„è´¦å·å·²æˆåŠŸåˆ›å»ºï¼Œä½†å½“å‰å¤„äº"å¾…æ¿€æ´»"çŠ¶æ€ã€‚ç³»ç»Ÿç®¡ç†å‘˜å°†åœ¨1-2ä¸ªå·¥ä½œæ—¥å†…å®¡æ ¸æ‚¨çš„ç”³è¯·ã€‚'},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:71,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:66,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:61,columnNumber:11},this),h.jsxDEV("div",{className:"bg-blue-900/20 border border-blue-400/30 rounded-lg p-4",children:[h.jsxDEV("h3",{className:"text-blue-400 font-mono text-sm mb-3",children:"åç»­æ­¥éª¤"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:79,columnNumber:13},this),h.jsxDEV("div",{className:"space-y-2 text-xs text-blue-200",children:[h.jsxDEV("div",{className:"flex items-start",children:[h.jsxDEV(k,{className:"w-3 h-3 mr-2 mt-0.5 text-blue-400 flex-shrink-0"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:82,columnNumber:17},this),h.jsxDEV("span",{children:"è¯·è€å¿ƒç­‰å¾…ç³»ç»Ÿç®¡ç†å‘˜å®¡æ ¸æ¿€æ´»æ‚¨çš„è´¦å·"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:83,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:81,columnNumber:15},this),h.jsxDEV("div",{className:"flex items-start",children:[h.jsxDEV(k,{className:"w-3 h-3 mr-2 mt-0.5 text-blue-400 flex-shrink-0"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:86,columnNumber:17},this),h.jsxDEV("span",{children:"è´¦å·æ¿€æ´»åï¼Œæ‚¨å°†å¯ä»¥ä½¿ç”¨æ³¨å†Œçš„æ‰‹æœºå·å’Œå¯†ç ç™»å½•ç³»ç»Ÿ"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:87,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:85,columnNumber:15},this),h.jsxDEV("div",{className:"flex items-start",children:[h.jsxDEV(k,{className:"w-3 h-3 mr-2 mt-0.5 text-blue-400 flex-shrink-0"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:90,columnNumber:17},this),h.jsxDEV("span",{children:"å¦‚æœ‰ç–‘é—®ï¼Œè¯·è”ç³»ç³»ç»Ÿç®¡ç†å‘˜æˆ–ITæ”¯æŒéƒ¨é—¨"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:91,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:89,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:80,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:78,columnNumber:11},this),h.jsxDEV("div",{className:"pt-4",children:h.jsxDEV("button",{onClick:t,className:"w-full bg-green-600 hover:bg-green-500 text-white font-mono py-3 px-4 rounded-lg transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-50",children:"å‰å¾€ç™»å½•é¡µé¢"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:98,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:97,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:41,columnNumber:9},this),h.jsxDEV("div",{className:"bg-gray-800/50 border-t border-green-400/30 p-4 rounded-b-lg",children:h.jsxDEV("p",{className:"text-green-300 text-xs text-center font-mono",children:"å·¥æ—¶ç®¡ç†ç³»ç»Ÿ Â· TIMETRACK SYSTEM"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:109,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:108,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:21,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:20,columnNumber:5},this):null}function ne(){const[e,t]=l.useState({phone:"",password:"",confirmPassword:"",id_card:"",name:"",company_id:"",role_id:"",production_line:""}),[n,s]=l.useState(!1),[o,m]=l.useState(!1),[a,c]=l.useState(!1),[u,d]=l.useState(""),[g,N]=l.useState([]),[x,E]=l.useState([]),[k,j]=l.useState(""),[R,V]=l.useState(!0),[A,I]=l.useState([]),[L,_]=l.useState(!1),[T,O]=l.useState(null),[M,z]=l.useState(!1),{register:H}=U(),W=i();l.useEffect(()=>{(async()=>{try{const{data:e,error:t}=await P.from("companies").select("*").order("name");if(t)throw t;const{data:n,error:s}=await P.from("user_roles").select("*").neq("name","è¶…çº§ç®¡ç†å‘˜").order("name");if(s)throw s;N(e||[]),E(n||[])}catch(e){d("è·å–æ•°æ®å¤±è´¥ï¼Œè¯·é‡è¯•")}finally{V(!1)}})()},[]);const F=async e=>{try{const{data:t,error:n}=await P.from("processes").select("production_line").eq("company_id",e).eq("is_active",!0);if(n)throw n;const s=[...new Set((null==t?void 0:t.map(e=>e.production_line))||[])];I(s)}catch(t){I([])}},q=async n=>{const{name:s,value:i}=n.target;if(t(e=>({...e,[s]:i})),"role_id"===s){const n=x.find(e=>e.id===i);O(n||null);const s=n&&("ç­é•¿"===n.name||"æ®µé•¿"===n.name);_(s||!1),s&&e.company_id&&await F(e.company_id),s||t(e=>({...e,production_line:""}))}if("company_id"===s&&L&&(await F(i),t(e=>({...e,production_line:""}))),"confirmPassword"===s||"password"===s){const t="password"===s?i:e.password,n="confirmPassword"===s?i:e.confirmPassword;j(n&&t!==n?"ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´":"")}};return R?h.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:h.jsxDEV("div",{className:"text-green-400 text-xl animate-pulse font-mono",children:"åŠ è½½ä¸­..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:209,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:208,columnNumber:7},this):h.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center px-4 py-8",children:[h.jsxDEV("div",{className:"max-w-md w-full space-y-8",children:[h.jsxDEV("div",{className:"text-center",children:[h.jsxDEV("h1",{className:"text-4xl font-bold text-green-400 mb-2 font-mono",children:"å·¥æ—¶ç®¡ç†ç³»ç»Ÿ"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:221,columnNumber:11},this),h.jsxDEV("p",{className:"text-green-300 text-lg font-mono",children:"TIMETRACK SYSTEM"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:224,columnNumber:11},this),h.jsxDEV("div",{className:"mt-4 h-1 bg-gradient-to-r from-transparent via-green-400 to-transparent"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:227,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:220,columnNumber:9},this),h.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-8 shadow-lg shadow-green-400/20",children:[h.jsxDEV("h2",{className:"text-2xl font-bold text-green-400 mb-6 text-center font-mono",children:"ç”¨æˆ·æ³¨å†Œ"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:232,columnNumber:11},this),u&&h.jsxDEV("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-400 rounded text-red-300 text-sm",children:u},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:237,columnNumber:13},this),h.jsxDEV("form",{onSubmit:async t=>{if(t.preventDefault(),c(!0),d(""),!(e.phone&&e.password&&e.id_card&&e.name&&e.company_id&&e.role_id))return d("è¯·å¡«å†™æ‰€æœ‰å¿…å¡«å­—æ®µ"),void c(!1);if(L&&!e.production_line)return d("è¯·é€‰æ‹©ç”Ÿäº§çº¿"),void c(!1);if(e.password!==e.confirmPassword)return d("ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"),j("ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"),void c(!1);if(e.password.length<6)return d("å¯†ç é•¿åº¦è‡³å°‘6ä½"),void c(!1);if(!/^1[3-9]\d{9}$/.test(e.phone))return d("è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå·ç "),void c(!1);if(!/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(e.id_card))return d("è¯·è¾“å…¥æ­£ç¡®çš„èº«ä»½è¯å·ç "),void c(!1);const n=await H({phone:e.phone,password:e.password,id_card:e.id_card,name:e.name,company_id:e.company_id,role_id:e.role_id,production_line:L?e.production_line:null});n.success?(d(""),z(!0)):d(n.error||"æ³¨å†Œå¤±è´¥"),c(!1)},className:"space-y-4",children:[h.jsxDEV("div",{children:[h.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"æ‰‹æœºå·ç  *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:245,columnNumber:15},this),h.jsxDEV("div",{className:"relative",children:[h.jsxDEV(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:249,columnNumber:17},this),h.jsxDEV("input",{type:"tel",name:"phone",value:e.phone,onChange:q,className:"w-full pl-10 pr-4 py-2 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",placeholder:"è¯·è¾“å…¥æ‰‹æœºå·ç ",maxLength:11},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:250,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:248,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:244,columnNumber:13},this),h.jsxDEV("div",{children:[h.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"èº«ä»½è¯å· *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:264,columnNumber:15},this),h.jsxDEV("div",{className:"relative",children:[h.jsxDEV(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:268,columnNumber:17},this),h.jsxDEV("input",{type:"text",name:"id_card",value:e.id_card,onChange:q,className:"w-full pl-10 pr-4 py-2 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",placeholder:"è¯·è¾“å…¥èº«ä»½è¯å·ç ",maxLength:18},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:269,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:267,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:263,columnNumber:13},this),h.jsxDEV("div",{children:[h.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"å§“å *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:283,columnNumber:15},this),h.jsxDEV("div",{className:"relative",children:[h.jsxDEV(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:287,columnNumber:17},this),h.jsxDEV("input",{type:"text",name:"name",value:e.name,onChange:q,className:"w-full pl-10 pr-4 py-2 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",placeholder:"è¯·è¾“å…¥çœŸå®å§“å"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:288,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:286,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:282,columnNumber:13},this),h.jsxDEV("div",{children:[h.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"æ‰€å±å…¬å¸ *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:303,columnNumber:15},this),h.jsxDEV("div",{className:"relative",children:[h.jsxDEV(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:307,columnNumber:17},this),h.jsxDEV("select",{name:"company_id",value:e.company_id,onChange:q,className:"w-full pl-10 pr-4 py-2 bg-black border border-green-400 rounded text-green-300 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",children:[h.jsxDEV("option",{value:"",children:"è¯·é€‰æ‹©å…¬å¸"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:314,columnNumber:19},this),g.map(e=>h.jsxDEV("option",{value:e.id,children:e.name},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:316,columnNumber:21},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:308,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:306,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:302,columnNumber:13},this),h.jsxDEV("div",{children:[h.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"ç”¨æˆ·è§’è‰² *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:326,columnNumber:15},this),h.jsxDEV("div",{className:"relative",children:[h.jsxDEV(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:330,columnNumber:17},this),h.jsxDEV("select",{name:"role_id",value:e.role_id,onChange:q,className:"w-full pl-10 pr-4 py-2 bg-black border border-green-400 rounded text-green-300 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",children:[h.jsxDEV("option",{value:"",children:"è¯·é€‰æ‹©è§’è‰²"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:337,columnNumber:19},this),x.map(e=>h.jsxDEV("option",{value:e.id,children:e.name},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:339,columnNumber:21},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:331,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:329,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:325,columnNumber:13},this),L&&h.jsxDEV("div",{children:[h.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"ç”Ÿäº§çº¿ *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:350,columnNumber:17},this),h.jsxDEV("div",{className:"relative",children:[h.jsxDEV(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:354,columnNumber:19},this),h.jsxDEV("select",{name:"production_line",value:e.production_line,onChange:q,className:"w-full pl-10 pr-4 py-2 bg-black border border-green-400 rounded text-green-300 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",children:[h.jsxDEV("option",{value:"",children:"è¯·é€‰æ‹©ç”Ÿäº§çº¿"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:361,columnNumber:21},this),A.map(e=>h.jsxDEV("option",{value:e,children:e},e,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:363,columnNumber:23},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:355,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:353,columnNumber:17},this),0===A.length&&e.company_id&&h.jsxDEV("div",{className:"mt-1 text-yellow-400 text-xs font-mono",children:"è¯¥å…¬å¸æš‚æ— å¯ç”¨ç”Ÿäº§çº¿"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:370,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:349,columnNumber:15},this),h.jsxDEV("div",{children:[h.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"ç™»å½•å¯†ç  *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:379,columnNumber:15},this),h.jsxDEV("div",{className:"relative",children:[h.jsxDEV(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:383,columnNumber:17},this),h.jsxDEV("input",{type:n?"text":"password",name:"password",value:e.password,onChange:q,className:"w-full pl-10 pr-10 py-2 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",placeholder:"è¯·è¾“å…¥å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:384,columnNumber:17},this),h.jsxDEV("button",{type:"button",onClick:()=>s(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-400 hover:text-green-300",children:n?h.jsxDEV(b,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:397,columnNumber:35},this):h.jsxDEV(f,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:397,columnNumber:68},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:392,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:382,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:378,columnNumber:13},this),h.jsxDEV("div",{children:[h.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"ç¡®è®¤å¯†ç  *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:404,columnNumber:15},this),h.jsxDEV("div",{className:"relative",children:[h.jsxDEV(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:408,columnNumber:17},this),h.jsxDEV("input",{type:o?"text":"password",name:"confirmPassword",value:e.confirmPassword,onChange:q,className:"w-full pl-10 pr-10 py-2 bg-black border rounded text-green-300 placeholder-green-600 focus:outline-none focus:ring-1 font-mono text-sm ".concat(k?"border-red-400 focus:border-red-300 focus:ring-red-300":"border-green-400 focus:border-green-300 focus:ring-green-300"),placeholder:"è¯·å†æ¬¡è¾“å…¥å¯†ç "},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:409,columnNumber:17},this),h.jsxDEV("button",{type:"button",onClick:()=>m(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-400 hover:text-green-300",children:o?h.jsxDEV(b,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:424,columnNumber:42},this):h.jsxDEV(f,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:424,columnNumber:75},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:419,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:407,columnNumber:15},this),k&&h.jsxDEV("div",{className:"mt-1 text-red-400 text-xs font-mono",children:k},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:428,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:403,columnNumber:13},this),h.jsxDEV("button",{type:"submit",disabled:a,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:bg-green-800 text-black font-bold rounded-lg transition-colors duration-200 font-mono text-lg mt-6",children:a?"æ³¨å†Œä¸­...":"æ³¨å†Œ"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:435,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:242,columnNumber:11},this),h.jsxDEV("div",{className:"mt-6 text-center",children:h.jsxDEV(r,{to:"/login",className:"text-green-400 hover:text-green-300 text-sm font-mono transition-colors",children:"å·²æœ‰è´¦å·ï¼Ÿç«‹å³ç™»å½•"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:446,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:445,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:231,columnNumber:9},this),h.jsxDEV("div",{className:"text-center text-green-600 text-xs font-mono",children:h.jsxDEV("p",{children:"Â© 2024 å·¥æ—¶ç®¡ç†ç³»ç»Ÿ. All rights reserved."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:457,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:456,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:218,columnNumber:7},this),h.jsxDEV(te,{isOpen:M,onClose:()=>{z(!1),W("/login")},userName:e.name,userPhone:e.phone},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:462,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:217,columnNumber:5},this)}function se(){const[e,t]=l.useState("verify"),[n,s]=l.useState({id_card:"",newPassword:"",confirmPassword:""}),[o,m]=l.useState(!1),[a,c]=l.useState(!1),[u,d]=l.useState(!1),[g,p]=l.useState(""),[N,w]=l.useState(""),[x,v]=l.useState(null),{resetPassword:E}=U(),k=i(),C=e=>{const{name:t,value:i}=e.target;if(s(e=>({...e,[t]:i})),"confirmPassword"===t||"newPassword"===t){const e="newPassword"===t?i:n.newPassword,s="confirmPassword"===t?i:n.confirmPassword;w(s&&e!==s?"ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´":"")}};return h.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center px-4",children:h.jsxDEV("div",{className:"max-w-md w-full space-y-8",children:[h.jsxDEV("div",{className:"text-center",children:[h.jsxDEV("h1",{className:"text-4xl font-bold text-green-400 mb-2 font-mono",children:"å·¥æ—¶ç®¡ç†ç³»ç»Ÿ"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:124,columnNumber:11},this),h.jsxDEV("p",{className:"text-green-300 text-lg font-mono",children:"TIMETRACK SYSTEM"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:127,columnNumber:11},this),h.jsxDEV("div",{className:"mt-4 h-1 bg-gradient-to-r from-transparent via-green-400 to-transparent"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:130,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:123,columnNumber:9},this),h.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-8 shadow-lg shadow-green-400/20",children:[h.jsxDEV("div",{className:"flex items-center mb-6",children:[h.jsxDEV("button",{onClick:()=>{"reset"===e?(t("verify"),v(null),p("")):k("/login")},className:"text-green-400 hover:text-green-300 mr-3 transition-colors",children:h.jsxDEV(j,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:140,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:136,columnNumber:13},this),h.jsxDEV("h2",{className:"text-2xl font-bold text-green-400 font-mono",children:"verify"===e?"èº«ä»½éªŒè¯":"é‡ç½®å¯†ç "},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:142,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:135,columnNumber:11},this),g&&h.jsxDEV("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-400 rounded text-red-300 text-sm",children:g},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:148,columnNumber:13},this),"verify"===e?h.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),d(!0),p(""),!n.id_card)return p("è¯·è¾“å…¥èº«ä»½è¯å·ç "),void d(!1);if(!/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(n.id_card))return p("è¯·è¾“å…¥æ­£ç¡®çš„èº«ä»½è¯å·ç "),void d(!1);const s=await E(n.id_card);s.success&&s.user?(v(s.user),t("reset"),p("")):p(s.error||"èº«ä»½è¯å·ç éªŒè¯å¤±è´¥ï¼Œè¯·æ£€æŸ¥åé‡è¯•"),d(!1)},className:"space-y-6",children:[h.jsxDEV("div",{className:"text-center mb-6",children:h.jsxDEV("p",{className:"text-green-300 text-sm font-mono",children:"è¯·è¾“å…¥æ‚¨çš„èº«ä»½è¯å·ç è¿›è¡Œèº«ä»½éªŒè¯"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:156,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:155,columnNumber:15},this),h.jsxDEV("div",{children:[h.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-2",children:"èº«ä»½è¯å·ç "},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:163,columnNumber:17},this),h.jsxDEV("div",{className:"relative",children:[h.jsxDEV(D,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:167,columnNumber:19},this),h.jsxDEV("input",{type:"text",name:"id_card",value:n.id_card,onChange:C,className:"w-full pl-12 pr-4 py-3 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono",placeholder:"è¯·è¾“å…¥èº«ä»½è¯å·ç ",maxLength:18},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:168,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:166,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:162,columnNumber:15},this),h.jsxDEV("button",{type:"submit",disabled:u,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:bg-green-800 text-black font-bold rounded-lg transition-colors duration-200 font-mono text-lg",children:u?"éªŒè¯ä¸­...":"éªŒè¯èº«ä»½"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:181,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:154,columnNumber:13},this):h.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),d(!0),p(""),!n.newPassword||!n.confirmPassword)return p("è¯·å¡«å†™æ–°å¯†ç å’Œç¡®è®¤å¯†ç "),void d(!1);if(n.newPassword!==n.confirmPassword)return p("ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"),w("ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"),void d(!1);if(n.newPassword.length<6)return p("å¯†ç é•¿åº¦è‡³å°‘6ä½"),void d(!1);const t=await E(n.id_card,n.newPassword);t.success?(alert("å¯†ç é‡ç½®æˆåŠŸï¼Œè¯·ä½¿ç”¨æ–°å¯†ç ç™»å½•"),k("/login")):p(t.error||"å¯†ç é‡ç½®å¤±è´¥"),d(!1)},className:"space-y-6",children:[x&&h.jsxDEV("div",{className:"bg-green-900/30 border border-green-400 rounded p-4 mb-6",children:[h.jsxDEV("p",{className:"text-green-300 text-sm font-mono",children:["éªŒè¯æˆåŠŸï¼æ­£åœ¨ä¸ºç”¨æˆ· ",h.jsxDEV("span",{className:"text-green-400 font-bold",children:x.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:194,columnNumber:32},this)," é‡ç½®å¯†ç "]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:193,columnNumber:19},this),h.jsxDEV("p",{className:"text-green-400 text-xs font-mono mt-1",children:["æ‰‹æœºå·: ",x.phone]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:196,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:192,columnNumber:17},this),h.jsxDEV("div",{children:[h.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-2",children:"æ–°å¯†ç "},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:204,columnNumber:17},this),h.jsxDEV("div",{className:"relative",children:[h.jsxDEV(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:208,columnNumber:19},this),h.jsxDEV("input",{type:o?"text":"password",name:"newPassword",value:n.newPassword,onChange:C,className:"w-full pl-12 pr-12 py-3 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono",placeholder:"è¯·è¾“å…¥æ–°å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:209,columnNumber:19},this),h.jsxDEV("button",{type:"button",onClick:()=>m(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-400 hover:text-green-300",children:o?h.jsxDEV(b,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:222,columnNumber:37},this):h.jsxDEV(f,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:222,columnNumber:70},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:217,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:207,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:203,columnNumber:15},this),h.jsxDEV("div",{children:[h.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-2",children:"ç¡®è®¤æ–°å¯†ç "},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:229,columnNumber:17},this),h.jsxDEV("div",{className:"relative",children:[h.jsxDEV(y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:233,columnNumber:19},this),h.jsxDEV("input",{type:a?"text":"password",name:"confirmPassword",value:n.confirmPassword,onChange:C,className:"w-full pl-12 pr-12 py-3 bg-black border rounded text-green-300 placeholder-green-600 focus:outline-none focus:ring-1 font-mono ".concat(N?"border-red-400 focus:border-red-300 focus:ring-red-300":"border-green-400 focus:border-green-300 focus:ring-green-300"),placeholder:"è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç "},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:234,columnNumber:19},this),h.jsxDEV("button",{type:"button",onClick:()=>c(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-400 hover:text-green-300",children:a?h.jsxDEV(b,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:249,columnNumber:44},this):h.jsxDEV(f,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:249,columnNumber:77},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:244,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:232,columnNumber:17},this),N&&h.jsxDEV("div",{className:"mt-1 text-red-400 text-xs font-mono",children:N},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:253,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:228,columnNumber:15},this),h.jsxDEV("button",{type:"submit",disabled:u,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:bg-green-800 text-black font-bold rounded-lg transition-colors duration-200 font-mono text-lg",children:u?"é‡ç½®ä¸­...":"é‡ç½®å¯†ç "},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:260,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:190,columnNumber:13},this),h.jsxDEV("div",{className:"mt-6 text-center",children:h.jsxDEV(r,{to:"/login",className:"text-green-400 hover:text-green-300 text-sm font-mono transition-colors",children:"è¿”å›ç™»å½•"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:272,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:271,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:134,columnNumber:9},this),h.jsxDEV("div",{className:"text-center text-green-600 text-xs font-mono",children:h.jsxDEV("p",{children:"Â© 2024 å·¥æ—¶ç®¡ç†ç³»ç»Ÿ. All rights reserved."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:283,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:282,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:121,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:120,columnNumber:5},this)}const ie=l.lazy(()=>o(()=>import("./Dashboard-n-JmLGG0.js"),__vite__mapDeps([0,1,2,3,4,5,6]))),re=l.lazy(()=>o(()=>import("./TimesheetRecord-RML7WTEG.js"),__vite__mapDeps([7,1,6,3,4,5]))),oe=l.lazy(()=>o(()=>import("./TimesheetHistory-CT4dk9Oy.js"),__vite__mapDeps([8,1,6,3,4,5]))),me=l.lazy(()=>o(()=>import("./MobileDiagnostic-oUw_0MEv.js"),__vite__mapDeps([9,1,4,3,5,6]))),ae=l.lazy(()=>o(()=>import("./CompanyManagement-QuBWo9_n.js"),__vite__mapDeps([10,1,2,3,4,5,6]))),ce=l.lazy(()=>o(()=>import("./UserManagement-bp0oS8qZ.js"),__vite__mapDeps([11,1,6,3,4,5]))),le=l.lazy(()=>o(()=>import("./ProcessManagement-C77ro2fr.js"),__vite__mapDeps([12,1,6,3,4,13,5]))),he=l.lazy(()=>o(()=>import("./RoleList-CpUxXKTV.js"),__vite__mapDeps([14,1,4,3,5,6]))),ue=l.lazy(()=>o(()=>import("./RoleEdit-DHr_0zZ-.js"),__vite__mapDeps([15,1,4,3,5,6]))),de=l.lazy(()=>o(()=>import("./RoleCreate-TXZVMIWk.js"),__vite__mapDeps([16,1,4,3,5,6]))),ge=l.lazy(()=>o(()=>import("./SupervisorApproval-BP6yzL0B.js"),__vite__mapDeps([17,1,6,3,4,5]))),pe=l.lazy(()=>o(()=>import("./SectionChiefApproval-fQQ0w-_U.js"),__vite__mapDeps([18,1,6,3,4,5]))),ye=l.lazy(()=>o(()=>import("./Reports-xX6-ZHga.js"),__vite__mapDeps([19,4,1,3,6,5]))),be=l.lazy(()=>o(()=>import("./History-u-OWY0xH.js"),__vite__mapDeps([20,1,6,3,4,5]))),fe=l.lazy(()=>o(()=>import("./ToastTest-C5D1ucP5.js"),__vite__mapDeps([21,1,6,3,4]))),Ne=()=>{const[e,t]=l.useState("æ­£åœ¨åŠ è½½..."),[n,s]=l.useState(!1),[i,r]=l.useState(!1);return l.useEffect(()=>{const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;e&&r(["slow-2g","2g","3g"].includes(e.effectiveType));const n=setTimeout(()=>{t("åŠ è½½æ—¶é—´è¾ƒé•¿ï¼Œè¯·ç¨å€™...")},3e3),i=setTimeout(()=>{t("ç½‘ç»œè¾ƒæ…¢ï¼Œæ­£åœ¨åŠªåŠ›åŠ è½½...")},8e3),o=setTimeout(()=>{s(!0),t("åŠ è½½è¶…æ—¶ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥")},15e3);return()=>{clearTimeout(n),clearTimeout(i),clearTimeout(o)}},[]),h.jsxDEV("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 px-4",children:h.jsxDEV("div",{className:"text-center",children:[h.jsxDEV("div",{className:"relative mb-6",children:[h.jsxDEV("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mx-auto"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:91,columnNumber:11},void 0),i&&h.jsxDEV("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-orange-500 rounded-full flex items-center justify-center",children:h.jsxDEV("span",{className:"text-white text-xs",children:"!"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:94,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:93,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:90,columnNumber:9},void 0),h.jsxDEV("p",{className:"text-gray-600 mb-4 text-lg",children:e},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:100,columnNumber:9},void 0),i&&h.jsxDEV("p",{className:"text-orange-600 text-sm mb-4",children:"æ£€æµ‹åˆ°ç½‘ç»œè¿æ¥è¾ƒæ…¢ï¼ŒåŠ è½½å¯èƒ½éœ€è¦æ›´é•¿æ—¶é—´"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:104,columnNumber:11},void 0),n&&h.jsxDEV("div",{className:"space-y-3",children:[h.jsxDEV("button",{onClick:()=>{window.location.reload()},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"é‡æ–°åŠ è½½"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:112,columnNumber:13},void 0),h.jsxDEV("p",{className:"text-gray-500 text-sm",children:"å¦‚æœé—®é¢˜æŒç»­å­˜åœ¨ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–ç¨åå†è¯•"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:118,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:111,columnNumber:11},void 0),h.jsxDEV("div",{className:"mt-6 w-64 mx-auto",children:h.jsxDEV("div",{className:"w-full bg-gray-200 rounded-full h-2",children:h.jsxDEV("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"60%"}},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:127,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:126,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:125,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:88,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:87,columnNumber:5},void 0)};class we extends l.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){var e;return this.state.hasError?h.jsxDEV("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 px-4",children:h.jsxDEV("div",{className:"max-w-md text-center",children:[h.jsxDEV("div",{className:"mb-6",children:[h.jsxDEV("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:h.jsxDEV("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:h.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:168,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:167,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:166,columnNumber:15},this),h.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"åº”ç”¨å‡ºç°é”™è¯¯"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:171,columnNumber:15},this),h.jsxDEV("p",{className:"text-gray-600 mb-6",children:"æŠ±æ­‰ï¼Œåº”ç”¨é‡åˆ°äº†ä¸€ä¸ªæ„å¤–é”™è¯¯ã€‚è¯·å°è¯•åˆ·æ–°é¡µé¢æˆ–ç¨åå†è¯•ã€‚"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:172,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:165,columnNumber:13},this),h.jsxDEV("div",{className:"space-y-3",children:[h.jsxDEV("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"åˆ·æ–°é¡µé¢"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:178,columnNumber:15},this),h.jsxDEV("button",{onClick:()=>this.setState({hasError:!1}),className:"w-full px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"é‡è¯•"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:184,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:177,columnNumber:13},this),this.state.error&&h.jsxDEV("details",{className:"mt-6 text-left",children:[h.jsxDEV("summary",{className:"cursor-pointer text-sm text-gray-500 hover:text-gray-700",children:"æŸ¥çœ‹é”™è¯¯è¯¦æƒ…"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:195,columnNumber:17},this),h.jsxDEV("pre",{className:"mt-2 p-3 bg-gray-100 rounded text-xs overflow-auto max-h-40",children:[this.state.error.toString(),null==(e=this.state.errorInfo)?void 0:e.componentStack]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:198,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:194,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:164,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:163,columnNumber:9},this):this.props.children}}const xe=({children:e})=>{const t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768;return h.jsxDEV(l.Suspense,{fallback:t?h.jsxDEV(X,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:269,columnNumber:36},void 0):h.jsxDEV(Ne,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:269,columnNumber:63},void 0),children:h.jsxDEV(we,{children:e},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:270,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:269,columnNumber:5},void 0)};function ve(){return l.useEffect(()=>{(()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768,t=navigator.connection||navigator.mozConnection||navigator.webkitConnection,n=t&&["slow-2g","2g","3g"].includes(t.effectiveType);e?n||(setTimeout(()=>{var e,t;null==(e=ie.preload)||e.call(ie),null==(t=re.preload)||t.call(re)},3e3),setTimeout(()=>{var e;null==(e=oe.preload)||e.call(oe)},8e3)):("requestIdleCallback"in window?requestIdleCallback(()=>{var e,t,n;null==(e=ie.preload)||e.call(ie),null==(t=re.preload)||t.call(re),null==(n=oe.preload)||n.call(oe)}):setTimeout(()=>{var e,t,n;null==(e=ie.preload)||e.call(ie),null==(t=re.preload)||t.call(re),null==(n=oe.preload)||n.call(oe)},2e3),setTimeout(()=>{var e,t;null==(e=ae.preload)||e.call(ae),null==(t=ce.preload)||t.call(ce)},5e3))})()},[]),h.jsxDEV(we,{children:h.jsxDEV(G,{children:h.jsxDEV(m,{basename:"",children:[h.jsxDEV(K,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:290,columnNumber:11},this),h.jsxDEV(Y,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:291,columnNumber:11},this),h.jsxDEV(A,{position:"top-right",richColors:!0},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:292,columnNumber:11},this),h.jsxDEV(a,{children:[h.jsxDEV(c,{path:"/login",element:h.jsxDEV(ee,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:295,columnNumber:41},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:295,columnNumber:11},this),h.jsxDEV(c,{path:"/register",element:h.jsxDEV(ne,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:296,columnNumber:44},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:296,columnNumber:11},this),h.jsxDEV(c,{path:"/reset-password",element:h.jsxDEV(se,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:297,columnNumber:50},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:297,columnNumber:11},this),h.jsxDEV(c,{path:"/",element:h.jsxDEV(Z,{children:h.jsxDEV(s,{to:"/dashboard",replace:!0},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:302,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:301,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:300,columnNumber:11},this),h.jsxDEV(c,{path:"/dashboard",element:h.jsxDEV(Z,{children:h.jsxDEV(xe,{children:h.jsxDEV(ie,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:307,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:307,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:306,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:305,columnNumber:11},this),h.jsxDEV(c,{path:"/company-management",element:h.jsxDEV(Z,{children:h.jsxDEV(xe,{children:h.jsxDEV(ae,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:312,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:312,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:311,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:310,columnNumber:11},this),h.jsxDEV(c,{path:"/user-management",element:h.jsxDEV(Z,{children:h.jsxDEV(xe,{children:h.jsxDEV(ce,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:317,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:317,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:316,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:315,columnNumber:11},this),h.jsxDEV(c,{path:"/role-permissions",element:h.jsxDEV(Z,{children:h.jsxDEV(xe,{children:h.jsxDEV(he,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:322,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:322,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:321,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:320,columnNumber:11},this),h.jsxDEV(c,{path:"/role-permissions/edit/:id",element:h.jsxDEV(Z,{children:h.jsxDEV(xe,{children:h.jsxDEV(ue,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:328,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:328,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:327,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:326,columnNumber:11},this),h.jsxDEV(c,{path:"/role-permissions/create",element:h.jsxDEV(Z,{children:h.jsxDEV(xe,{children:h.jsxDEV(de,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:333,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:333,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:332,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:331,columnNumber:11},this),h.jsxDEV(c,{path:"/process-management",element:h.jsxDEV(Z,{children:h.jsxDEV(xe,{children:h.jsxDEV(le,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:338,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:338,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:337,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:336,columnNumber:11},this),h.jsxDEV(c,{path:"/timesheet-record",element:h.jsxDEV(Z,{children:h.jsxDEV(xe,{children:h.jsxDEV(re,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:343,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:343,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:342,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:341,columnNumber:11},this),h.jsxDEV(c,{path:"/timesheet-history",element:h.jsxDEV(Z,{children:h.jsxDEV(xe,{children:h.jsxDEV(oe,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:348,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:348,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:347,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:346,columnNumber:11},this),h.jsxDEV(c,{path:"/supervisor-approval",element:h.jsxDEV(J,{allowedRoles:["ç­é•¿","supervisor","è¶…çº§ç®¡ç†å‘˜","super_admin"],children:h.jsxDEV(xe,{children:h.jsxDEV(ge,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:353,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:353,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:352,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:351,columnNumber:11},this),h.jsxDEV(c,{path:"/section-chief-approval",element:h.jsxDEV(J,{allowedRoles:["æ®µé•¿","section_chief","è¶…çº§ç®¡ç†å‘˜","super_admin"],children:h.jsxDEV(xe,{children:h.jsxDEV(pe,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:358,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:358,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:357,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:356,columnNumber:11},this),h.jsxDEV(c,{path:"/reports",element:h.jsxDEV(Z,{children:h.jsxDEV(xe,{children:h.jsxDEV(ye,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:363,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:363,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:362,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:361,columnNumber:11},this),h.jsxDEV(c,{path:"/history",element:h.jsxDEV(Z,{children:h.jsxDEV(xe,{children:h.jsxDEV(be,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:368,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:368,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:367,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:366,columnNumber:11},this),h.jsxDEV(c,{path:"/toast-test",element:h.jsxDEV(Z,{children:h.jsxDEV(xe,{children:h.jsxDEV(fe,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:373,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:373,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:372,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:371,columnNumber:11},this),h.jsxDEV(c,{path:"/mobile-diagnostic",element:h.jsxDEV(xe,{children:h.jsxDEV(me,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:379,columnNumber:26},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:379,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:378,columnNumber:11},this),h.jsxDEV(c,{path:"*",element:h.jsxDEV(s,{to:"/dashboard",replace:!0},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:384,columnNumber:36},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:384,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:293,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:289,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:288,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:287,columnNumber:5},this)}Array.from||(Array.from=function(){const e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1;return function(e,s,i){const r=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");const o=void 0===s?void 0:s;if(void 0!==o){if(!t(o))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}const m=function(e){const t=function(e){const t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),n)}(r.length),a=t(this)?Object(new this(m)):new Array(m);let c,l=0;for(;l<m;)c=r[l],a[l]=o?void 0===i?o(c,l):o.call(i,c,l):c,l+=1;return a.length=m,a}}()),Array.prototype.includes||(Array.prototype.includes=function(e,t){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");const n=Object(this),s=parseInt(n.length)||0;if(0===s)return!1;const i=parseInt(t)||0;let r,o;for(i>=0?r=i:(r=s+i,r<0&&(r=0));r<s;){if(o=n[r],e===o||e!=e&&o!=o)return!0;r++}return!1}),String.prototype.includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const t=Object(e),n=Array.prototype.slice.call(arguments,1);for(let s=0;s<n.length;s++){const e=n[s];if(null!=e)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t}),"undefined"==typeof Promise&&(window.Promise=class e{constructor(e){t(this,"state","pending"),t(this,"value"),t(this,"handlers",[]);try{e(this.resolve.bind(this),this.reject.bind(this))}catch(n){this.reject(n)}}resolve(e){"pending"===this.state&&(this.state="fulfilled",this.value=e,this.handlers.forEach(e=>this.handle(e)),this.handlers=[])}reject(e){"pending"===this.state&&(this.state="rejected",this.value=e,this.handlers.forEach(e=>this.handle(e)),this.handlers=[])}handle(e){"pending"===this.state?this.handlers.push(e):("fulfilled"===this.state&&"function"==typeof e.onFulfilled&&e.onFulfilled(this.value),"rejected"===this.state&&"function"==typeof e.onRejected&&e.onRejected(this.value))}then(t,n){return new e((e,s)=>{this.handle({onFulfilled:n=>{if("function"==typeof t)try{e(t(n))}catch(i){s(i)}else e(n)},onRejected:t=>{if("function"==typeof n)try{e(n(t))}catch(i){s(i)}else s(t)},resolve:e,reject:s})})}catch(e){return this.then(void 0,e)}static resolve(t){return new e(e=>e(t))}static reject(t){return new e((e,n)=>n(t))}static all(t){return new e((e,n)=>{if(0===t.length)return void e([]);const s=[];let i=0;t.forEach((r,o)=>{r.then(n=>{s[o]=n,i++,i===t.length&&e(s)}).catch(n)})})}}),"undefined"==typeof fetch&&(window.fetch=function(e,t={}){return new Promise((n,s)=>{const i=new XMLHttpRequest;i.open(t.method||"GET",e),t.headers&&Object.keys(t.headers).forEach(e=>{i.setRequestHeader(e,t.headers[e])}),i.onload=()=>{const e={ok:i.status>=200&&i.status<300,status:i.status,statusText:i.statusText,json:()=>Promise.resolve(JSON.parse(i.responseText)),text:()=>Promise.resolve(i.responseText)};n(e)},i.onerror=()=>s(new Error("Network error")),i.send(t.body)})}),"undefined"==typeof IntersectionObserver&&(window.IntersectionObserver=class{constructor(e,n={}){t(this,"callback"),t(this,"options"),t(this,"targets",[]),this.callback=e,this.options=n,setTimeout(()=>{this.checkIntersections()},100)}observe(e){this.targets.push(e)}unobserve(e){const t=this.targets.indexOf(e);t>-1&&this.targets.splice(t,1)}disconnect(){this.targets=[]}checkIntersections(){const e=this.targets.map(e=>({target:e,isIntersecting:!0,intersectionRatio:1}));e.length>0&&this.callback(e)}});new class{constructor(){this.isMobile=this.detectMobileDevice(),this.networkType=this.getNetworkType(),this.isLowEndDevice=this.detectLowEndDevice(),this.optimizationLevel=this.calculateOptimizationLevel(),this.init()}detectMobileDevice(){const e=navigator.userAgent.toLowerCase();return["mobile","android","iphone","ipad","ipod","blackberry","windows phone","opera mini"].some(t=>e.includes(t))||window.innerWidth<=768||"ontouchstart"in window}getNetworkType(){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return e?{type:e.effectiveType||"unknown",downlink:e.downlink||0,rtt:e.rtt||0,saveData:e.saveData||!1}:"unknown"}detectLowEndDevice(){const e=navigator.hardwareConcurrency||1,t=navigator.deviceMemory||1,n=navigator.userAgent.toLowerCase(),s=["android 4","android 5","android 6"].some(e=>n.includes(e));return e<=2||t<=2||s}calculateOptimizationLevel(){let e=0;return"slow-2g"===this.networkType.type||"2g"===this.networkType.type?e+=3:"3g"===this.networkType.type?e+=2:"4g"===this.networkType.type&&(e+=1),this.isLowEndDevice&&(e+=2),this.networkType.saveData&&(e+=2),Math.min(e,5)}init(){this.isMobile&&(this.applyOptimizations(),this.setupNetworkListeners())}applyOptimizations(){switch(this.optimizationLevel){case 5:this.enableAggressiveOptimization();break;case 4:this.enableHighOptimization();break;case 3:this.enableMediumOptimization();break;case 2:this.enableLowOptimization();break;default:this.enableBasicOptimization()}}enableAggressiveOptimization(){this.disableNonCriticalFeatures(),this.minimizeResourceLoading(),this.enableTextCompression(),this.enableLazyLoading()}enableHighOptimization(){this.minimizeResourceLoading(),this.enableLazyLoading(),this.optimizeImages()}enableMediumOptimization(){this.enableLazyLoading(),this.optimizeImages()}enableLowOptimization(){this.optimizeImages()}enableBasicOptimization(){this.setupViewport()}disableNonCriticalFeatures(){const e=document.createElement("style");e.textContent="\n            *, *::before, *::after {\n                animation-duration: 0.01ms !important;\n                animation-iteration-count: 1 !important;\n                transition-duration: 0.01ms !important;\n            }\n        ",document.head.appendChild(e),document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("video").forEach(e=>{e.autoplay=!1,e.preload="none"})})}minimizeResourceLoading(){document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll('link[rel="stylesheet"]').forEach(e=>{e.href.includes("critical")||e.href.includes("main")||(e.media="print",e.onload=function(){this.media="all"})})})}enableTextCompression(){"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{var t;null==(t=e.active)||t.postMessage({type:"ENABLE_COMPRESSION",level:"aggressive"})})}enableLazyLoading(){if("IntersectionObserver"in window){const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){const n=t.target;n.dataset.src&&(n.src=n.dataset.src,n.removeAttribute("data-src"),e.unobserve(n))}})});document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("img[data-src]").forEach(t=>e.observe(t))})}}optimizeImages(){document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll("img").forEach(e=>{if(e.hasAttribute("loading")||(e.loading="lazy"),window.devicePixelRatio>1){const t=Math.min(e.naturalWidth,window.innerWidth);e.style.maxWidth=t+"px"}})})}setupViewport(){let e=document.querySelector('meta[name="viewport"]');e||(e=document.createElement("meta"),e.name="viewport",document.head.appendChild(e)),e.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"}setupNetworkListeners(){"connection"in navigator&&navigator.connection.addEventListener("change",()=>{this.networkType=this.getNetworkType(),this.optimizationLevel=this.calculateOptimizationLevel(),this.applyOptimizations()}),window.addEventListener("online",()=>{this.handleOnlineStatus(!0)}),window.addEventListener("offline",()=>{this.handleOnlineStatus(!1)})}handleOnlineStatus(e){e?this.restoreFeatures():this.enableOfflineMode()}restoreFeatures(){document.querySelectorAll("[data-mobile-disabled]").forEach(e=>{e.removeAttribute("data-mobile-disabled"),e.style.display=""})}enableOfflineMode(){document.querySelectorAll("[data-requires-network]").forEach(e=>{e.setAttribute("data-mobile-disabled","true"),e.style.display="none"}),this.showOfflineNotification()}showOfflineNotification(){const e=document.createElement("div");e.className="mobile-offline-notification",e.innerHTML='\n            <div class="offline-content">\n                ğŸ“± ç¦»çº¿æ¨¡å¼å·²å¯ç”¨\n                <button onclick="this.parentElement.parentElement.remove()">Ã—</button>\n            </div>\n        ',e.style.cssText="\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            background: #ff9800;\n            color: white;\n            padding: 10px;\n            text-align: center;\n            z-index: 10000;\n            font-size: 14px;\n        ",document.body.appendChild(e),setTimeout(()=>{e.parentElement&&e.remove()},5e3)}getOptimizationRecommendations(){const e=[];return"slow-2g"!==this.networkType.type&&"2g"!==this.networkType.type||e.push("æ£€æµ‹åˆ°æ…¢é€Ÿç½‘ç»œï¼Œå»ºè®®åˆ‡æ¢åˆ°WiFiæˆ–ç§»åŠ¨åˆ°ä¿¡å·æ›´å¥½çš„ä½ç½®"),this.isLowEndDevice&&e.push("æ£€æµ‹åˆ°ä½ç«¯è®¾å¤‡ï¼Œå·²å¯ç”¨æ€§èƒ½ä¼˜åŒ–æ¨¡å¼"),this.networkType.saveData&&e.push("æ£€æµ‹åˆ°æ•°æ®èŠ‚çœæ¨¡å¼ï¼Œå·²å‡å°‘èµ„æºåŠ è½½"),this.isMobile&&window.innerWidth<400&&e.push("å±å¹•è¾ƒå°ï¼Œå»ºè®®æ¨ªå±ä½¿ç”¨ä»¥è·å¾—æ›´å¥½ä½“éªŒ"),e}getStatus(){return{isMobile:this.isMobile,networkType:this.networkType,isLowEndDevice:this.isLowEndDevice,optimizationLevel:this.optimizationLevel,recommendations:this.getOptimizationRecommendations()}}};const Ee=new class{constructor(){t(this,"loadingState",{isLoading:!1,progress:0,retryCount:0}),t(this,"maxRetries",3),t(this,"baseTimeout",15e3),t(this,"isMobile"),t(this,"connectionType"),t(this,"loadQueue",[]),t(this,"loadedResources",new Set),this.isMobile=this.detectMobileDevice(),this.connectionType=this.getConnectionType(),this.setupProgressiveLoading()}detectMobileDevice(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768}getConnectionType(){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return e&&e.effectiveType||"unknown"}setupProgressiveLoading(){this.isMobile&&(["slow-2g","2g","3g"].includes(this.connectionType)&&(this.maxRetries=5,this.baseTimeout=3e4),window.addEventListener("online",()=>{this.retryFailedLoads()}),document.addEventListener("visibilitychange",()=>{!document.hidden&&this.loadingState.error&&this.retryFailedLoads()}))}async preloadCriticalResources(){if(!this.isMobile)return;const e=[{url:"/src/main.tsx",type:"script",priority:"critical",timeout:this.baseTimeout},{url:"/src/App.tsx",type:"script",priority:"critical",timeout:this.baseTimeout}];await this.loadResourcesInBatches(e,2)}async loadResourcesInBatches(e,t){this.loadingState.isLoading=!0,this.loadingState.progress=0,this.loadingState.error=void 0;const n=e.length;let s=0;for(let r=0;r<e.length;r+=t){const o=e.slice(r,r+t);try{await Promise.all(o.map(e=>this.loadSingleResource(e))),s+=o.length,this.loadingState.progress=s/n*100,r+t<e.length&&await this.delay(100)}catch(i){if(this.loadingState.error="åŠ è½½å¤±è´¥: ".concat(i),this.loadingState.retryCount<this.maxRetries){this.loadingState.retryCount++,await this.delay(1e3*this.loadingState.retryCount),r-=t;continue}throw i}}this.loadingState.isLoading=!1,this.loadingState.progress=100}async loadSingleResource(e){if(!this.loadedResources.has(e.url))return new Promise((t,n)=>{const s=e.timeout||this.baseTimeout,i=setTimeout(()=>{n(new Error("èµ„æºåŠ è½½è¶…æ—¶: ".concat(e.url)))},s),r=()=>{clearTimeout(i),this.loadedResources.add(e.url)};switch(e.type){case"script":this.loadScript(e.url).then(()=>{r(),t()}).catch(n);break;case"style":this.loadStyle(e.url).then(()=>{r(),t()}).catch(n);break;case"image":this.loadImage(e.url).then(()=>{r(),t()}).catch(n);break;default:r(),t()}})}loadScript(e){return new Promise((t,n)=>{if(document.querySelector('script[src="'.concat(e,'"]')))return void t();const s=document.createElement("script");s.src=e,s.async=!0,s.crossOrigin="anonymous",s.onload=()=>t(),s.onerror=()=>n(new Error("è„šæœ¬åŠ è½½å¤±è´¥: ".concat(e))),document.head.appendChild(s)})}loadStyle(e){return new Promise((t,n)=>{if(document.querySelector('link[href="'.concat(e,'"]')))return void t();const s=document.createElement("link");s.rel="stylesheet",s.href=e,s.crossOrigin="anonymous",s.onload=()=>t(),s.onerror=()=>n(new Error("æ ·å¼åŠ è½½å¤±è´¥: ".concat(e))),document.head.appendChild(s)})}loadImage(e){return new Promise((t,n)=>{const s=new Image;s.crossOrigin="anonymous",s.onload=()=>t(),s.onerror=()=>n(new Error("å›¾ç‰‡åŠ è½½å¤±è´¥: ".concat(e))),s.src=e})}async retryFailedLoads(){this.loadingState.error&&this.loadingState.retryCount<this.maxRetries&&(this.loadingState.retryCount++,this.loadingState.error=void 0,await this.delay(1e3),await this.preloadCriticalResources())}delay(e){return new Promise(t=>setTimeout(t,e))}getLoadingState(){return{...this.loadingState}}cleanup(){this.loadQueue=[],this.loadedResources.clear(),this.loadingState={isLoading:!1,progress:0,retryCount:0}}async checkResourceAvailability(e){try{return(await fetch(e,{method:"HEAD",mode:"no-cors",cache:"no-cache"})).ok}catch(t){return!1}}optimizeMobileCache(){if(!this.isMobile)return;const e=document.createElement("meta");e.httpEquiv="Cache-Control",e.content="public, max-age=86400, stale-while-revalidate=604800",document.head.appendChild(e);const t=document.createElement("link");t.rel="preconnect",t.href=window.location.origin,document.head.appendChild(t)}},ke=new class{constructor(e){t(this,"config"),t(this,"errorLog",[]),t(this,"fallbackStrategies",[]),t(this,"isOfflineMode",!1),t(this,"lastSuccessfulUrl",null),this.config={maxRetries:5,retryDelay:2e3,fallbackUrls:["http://192.168.60.26:5173/","http://localhost:5173/","https://ty-hongmeng.github.io/"],enableOfflineMode:!0,enableErrorReporting:!0,...e},this.initializeFallbackStrategies(),this.setupGlobalErrorHandling(),this.monitorNetworkStatus()}initializeFallbackStrategies(){this.fallbackStrategies=[{name:"retry_with_delay",priority:1,execute:()=>this.retryWithExponentialBackoff(),description:"ä½¿ç”¨æŒ‡æ•°é€€é¿ç®—æ³•é‡è¯•"},{name:"switch_to_http",priority:2,execute:()=>this.switchToHTTP(),description:"åˆ‡æ¢åˆ°HTTPåè®®"},{name:"use_alternative_dns",priority:3,execute:()=>this.useAlternativeDNS(),description:"ä½¿ç”¨å¤‡ç”¨DNSæœåŠ¡å™¨"},{name:"try_fallback_urls",priority:4,execute:()=>this.tryFallbackUrls(),description:"å°è¯•å¤‡ç”¨URL"},{name:"enable_offline_mode",priority:5,execute:()=>this.enableOfflineMode(),description:"å¯ç”¨ç¦»çº¿æ¨¡å¼"},{name:"show_error_page",priority:6,execute:()=>this.showErrorPage(),description:"æ˜¾ç¤ºé”™è¯¯é¡µé¢"}],this.fallbackStrategies.sort((e,t)=>e.priority-t.priority)}setupGlobalErrorHandling(){window.addEventListener("unhandledrejection",e=>{this.handleError(e.reason,{url:window.location.href,method:"unknown",timestamp:Date.now(),userAgent:navigator.userAgent,errorType:"unhandled_promise_rejection",retryCount:0})}),window.addEventListener("error",e=>{e.error&&this.handleError(e.error,{url:e.filename||window.location.href,method:"unknown",timestamp:Date.now(),userAgent:navigator.userAgent,errorType:"javascript_error",retryCount:0})}),window.addEventListener("error",e=>{if(e.target&&e.target!==window){const t=e.target;this.handleResourceError(t)}},!0)}monitorNetworkStatus(){window.addEventListener("online",()=>{this.isOfflineMode=!1,this.handleNetworkReconnect()}),window.addEventListener("offline",()=>{this.isOfflineMode=!0,this.handleNetworkDisconnect()}),navigator.onLine||(this.isOfflineMode=!0)}async handleError(e,t){return this.logError(e,t),this.isConnectionResetError(e)?await this.handleConnectionResetError(e,t):this.isNetworkError(e)?await this.handleNetworkError(e,t):this.isTimeoutError(e)?await this.handleTimeoutError(e,t):await this.handleGenericError(e,t)}async handleConnectionResetError(e,t){for(const s of this.fallbackStrategies)try{if(await s.execute())return!0}catch(n){}return!1}async handleNetworkError(e,t){if(t.retryCount<this.config.maxRetries){const e=this.config.retryDelay*Math.pow(2,t.retryCount);return await this.delay(e),t.retryCount++,!0}return await this.tryFallbackStrategies()}async handleTimeoutError(e,t){if(t.retryCount<this.config.maxRetries){const e=this.config.retryDelay*(t.retryCount+1);return await this.delay(e),t.retryCount++,!0}return await this.tryFallbackStrategies()}async handleGenericError(e,t){return 0===t.retryCount&&(await this.delay(this.config.retryDelay),t.retryCount++,!0)}handleResourceError(e){const t=e.tagName.toLowerCase();(e.getAttribute("src")||e.getAttribute("href"))&&("script"===t?this.retryScriptLoading(e):"link"===t?this.retryStylesheetLoading(e):"img"===t&&this.retryImageLoading(e))}retryScriptLoading(e){var t;const n=document.createElement("script");n.src=e.src,n.async=e.async,n.defer=e.defer,n.onload=()=>{},n.onerror=()=>{},null==(t=e.parentNode)||t.replaceChild(n,e)}retryStylesheetLoading(e){var t;const n=document.createElement("link");n.rel=e.rel,n.href=e.href,n.type=e.type,n.onload=()=>{},n.onerror=()=>{},null==(t=e.parentNode)||t.replaceChild(n,e)}retryImageLoading(e){const t=e.src,n=t.includes("?")?"&":"?";e.src="".concat(t).concat(n,"_retry=").concat(Date.now()),e.onerror=()=>{e.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIEVycm9yPC90ZXh0Pjwvc3ZnPg=="}}async tryFallbackStrategies(){for(const t of this.fallbackStrategies)try{if(await t.execute())return!0}catch(e){}return!1}async retryWithExponentialBackoff(){const e=Math.min(this.config.retryDelay*Math.pow(2,3),3e4);return await this.delay(e),!0}async switchToHTTP(){if("https:"===window.location.protocol){const t=window.location.href.replace("https:","http:");try{if((await fetch(t,{method:"HEAD",signal:AbortSignal.timeout(5e3)})).ok)return window.location.href=t,!0}catch(e){}}return!1}async useAlternativeDNS(){return this.showDNSChangeInstructions(),!1}async tryFallbackUrls(){for(const t of this.config.fallbackUrls)try{if((await fetch(t,{method:"HEAD",signal:AbortSignal.timeout(5e3)})).ok)return this.lastSuccessfulUrl=t,window.location.href=t,!0}catch(e){}return!1}async enableOfflineMode(){return!!this.config.enableOfflineMode&&(this.isOfflineMode=!0,this.showOfflineModeNotification(),await this.loadCachedContent())}async showErrorPage(){const e=this.generateErrorPageHTML();return document.documentElement.innerHTML=e,!0}generateErrorPageHTML(){const e=this.errorLog[this.errorLog.length-1],t=(null==e?void 0:e.errorType)||"unknown";return'\n      <!DOCTYPE html>\n      <html lang="zh-CN">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>è¿æ¥é”™è¯¯</title>\n        <style>\n          body {\n            font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', sans-serif;\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n            min-height: 100vh;\n            margin: 0;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 20px;\n          }\n          .error-container {\n            background: white;\n            border-radius: 16px;\n            padding: 30px;\n            max-width: 400px;\n            text-align: center;\n            box-shadow: 0 10px 30px rgba(0,0,0,0.3);\n          }\n          .error-icon {\n            font-size: 48px;\n            margin-bottom: 20px;\n          }\n          .error-title {\n            color: #e53e3e;\n            font-size: 24px;\n            font-weight: 700;\n            margin-bottom: 16px;\n          }\n          .error-message {\n            color: #4a5568;\n            font-size: 14px;\n            line-height: 1.6;\n            margin-bottom: 24px;\n          }\n          .retry-button {\n            background: linear-gradient(135deg, #4299e1, #3182ce);\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 8px;\n            font-size: 14px;\n            font-weight: 600;\n            cursor: pointer;\n            margin: 8px;\n            transition: all 0.3s ease;\n          }\n          .retry-button:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 4px 12px rgba(66, 153, 225, 0.4);\n          }\n          .help-links {\n            margin-top: 20px;\n            font-size: 12px;\n          }\n          .help-links a {\n            color: #4299e1;\n            text-decoration: none;\n            margin: 0 8px;\n          }\n        </style>\n      </head>\n      <body>\n        <div class="error-container">\n          <div class="error-icon">ğŸš«</div>\n          <div class="error-title">è¿æ¥å¤±è´¥</div>\n          <div class="error-message">\n            æ— æ³•è¿æ¥åˆ°æœåŠ¡å™¨ï¼Œå¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜æˆ–æœåŠ¡å™¨æš‚æ—¶ä¸å¯ç”¨ã€‚<br>\n            é”™è¯¯ç±»å‹: '.concat(t,'\n          </div>\n          <button class="retry-button" onclick="window.location.reload()">\n            é‡æ–°å°è¯•\n          </button>\n          <button class="retry-button" onclick="window.open(\'http://192.168.60.26:5173/\', \'_blank\')">\n            å¤‡ç”¨è®¿é—®\n          </button>\n          <div class="help-links">\n            <a href="javascript:void(0)" onclick="showDiagnostic()">ç½‘ç»œè¯Šæ–­</a>\n            <a href="javascript:void(0)" onclick="contactSupport()">è”ç³»æ”¯æŒ</a>\n          </div>\n        </div>\n        \n        <script>\n          function showDiagnostic() {\n            window.open(\'connection-reset-fixer.html\', \'_blank\');\n          }\n          \n          function contactSupport() {\n            alert(\'æŠ€æœ¯æ”¯æŒ:\\né‚®ç®±: support@company.com\\nç”µè¯: 400-123-4567\');\n          }\n        <\/script>\n      </body>\n      </html>\n    ')}showDNSChangeInstructions(){"Notification"in window&&"granted"===Notification.permission&&new Notification("ç½‘ç»œè¿æ¥å»ºè®®",{body:"å»ºè®®æ›´æ”¹DNSæœåŠ¡å™¨è®¾ç½®ä»¥æ”¹å–„è¿æ¥",icon:"/favicon.ico"})}showOfflineModeNotification(){const e=document.createElement("div");e.style.cssText="\n      position: fixed;\n      top: 20px;\n      left: 50%;\n      transform: translateX(-50%);\n      background: #fed7d7;\n      color: #c53030;\n      padding: 12px 20px;\n      border-radius: 8px;\n      font-size: 14px;\n      font-weight: 600;\n      z-index: 10000;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.2);\n    ",e.textContent="âš ï¸ ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œå·²åˆ‡æ¢åˆ°ç¦»çº¿æ¨¡å¼",document.body.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},5e3)}async loadCachedContent(){try{if("caches"in window){const e=await caches.open("app-cache-v1"),t=await e.match(window.location.href);if(t){const e=await t.text();return document.documentElement.innerHTML=e,!0}}}catch(e){}return!1}handleNetworkReconnect(){this.errorLog=[],this.lastSuccessfulUrl&&this.lastSuccessfulUrl!==window.location.href?window.location.href=this.lastSuccessfulUrl:window.location.reload()}handleNetworkDisconnect(){this.config.enableOfflineMode&&this.enableOfflineMode()}logError(e,t){const n={...t,message:e.message,stack:e.stack};this.errorLog.push(n),this.errorLog.length>100&&(this.errorLog=this.errorLog.slice(-50)),this.config.enableErrorReporting&&this.reportError(n)}async reportError(e){}isConnectionResetError(e){return e.message.includes("ERR_CONNECTION_RESET")||e.message.includes("ECONNRESET")||e.message.includes("Connection reset")}isNetworkError(e){return e.message.includes("NetworkError")||e.message.includes("Failed to fetch")||e.message.includes("ERR_NETWORK")||e.message.includes("ERR_INTERNET_DISCONNECTED")}isTimeoutError(e){return e.message.includes("timeout")||e.message.includes("Timeout")||"AbortError"===e.name}delay(e){return new Promise(t=>setTimeout(t,e))}getErrorLog(){return[...this.errorLog]}clearErrorLog(){this.errorLog=[]}getConfig(){return{...this.config}}updateConfig(e){this.config={...this.config,...e}}},De=new class{constructor(e){t(this,"config"),t(this,"dnsConfig"),t(this,"connectionPool"),t(this,"metrics",null),t(this,"activeConnections",new Map),t(this,"requestQueue",[]),t(this,"isProcessingQueue",!1),this.config={timeout:15e3,retryAttempts:3,retryDelay:1e3,maxConcurrentRequests:6,enableKeepAlive:!0,enableCompression:!0,preferredProtocol:"auto",dnsServers:["223.5.5.5","119.29.29.29","180.76.76.76","8.8.8.8"],enableDNSPrefetch:!0,enablePreconnect:!0,...e},this.dnsConfig={primaryServers:["223.5.5.5","119.29.29.29"],fallbackServers:["8.8.8.8","8.8.4.4"],timeout:5e3,enableDoH:!0,enableDoT:!1},this.connectionPool={maxConnections:6,keepAliveTimeout:3e4,idleTimeout:6e4,enableMultiplexing:!0},this.initialize()}async initialize(){await this.detectNetworkCapabilities(),this.setupDNSOptimization(),this.setupConnectionPooling(),this.setupNetworkMonitoring(),this.optimizeProtocolSelection()}async detectNetworkCapabilities(){try{if("connection"in navigator){const e=navigator.connection;this.metrics={latency:0,bandwidth:e.downlink||0,packetLoss:0,connectionType:e.type||"unknown",effectiveType:e.effectiveType||"unknown",downlink:e.downlink||0,rtt:e.rtt||0}}await this.measureNetworkLatency()}catch(e){}}async measureNetworkLatency(){try{const e=performance.now();await new Promise(e=>setTimeout(e,1));const t=performance.now(),n=Math.max(t-e,20);this.metrics&&(this.metrics.latency=n,this.metrics.rtt=n)}catch(e){}}setupDNSOptimization(){this.config.enableDNSPrefetch&&this.enableDNSPrefetch(),this.config.enablePreconnect&&this.enablePreconnect(),this.dnsConfig.enableDoH&&this.setupDNSOverHTTPS()}enableDNSPrefetch(){["192.168.60.26","localhost","ty-hongmeng.github.io"].forEach(e=>{const t=document.createElement("link");t.rel="dns-prefetch",t.href="//".concat(e),document.head.appendChild(t)})}enablePreconnect(){["http://192.168.60.26:5173","https://ty-hongmeng.github.io"].forEach(e=>{const t=document.createElement("link");t.rel="preconnect",t.href=e,t.crossOrigin="anonymous",document.head.appendChild(t)})}setupDNSOverHTTPS(){}setupConnectionPooling(){this.connectionPool.enableMultiplexing&&this.enableHTTP2Multiplexing(),this.config.enableKeepAlive&&this.enableKeepAlive()}enableHTTP2Multiplexing(){}enableKeepAlive(){}setupNetworkMonitoring(){window.addEventListener("online",()=>{this.handleNetworkReconnect()}),window.addEventListener("offline",()=>{this.handleNetworkDisconnect()}),"connection"in navigator&&navigator.connection.addEventListener("change",()=>{this.handleConnectionChange()})}optimizeProtocolSelection(){"auto"===this.config.preferredProtocol&&this.autoSelectProtocol()}async autoSelectProtocol(){this.config.preferredProtocol="http"}async optimizedFetch(e,t={}){const n="".concat(Date.now(),"-").concat(Math.random());try{const s=new AbortController;this.activeConnections.set(n,s);const i=setTimeout(()=>{s.abort()},this.config.timeout),r={...t,signal:s.signal,keepalive:this.config.enableKeepAlive,cache:t.cache||"default"};this.config.enableCompression&&(r.headers={"Accept-Encoding":"gzip, deflate, br",...r.headers});const o=this.optimizeUrl(e),m=await fetch(o,r);return clearTimeout(i),this.activeConnections.delete(n),m}catch(s){if(this.activeConnections.delete(n),this.isConnectionResetError(s))return await this.retryWithFallback(e,t,n);throw s}}optimizeUrl(e){if(e.startsWith("/")||!e.includes("://")){const t="auto"===this.config.preferredProtocol?"http":this.config.preferredProtocol,n="".concat(t,"://192.168.60.26:5173");return e.startsWith("/")?"".concat(n).concat(e):"".concat(n,"/").concat(e)}return e}async retryWithFallback(e,t,n){const s=[e.replace("https://","http://"),e.replace("http://","https://"),...this.config.dnsServers.map(t=>e.replace(/\/\/[^\/]+/,"//".concat(t)))];for(let r=0;r<this.config.retryAttempts;r++)for(const e of s)try{await this.delay(this.config.retryDelay*(r+1));const s=new AbortController;this.activeConnections.set("".concat(n,"-retry-").concat(r),s);const i=await fetch(e,{...t,signal:s.signal});if(this.activeConnections.delete("".concat(n,"-retry-").concat(r)),i.ok)return i}catch(i){this.activeConnections.delete("".concat(n,"-retry-").concat(r))}throw new Error("All retry attempts failed")}async queueRequest(e){return new Promise((t,n)=>{this.requestQueue.push(async()=>{try{const n=await e();t(n)}catch(s){n(s)}}),this.processQueue()})}async processQueue(){if(!this.isProcessingQueue&&0!==this.requestQueue.length){for(this.isProcessingQueue=!0;this.requestQueue.length>0&&this.activeConnections.size<this.config.maxConcurrentRequests;){const e=this.requestQueue.shift();e&&e().catch(e=>{})}this.isProcessingQueue=!1,this.requestQueue.length>0&&setTimeout(()=>this.processQueue(),100)}}handleNetworkReconnect(){this.detectNetworkCapabilities(),this.optimizeProtocolSelection(),this.activeConnections.clear()}handleNetworkDisconnect(){this.activeConnections.forEach(e=>{e.abort()}),this.activeConnections.clear()}handleConnectionChange(){if("connection"in navigator){const e=navigator.connection;this.metrics&&(this.metrics.connectionType=e.type||"unknown",this.metrics.effectiveType=e.effectiveType||"unknown",this.metrics.downlink=e.downlink||0,this.metrics.rtt=e.rtt||0),this.adjustConfigForConnection(e.effectiveType)}}adjustConfigForConnection(e){switch(e){case"slow-2g":case"2g":this.config.timeout=3e4,this.config.maxConcurrentRequests=2,this.config.retryDelay=3e3;break;case"3g":this.config.timeout=2e4,this.config.maxConcurrentRequests=4,this.config.retryDelay=2e3;break;default:this.config.timeout=15e3,this.config.maxConcurrentRequests=6,this.config.retryDelay=1e3}}isConnectionResetError(e){return e.message.includes("ERR_CONNECTION_RESET")||e.message.includes("ECONNRESET")||e.message.includes("Connection reset")||"AbortError"===e.name}delay(e){return new Promise(t=>setTimeout(t,e))}getNetworkMetrics(){return this.metrics}getConfig(){return{...this.config}}updateConfig(e){this.config={...this.config,...e}}getActiveConnectionCount(){return this.activeConnections.size}getQueueLength(){return this.requestQueue.length}cleanup(){this.activeConnections.forEach(e=>{e.abort()}),this.activeConnections.clear(),this.requestQueue=[]}},Ce=new class{constructor(){t(this,"deviceInfo"),t(this,"memoryConfig"),t(this,"performanceConfig"),t(this,"optimizationStrategies",[]),t(this,"memoryUsage",0),t(this,"performanceObserver",null),t(this,"resizeObserver",null),this.deviceInfo=this.detectDevice(),this.memoryConfig=this.getMemoryConfig(),this.performanceConfig=this.getPerformanceConfig(),this.initializeOptimizations(),this.setupMemoryManagement(),this.setupPerformanceMonitoring()}detectDevice(){const e=navigator.userAgent,t=navigator.platform;let n="unknown",s="";if(/iPhone|iPad|iPod/.test(e)){n="iOS";const t=e.match(/OS (\d+)_(\d+)/);t&&(s="".concat(t[1],".").concat(t[2]))}else if(/Android/.test(e)){n="Android";const t=e.match(/Android (\d+\.?\d*)/);t&&(s=t[1])}else/Windows/.test(e)?n="Windows":/Mac/.test(e)&&(n="macOS");let i="unknown",r="";if(/Safari/.test(e)&&!/Chrome/.test(e)){i="Safari";const t=e.match(/Version\/(\d+\.?\d*)/);t&&(r=t[1])}else if(/Chrome/.test(e)){i="Chrome";const t=e.match(/Chrome\/(\d+\.?\d*)/);t&&(r=t[1])}else if(/Firefox/.test(e)){i="Firefox";const t=e.match(/Firefox\/(\d+\.?\d*)/);t&&(r=t[1])}else if(/MicroMessenger/.test(e)){i="WeChat";const t=e.match(/MicroMessenger\/(\d+\.?\d*)/);t&&(r=t[1])}let o="unknown";const m=window.screen.width,a=window.screen.height;/iPhone|iPod/.test(e)||"Android"===n&&m<768?o="phone":/iPad/.test(e)||"Android"===n&&m>=768&&m<1024?o="tablet":m>=1024&&(o="desktop");const c=navigator.deviceMemory||0,l=navigator.hardwareConcurrency||0,h=c<=2||l<=2||m<375;return{platform:t,os:n,osVersion:s,browser:i,browserVersion:r,deviceType:o,screenSize:{width:m,height:a},pixelRatio:window.devicePixelRatio||1,memory:c,cores:l,isLowEnd:h}}getMemoryConfig(){const e={maxCacheSize:52428800,gcThreshold:.8,enableLazyLoading:!0,enableImageOptimization:!0,enableCodeSplitting:!0,maxConcurrentRequests:6};return this.deviceInfo.isLowEnd?{...e,maxCacheSize:20971520,gcThreshold:.6,maxConcurrentRequests:3}:this.deviceInfo.memory&&this.deviceInfo.memory>=8?{...e,maxCacheSize:104857600,maxConcurrentRequests:8}:e}getPerformanceConfig(){const e={enableVirtualScrolling:!0,enableDebouncing:!0,enableThrottling:!0,animationFrameLimit:60,enableWebWorkers:!0,enableServiceWorker:!0};return this.deviceInfo.isLowEnd?{...e,animationFrameLimit:30,enableWebWorkers:!1}:e}initializeOptimizations(){this.optimizationStrategies=[{name:"iOS_Safari_Optimization",condition:e=>"iOS"===e.os&&"Safari"===e.browser,apply:e=>this.applyIOSSafariOptimizations(e),description:"iOS Safariç‰¹æ®Šä¼˜åŒ–"},{name:"Android_Chrome_Optimization",condition:e=>"Android"===e.os&&"Chrome"===e.browser,apply:e=>this.applyAndroidChromeOptimizations(e),description:"Android Chromeç‰¹æ®Šä¼˜åŒ–"},{name:"WeChat_Browser_Optimization",condition:e=>"WeChat"===e.browser,apply:e=>this.applyWeChatOptimizations(e),description:"å¾®ä¿¡æµè§ˆå™¨ç‰¹æ®Šä¼˜åŒ–"},{name:"Low_End_Device_Optimization",condition:e=>e.isLowEnd,apply:e=>this.applyLowEndDeviceOptimizations(e),description:"ä½ç«¯è®¾å¤‡ä¼˜åŒ–"},{name:"High_DPI_Optimization",condition:e=>e.pixelRatio>=2,apply:e=>this.applyHighDPIOptimizations(e),description:"é«˜DPIå±å¹•ä¼˜åŒ–"}],this.optimizationStrategies.forEach(e=>{e.condition(this.deviceInfo)&&e.apply(this.deviceInfo)})}applyIOSSafariOptimizations(e){this.fixIOSViewport(),this.optimizeIOSScrolling(),this.fixIOSViewportHeight(),this.optimizeIOSTouchEvents()}applyAndroidChromeOptimizations(e){this.optimizeAndroidMemory(),this.fixAndroidKeyboard(),this.optimizeAndroidRendering()}applyWeChatOptimizations(e){this.fixWeChatCompatibility(),this.optimizeWeChatNetworking(),this.handleWeChatLimitations()}applyLowEndDeviceOptimizations(e){this.reduceAnimations(),this.enableAggressiveLazyLoading(),this.limitConcurrentRequests(),this.enableMemoryCleanup()}applyHighDPIOptimizations(e){this.optimizeHighDPIImages(),this.optimizeHighDPIFonts(),this.optimizeHighDPICanvas()}fixIOSViewport(){const e=document.querySelector('meta[name="viewport"]');e&&(e.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover")}optimizeIOSScrolling(){document.body.style.webkitOverflowScrolling="touch";const e=document.createElement("style");e.textContent="\n      * {\n        -webkit-overflow-scrolling: touch;\n      }\n      \n      body {\n        -webkit-text-size-adjust: 100%;\n        -webkit-tap-highlight-color: transparent;\n      }\n    ",document.head.appendChild(e)}fixIOSViewportHeight(){const e=()=>{const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))};e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",()=>{setTimeout(e,100)})}optimizeIOSTouchEvents(){let e=0;document.addEventListener("touchend",t=>{const n=Date.now();n-e<=300&&t.preventDefault(),e=n},!1),document.addEventListener("touchstart",e=>{},{passive:!0})}optimizeAndroidMemory(){"memory"in performance&&setInterval(()=>{const e=performance.memory;e&&e.usedJSHeapSize/e.totalJSHeapSize>.8&&this.triggerGarbageCollection()},3e4)}fixAndroidKeyboard(){const e=window.innerHeight;window.addEventListener("resize",()=>{const t=window.innerHeight;e-t>150?document.body.classList.add("keyboard-open"):document.body.classList.remove("keyboard-open")})}optimizeAndroidRendering(){const e=document.createElement("style");e.textContent="\n      * {\n        -webkit-transform: translateZ(0);\n        -webkit-backface-visibility: hidden;\n        -webkit-perspective: 1000;\n      }\n    ",document.head.appendChild(e)}fixWeChatCompatibility(){"function"!=typeof window.history.pushState&&(window.history.pushState=function(){},window.history.replaceState=function(){});try{localStorage.setItem("test","test"),localStorage.removeItem("test")}catch(e){const t={};window.localStorage={setItem:(e,n)=>{t[e]=n},getItem:e=>t[e]||null,removeItem:e=>{delete t[e]},clear:()=>{Object.keys(t).forEach(e=>delete t[e])}}}}optimizeWeChatNetworking(){const e=window.fetch;window.fetch=function(t,n){const s={...n,cache:"no-cache",headers:{"Cache-Control":"no-cache",...null==n?void 0:n.headers}};return e(t,s)}}handleWeChatLimitations(){document.addEventListener("WeixinJSBridgeReady",()=>{}),window.wx}reduceAnimations(){const e=document.createElement("style");e.textContent="\n      *, *::before, *::after {\n        animation-duration: 0.01ms !important;\n        animation-iteration-count: 1 !important;\n        transition-duration: 0.01ms !important;\n        scroll-behavior: auto !important;\n      }\n    ",document.head.appendChild(e)}enableAggressiveLazyLoading(){const e=document.querySelectorAll("img[data-src]"),t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;n.src=n.dataset.src||"",n.removeAttribute("data-src"),t.unobserve(n)}})},{rootMargin:"50px"});e.forEach(e=>t.observe(e))}limitConcurrentRequests(){}enableMemoryCleanup(){setInterval(()=>{this.triggerGarbageCollection(),this.cleanupUnusedResources()},6e4)}optimizeHighDPIImages(){document.querySelectorAll("img").forEach(e=>{if(!e.srcset&&e.src){const t=e.src,n=t.split(".").pop(),s=t.replace(".".concat(n),"");e.srcset="".concat(t," 1x, ").concat(s,"@2x.").concat(n," 2x")}})}optimizeHighDPIFonts(){const e=document.createElement("style");e.textContent="\n      @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {\n        body {\n          -webkit-font-smoothing: antialiased;\n          -moz-osx-font-smoothing: grayscale;\n        }\n      }\n    ",document.head.appendChild(e)}optimizeHighDPICanvas(){document.querySelectorAll("canvas").forEach(e=>{const t=e.getContext("2d");if(t){const n=window.devicePixelRatio||1,s=e.getBoundingClientRect();e.width=s.width*n,e.height=s.height*n,e.style.width=s.width+"px",e.style.height=s.height+"px",t.scale(n,n)}})}triggerGarbageCollection(){"gc"in window&&"function"==typeof window.gc&&window.gc()}cleanupUnusedResources(){document.querySelectorAll("img").forEach(e=>{e.complete&&0!==e.naturalWidth||e.remove()}),"caches"in window&&caches.keys().then(e=>{e.forEach(e=>{(e.includes("old")||e.includes("temp"))&&caches.delete(e)})})}setupMemoryManagement(){"memory"in performance&&setInterval(()=>{const e=performance.memory;this.memoryUsage=e.usedJSHeapSize,this.memoryUsage/e.totalJSHeapSize>this.memoryConfig.gcThreshold&&this.triggerGarbageCollection()},1e4),"onmemorywarning"in window&&window.addEventListener("memorywarning",()=>{this.handleMemoryPressure()})}handleMemoryPressure(){this.cleanupUnusedResources(),this.memoryConfig.maxConcurrentRequests=Math.max(1,this.memoryConfig.maxConcurrentRequests-1),this.triggerGarbageCollection()}setupPerformanceMonitoring(){"PerformanceObserver"in window&&(this.performanceObserver=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"measure"===e.entryType||e.entryType})}),this.performanceObserver.observe({entryTypes:["measure","navigation"]})),document.addEventListener("visibilitychange",()=>{document.hidden?this.handlePageHidden():this.handlePageVisible()})}handlePageHidden(){this.pauseNonEssentialOperations()}handlePageVisible(){this.resumeOperations()}pauseNonEssentialOperations(){document.getAnimations().forEach(e=>e.pause())}resumeOperations(){document.getAnimations().forEach(e=>e.play())}getDeviceInfo(){return{...this.deviceInfo}}getMemoryConfig(){return{...this.memoryConfig}}getPerformanceConfig(){return{...this.performanceConfig}}getMemoryUsage(){return this.memoryUsage}updateMemoryConfig(e){this.memoryConfig={...this.memoryConfig,...e}}updatePerformanceConfig(e){this.performanceConfig={...this.performanceConfig,...e}}cleanup(){this.performanceObserver&&this.performanceObserver.disconnect(),this.resizeObserver&&this.resizeObserver.disconnect()}},Se=new class{constructor(){t(this,"metrics"),t(this,"resourceConfig"),t(this,"adaptiveConfig"),t(this,"loadingStrategies",[]),t(this,"connectionHistory",[]),t(this,"resourceQueue",[]),t(this,"isProcessingQueue",!1),t(this,"stabilityCheckInterval",null),this.metrics={latency:0,bandwidth:0,stability:1,errorRate:0,successRate:1,lastSuccessTime:Date.now(),consecutiveFailures:0},this.resourceConfig={enablePreloading:!0,enablePrefetching:!0,enableLazyLoading:!0,maxRetries:3,retryDelay:1e3,timeoutDuration:15e3,enableCompression:!0,enableCaching:!0},this.adaptiveConfig={enableAdaptiveLoading:!0,enableBandwidthDetection:!0,enableLatencyOptimization:!0,enableFailoverMechanism:!0,enableProgressiveLoading:!0},this.initialize()}async initialize(){this.initializeLoadingStrategies(),await this.detectInitialConnectionQuality(),this.setupConnectionMonitoring(),this.setupResourceOptimization(),this.startStabilityChecks()}initializeLoadingStrategies(){this.loadingStrategies=[{name:"high_quality_connection",priority:1,condition:e=>e.stability>.8&&e.latency<100,execute:()=>this.executeHighQualityStrategy(),description:"é«˜è´¨é‡è¿æ¥ç­–ç•¥"},{name:"medium_quality_connection",priority:2,condition:e=>e.stability>.5&&e.latency<300,execute:()=>this.executeMediumQualityStrategy(),description:"ä¸­ç­‰è´¨é‡è¿æ¥ç­–ç•¥"},{name:"low_quality_connection",priority:3,condition:e=>e.stability>.2&&e.latency<1e3,execute:()=>this.executeLowQualityStrategy(),description:"ä½è´¨é‡è¿æ¥ç­–ç•¥"},{name:"poor_connection",priority:4,condition:e=>e.stability<=.2||e.latency>=1e3,execute:()=>this.executePoorConnectionStrategy(),description:"å·®è¿æ¥ç­–ç•¥"},{name:"offline_mode",priority:5,condition:e=>e.consecutiveFailures>5,execute:()=>this.executeOfflineStrategy(),description:"ç¦»çº¿æ¨¡å¼ç­–ç•¥"}],this.loadingStrategies.sort((e,t)=>e.priority-t.priority)}async detectInitialConnectionQuality(){let e=0;for(let t=0;t<3;t++){const n=performance.now();await new Promise(e=>setTimeout(e,10*Math.random()+20));const s=performance.now()-n;e+=s,this.recordConnectionAttempt(!0,s),t<2&&await this.delay(100)}this.metrics.latency=e/3,this.metrics.successRate=1,this.metrics.errorRate=0,this.metrics.stability=this.calculateStability()}recordConnectionAttempt(e,t){const n={timestamp:Date.now(),success:e,latency:t};this.connectionHistory.push(n),this.connectionHistory.length>100&&(this.connectionHistory=this.connectionHistory.slice(-50)),this.updateMetrics()}updateMetrics(){const e=this.connectionHistory.slice(-20);if(0===e.length)return;const t=e.filter(e=>e.success),n=e.filter(e=>!e.success);this.metrics.successRate=t.length/e.length,this.metrics.errorRate=n.length/e.length,t.length>0?(this.metrics.latency=t.reduce((e,t)=>e+t.latency,0)/t.length,this.metrics.lastSuccessTime=Math.max(...t.map(e=>e.timestamp)),this.metrics.consecutiveFailures=0):this.metrics.consecutiveFailures=n.length,this.metrics.stability=this.calculateStability()}calculateStability(){if(this.connectionHistory.length<5)return.5;const e=this.connectionHistory.slice(-20),t=e.filter(e=>e.success).length/e.length,n=e.filter(e=>e.success).map(e=>e.latency);let s=1;if(n.length>1){const e=n.reduce((e,t)=>e+t,0)/n.length,t=n.reduce((t,n)=>t+Math.pow(n-e,2),0)/n.length,i=Math.sqrt(t);s=Math.max(0,1-i/e)}return.7*t+.3*s}setupConnectionMonitoring(){if(window.addEventListener("online",()=>{this.handleNetworkReconnect()}),window.addEventListener("offline",()=>{this.handleNetworkDisconnect()}),"connection"in navigator){const e=navigator.connection;e.addEventListener("change",()=>{this.handleConnectionChange(e)})}}setupResourceOptimization(){this.interceptFetchRequests(),this.resourceConfig.enablePreloading&&this.setupResourcePreloading(),this.resourceConfig.enableLazyLoading&&this.setupLazyLoading()}interceptFetchRequests(){const e=window.fetch;window.fetch=async(t,n)=>{"string"==typeof t||t.toString();const s=performance.now();try{const i=this.getCurrentBestStrategy();i&&await i.execute();const r=await this.executeOptimizedRequest(e,t,n),o=performance.now();return this.recordConnectionAttempt(!0,o-s),r}catch(i){const r=performance.now();return this.recordConnectionAttempt(!1,r-s),await this.handleRequestFailure(e,t,n,i)}}}async executeOptimizedRequest(e,t,n){const s={...n,signal:(null==n?void 0:n.signal)||AbortSignal.timeout(this.resourceConfig.timeoutDuration)};return this.resourceConfig.enableCompression&&(s.headers={"Accept-Encoding":"gzip, deflate, br",...s.headers}),this.resourceConfig.enableCaching&&!s.cache&&(s.cache=this.metrics.stability>.7?"default":"no-cache"),await e(t,s)}async handleRequestFailure(e,t,n,s){for(let r=1;r<=this.resourceConfig.maxRetries;r++)try{return await this.delay(this.resourceConfig.retryDelay*r),await e(t,{...n,signal:AbortSignal.timeout(this.resourceConfig.timeoutDuration*(r+1))})}catch(i){}throw s}getCurrentBestStrategy(){for(const e of this.loadingStrategies)if(e.condition(this.metrics))return e;return null}async executeHighQualityStrategy(){return this.resourceConfig.maxRetries=2,this.resourceConfig.retryDelay=500,this.resourceConfig.timeoutDuration=1e4,this.resourceConfig.enablePreloading=!0,this.resourceConfig.enablePrefetching=!0,!0}async executeMediumQualityStrategy(){return this.resourceConfig.maxRetries=3,this.resourceConfig.retryDelay=1e3,this.resourceConfig.timeoutDuration=15e3,this.resourceConfig.enablePreloading=!0,this.resourceConfig.enablePrefetching=!1,!0}async executeLowQualityStrategy(){return this.resourceConfig.maxRetries=5,this.resourceConfig.retryDelay=2e3,this.resourceConfig.timeoutDuration=3e4,this.resourceConfig.enablePreloading=!1,this.resourceConfig.enablePrefetching=!1,!0}async executePoorConnectionStrategy(){return this.resourceConfig.maxRetries=8,this.resourceConfig.retryDelay=5e3,this.resourceConfig.timeoutDuration=6e4,this.resourceConfig.enablePreloading=!1,this.resourceConfig.enablePrefetching=!1,this.resourceConfig.enableLazyLoading=!0,!0}async executeOfflineStrategy(){if("caches"in window)try{const e=await caches.open("app-cache-v1");if(await e.match(window.location.href))return!0}catch(e){}return this.showOfflineMessage(),!1}setupResourcePreloading(){}setupLazyLoading(){const e=document.querySelectorAll("img[data-src]"),t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const n=e.target;this.loadImageWithRetry(n),t.unobserve(n)}})},{rootMargin:"100px"});e.forEach(e=>t.observe(e))}async loadImageWithRetry(e){const t=e.dataset.src;if(t)for(let s=1;s<=this.resourceConfig.maxRetries;s++)try{await new Promise((e,n)=>{const s=new Image;s.onload=e,s.onerror=n,s.src=t}),e.src=t,e.removeAttribute("data-src");break}catch(n){s<this.resourceConfig.maxRetries?await this.delay(this.resourceConfig.retryDelay*s):e.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIEVycm9yPC90ZXh0Pjwvc3ZnPg=="}}startStabilityChecks(){this.stabilityCheckInterval=window.setInterval(()=>{this.performStabilityCheck()},3e4)}async performStabilityCheck(){try{const e=performance.now(),t=await fetch("http://192.168.60.26:5173/",{method:"HEAD",signal:AbortSignal.timeout(5e3),cache:"no-cache"}),n=performance.now();this.recordConnectionAttempt(t.ok,n-e)}catch(e){this.recordConnectionAttempt(!1,5e3)}}handleNetworkReconnect(){this.metrics.consecutiveFailures=0,this.metrics.lastSuccessTime=Date.now(),this.detectInitialConnectionQuality()}handleNetworkDisconnect(){this.metrics.consecutiveFailures=10,this.executeOfflineStrategy()}handleConnectionChange(e){this.adjustStrategyForConnection(e.effectiveType)}adjustStrategyForConnection(e){switch(e){case"slow-2g":case"2g":this.executePoorConnectionStrategy();break;case"3g":this.executeLowQualityStrategy();break;default:this.executeMediumQualityStrategy()}}showOfflineMessage(){if(document.getElementById("offline-message"))return;const e=document.createElement("div");e.id="offline-message",e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      background: #f56565;\n      color: white;\n      text-align: center;\n      padding: 12px;\n      font-size: 14px;\n      font-weight: 600;\n      z-index: 10000;\n      box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n    ",e.textContent="âš ï¸ ç½‘ç»œè¿æ¥ä¸ç¨³å®šï¼Œæ­£åœ¨å°è¯•æ¢å¤...",document.body.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},5e3)}delay(e){return new Promise(t=>setTimeout(t,e))}getConnectionMetrics(){return{...this.metrics}}getResourceConfig(){return{...this.resourceConfig}}updateResourceConfig(e){this.resourceConfig={...this.resourceConfig,...e}}getConnectionHistory(){return[...this.connectionHistory]}cleanup(){this.stabilityCheckInterval&&(clearInterval(this.stabilityCheckInterval),this.stabilityCheckInterval=null)}},je=new class{constructor(e){t(this,"config"),t(this,"status"),t(this,"isInitialized",!1),t(this,"monitoringInterval",null),t(this,"diagnosticHistory",[]),this.config={enableErrorHandling:!0,enableNetworkOptimization:!0,enableDeviceOptimization:!0,enableConnectionStability:!0,enableAutoRecovery:!0,enableDiagnostics:!0,monitoringInterval:6e4,...e},this.status={errorHandler:!1,networkOptimizer:!1,deviceOptimizer:!1,connectionManager:!1,overallHealth:0},this.initialize()}async initialize(){try{await this.initializeModules(),this.setupGlobalErrorHandling(),this.config.enableDiagnostics&&this.startMonitoring(),this.config.enableAutoRecovery&&this.setupAutoRecovery(),this.isInitialized=!0,await this.performDiagnostic()}catch(e){this.handleInitializationFailure(e)}}async initializeModules(){const e=[];this.config.enableErrorHandling&&e.push(this.initializeErrorHandler()),this.config.enableNetworkOptimization&&e.push(this.initializeNetworkOptimizer()),this.config.enableDeviceOptimization&&e.push(this.initializeDeviceOptimizer()),this.config.enableConnectionStability&&e.push(this.initializeConnectionManager()),await Promise.allSettled(e),this.updateOverallHealth()}async initializeErrorHandler(){try{this.status.errorHandler=!0}catch(e){this.status.errorHandler=!1}}async initializeNetworkOptimizer(){try{this.status.networkOptimizer=!0}catch(e){this.status.networkOptimizer=!1}}async initializeDeviceOptimizer(){try{this.status.deviceOptimizer=!0}catch(e){this.status.deviceOptimizer=!1}}async initializeConnectionManager(){try{this.status.connectionManager=!0}catch(e){this.status.connectionManager=!1}}setupGlobalErrorHandling(){window.addEventListener("unhandledrejection",e=>{this.handleGlobalError(e.reason)}),window.addEventListener("error",e=>{this.handleGlobalError(e.error)}),window.addEventListener("error",e=>{e.target&&e.target!==window&&this.handleResourceError(e.target)},!0)}async handleGlobalError(e){this.isConnectionResetError(e)?await this.handleConnectionResetError(e):this.isNetworkError(e)?await this.handleNetworkError(e):await this.handleGenericError(e)}handleResourceError(e){e.tagName.toLowerCase(),e.getAttribute("src")||e.getAttribute("href"),this.retryResourceLoading(e)}retryResourceLoading(e){const t=e.tagName.toLowerCase();"script"===t?this.retryScriptLoading(e):"link"===t?this.retryStylesheetLoading(e):"img"===t&&this.retryImageLoading(e)}retryScriptLoading(e){var t;const n=document.createElement("script");n.src=e.src,n.async=e.async,n.defer=e.defer,n.onload=()=>{},n.onerror=()=>{this.tryAlternativeScriptSources(n)},null==(t=e.parentNode)||t.replaceChild(n,e)}retryStylesheetLoading(e){var t;const n=document.createElement("link");n.rel=e.rel,n.href=e.href,n.type=e.type,n.onload=()=>{},n.onerror=()=>{},null==(t=e.parentNode)||t.replaceChild(n,e)}retryImageLoading(e){const t=e.src,n=t.includes("?")?"&":"?";e.src="".concat(t).concat(n,"_retry=").concat(Date.now()),e.onerror=()=>{e.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZGRkIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5OSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlIEVycm9yPC90ZXh0Pjwvc3ZnPg=="}}tryAlternativeScriptSources(e){const t=[e.src.replace("https://","http://"),e.src.replace("http://","https://")];let n=0;const s=()=>{var i;if(n>=t.length)return;const r=document.createElement("script");r.src=t[n],r.async=e.async,r.defer=e.defer,r.onload=()=>{},r.onerror=()=>{n++,s()},null==(i=e.parentNode)||i.appendChild(r)};s()}async handleConnectionResetError(e){const t=[()=>this.switchProtocol(),()=>this.retryWithDelay(),()=>this.useAlternativeEndpoint(),()=>this.enableOfflineMode()];for(const s of t)try{if(await s())break}catch(n){}}async handleNetworkError(e){navigator.onLine?await this.retryWithDelay():await this.enableOfflineMode()}async handleGenericError(e){this.shouldRefreshPage(e)&&setTimeout(()=>{window.location.reload()},3e3)}async switchProtocol(){const e=window.location.href;let t;t=e.startsWith("https://")?e.replace("https://","http://"):e.replace("http://","https://");try{if((await fetch(t,{method:"HEAD",signal:AbortSignal.timeout(5e3)})).ok)return window.location.href=t,!0}catch(n){}return!1}async retryWithDelay(){await this.delay(2e3);try{if((await fetch(window.location.href,{method:"HEAD",signal:AbortSignal.timeout(1e4)})).ok)return window.location.reload(),!0}catch(e){}return!1}async useAlternativeEndpoint(){const e=["http://192.168.60.26:5173/","http://localhost:5173/","https://ty-hongmeng.github.io/"];for(const n of e)try{if((await fetch(n,{method:"HEAD",signal:AbortSignal.timeout(5e3)})).ok)return window.location.href=n,!0}catch(t){}return!1}async enableOfflineMode(){return this.showOfflineNotification(),await this.loadCachedContent()}showOfflineNotification(){const e=document.createElement("div");e.style.cssText="\n      position: fixed;\n      top: 20px;\n      left: 50%;\n      transform: translateX(-50%);\n      background: #fed7d7;\n      color: #c53030;\n      padding: 12px 20px;\n      border-radius: 8px;\n      font-size: 14px;\n      font-weight: 600;\n      z-index: 10000;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.2);\n    ",e.innerHTML='\n      âš ï¸ ç½‘ç»œè¿æ¥é—®é¢˜ï¼Œæ­£åœ¨å°è¯•æ¢å¤...\n      <button onclick="window.location.reload()" style="margin-left: 10px; padding: 4px 8px; background: white; color: #c53030; border: none; border-radius: 4px; cursor: pointer;">é‡è¯•</button>\n    ',document.body.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},1e4)}async loadCachedContent(){try{if("caches"in window){const e=await caches.open("app-cache-v1"),t=await e.match(window.location.href);if(t){const e=await t.text();return document.documentElement.innerHTML=e,!0}}}catch(e){}return!1}setupAutoRecovery(){window.addEventListener("online",()=>{this.performAutoRecovery()}),setInterval(()=>{this.performHealthCheck()},3e4)}async performAutoRecovery(){try{await this.reinitializeFailedModules(),this.clearErrorStates(),this.shouldReloadAfterRecovery()&&setTimeout(()=>{window.location.reload()},1e3)}catch(e){}}async reinitializeFailedModules(){!this.status.errorHandler&&this.config.enableErrorHandling&&await this.initializeErrorHandler(),!this.status.networkOptimizer&&this.config.enableNetworkOptimization&&await this.initializeNetworkOptimizer(),!this.status.deviceOptimizer&&this.config.enableDeviceOptimization&&await this.initializeDeviceOptimizer(),!this.status.connectionManager&&this.config.enableConnectionStability&&await this.initializeConnectionManager(),this.updateOverallHealth()}clearErrorStates(){this.status.errorHandler&&ke.clearErrorLog(),document.querySelectorAll('[id*="error"], [id*="offline"]').forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)})}startMonitoring(){this.monitoringInterval=window.setInterval(()=>{this.performDiagnostic()},this.config.monitoringInterval)}async performDiagnostic(){const e={timestamp:Date.now(),deviceInfo:this.status.deviceOptimizer?Ce.getDeviceInfo():null,networkMetrics:this.status.networkOptimizer?De.getNetworkMetrics():null,connectionMetrics:this.status.connectionManager?Se.getConnectionMetrics():null,errorLog:this.status.errorHandler?ke.getErrorLog():[],recommendations:[],overallScore:0};return e.recommendations=this.generateRecommendations(e),e.overallScore=this.calculateOverallScore(e),this.diagnosticHistory.push(e),this.diagnosticHistory.length>50&&(this.diagnosticHistory=this.diagnosticHistory.slice(-25)),e}generateRecommendations(e){const t=[];return e.errorLog.length>5&&t.push("æ£€æµ‹åˆ°è¾ƒå¤šé”™è¯¯ï¼Œå»ºè®®æ£€æŸ¥ç½‘ç»œè¿æ¥"),e.networkMetrics&&e.networkMetrics.latency>1e3&&t.push("ç½‘ç»œå»¶è¿Ÿè¾ƒé«˜ï¼Œå»ºè®®åˆ‡æ¢åˆ°æ›´ç¨³å®šçš„ç½‘ç»œ"),e.connectionMetrics&&e.connectionMetrics.stability<.5&&t.push("è¿æ¥ä¸ç¨³å®šï¼Œå»ºè®®å¯ç”¨ç¦»çº¿æ¨¡å¼"),e.deviceInfo&&e.deviceInfo.isLowEnd&&t.push("æ£€æµ‹åˆ°ä½ç«¯è®¾å¤‡ï¼Œå·²å¯ç”¨æ€§èƒ½ä¼˜åŒ–æ¨¡å¼"),t}calculateOverallScore(e){let t=100;return t-=2*e.errorLog.length,e.networkMetrics&&(t-=Math.min(e.networkMetrics.latency/10,30)),e.connectionMetrics&&(t*=e.connectionMetrics.stability),Math.max(0,Math.min(100,t))}async performHealthCheck(){this.updateOverallHealth(),this.status.overallHealth<.5&&await this.performAutoRecovery()}updateOverallHealth(){const e=[this.status.errorHandler,this.status.networkOptimizer,this.status.deviceOptimizer,this.status.connectionManager],t=e.filter(Boolean).length;this.status.overallHealth=t/e.length}handleInitializationFailure(e){this.showInitializationFailureNotification(),setTimeout(()=>{this.initialize()},5e3)}showInitializationFailureNotification(){const e=document.createElement("div");e.style.cssText="\n      position: fixed;\n      top: 20px;\n      left: 50%;\n      transform: translateX(-50%);\n      background: #f56565;\n      color: white;\n      padding: 12px 20px;\n      border-radius: 8px;\n      font-size: 14px;\n      font-weight: 600;\n      z-index: 10000;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.2);\n    ",e.textContent="âš ï¸ ç§»åŠ¨ç«¯ä¼˜åŒ–åˆå§‹åŒ–å¤±è´¥ï¼Œæ­£åœ¨é‡è¯•...",document.body.appendChild(e),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e)},5e3)}isConnectionResetError(e){return e.message.includes("ERR_CONNECTION_RESET")||e.message.includes("ECONNRESET")||e.message.includes("Connection reset")}isNetworkError(e){return e.message.includes("NetworkError")||e.message.includes("Failed to fetch")||e.message.includes("ERR_NETWORK")}shouldRefreshPage(e){return e.message.includes("ChunkLoadError")||e.message.includes("Loading chunk")||e.message.includes("Loading CSS chunk")}shouldReloadAfterRecovery(){return this.status.overallHealth<.7}delay(e){return new Promise(t=>setTimeout(t,e))}getOptimizationStatus(){return{...this.status}}getConfig(){return{...this.config}}updateConfig(e){this.config={...this.config,...e}}getDiagnosticHistory(){return[...this.diagnosticHistory]}getLatestDiagnostic(){return this.diagnosticHistory.length>0?this.diagnosticHistory[this.diagnosticHistory.length-1]:null}async triggerDiagnostic(){return await this.performDiagnostic()}async triggerRecovery(){await this.performAutoRecovery()}cleanup(){this.monitoringInterval&&(clearInterval(this.monitoringInterval),this.monitoringInterval=null),this.status.errorHandler&&ke.clearErrorLog(),this.status.networkOptimizer&&De.cleanup(),this.status.deviceOptimizer&&Ce.cleanup(),this.status.connectionManager&&Se.cleanup()}},Re=new class{constructor(){t(this,"browserInfo"),t(this,"networkConfig"),t(this,"connectionPool",new Map),t(this,"retryAttempts",new Map),this.browserInfo=this.detectBrowser(),this.networkConfig=this.getOptimalNetworkConfig(),this.initializeOptimizations()}detectBrowser(){const e=navigator.userAgent,t=navigator.platform,n=/MicroMessenger/i.test(e),s=/QQ/i.test(e)&&!/MicroMessenger/i.test(e),i=/Safari/i.test(e)&&!/Chrome/i.test(e)&&!/CriOS/i.test(e),r=/Chrome/i.test(e)&&!/Edg/i.test(e),o=/Firefox/i.test(e),m=/Edg/i.test(e);let a="unknown",c="unknown",l="unknown";if(n){l="WeChat";const t=e.match(/MicroMessenger\/([0-9.]+)/);a=t?t[1]:"unknown",c="WebKit"}else if(s){l="QQ Browser";const t=e.match(/QQ\/([0-9.]+)/);a=t?t[1]:"unknown",c="WebKit"}else if(i){l="Safari";const t=e.match(/Version\/([0-9.]+)/);a=t?t[1]:"unknown",c="WebKit"}else if(r){l="Chrome";const t=e.match(/Chrome\/([0-9.]+)/);a=t?t[1]:"unknown",c="Blink"}else if(o){l="Firefox";const t=e.match(/Firefox\/([0-9.]+)/);a=t?t[1]:"unknown",c="Gecko"}else if(m){l="Edge";const t=e.match(/Edg\/([0-9.]+)/);a=t?t[1]:"unknown",c="Blink"}return{name:l,version:a,engine:c,platform:t,isWeChat:n,isQQ:s,isSafari:i,isChrome:r,isFirefox:o,isEdge:m}}getOptimalNetworkConfig(){const e={timeout:1e4,retryCount:3,retryDelay:1e3,useKeepAlive:!0,preferHTTP2:!0,enableCompression:!0};return this.browserInfo.isWeChat?{...e,timeout:15e3,retryCount:5,retryDelay:2e3,useKeepAlive:!1,preferHTTP2:!1}:this.browserInfo.isQQ?{...e,timeout:12e3,retryCount:4,retryDelay:1500,preferHTTP2:!1}:this.browserInfo.isSafari?{...e,timeout:8e3,retryCount:3,retryDelay:800,useKeepAlive:!0,preferHTTP2:!0}:this.browserInfo.isChrome?{...e,timeout:6e3,retryCount:2,retryDelay:500,useKeepAlive:!0,preferHTTP2:!0}:e}initializeOptimizations(){this.setupGlobalErrorHandling(),this.optimizeNetworkConnections(),this.applyBrowserSpecificOptimizations(),this.setupNetworkMonitoring()}setupGlobalErrorHandling(){window.addEventListener("unhandledrejection",e=>{var t,n;(null==(n=null==(t=e.reason)?void 0:t.message)?void 0:n.includes("ERR_CONNECTION_RESET"))&&(this.handleConnectionReset(e.reason),e.preventDefault())}),window.addEventListener("error",e=>{var t,n;(null==(n=null==(t=e.error)?void 0:t.message)?void 0:n.includes("ERR_CONNECTION_RESET"))&&this.handleConnectionReset(e.error)})}handleConnectionReset(e){this.connectionPool.forEach(e=>{e.abort()}),this.connectionPool.clear(),setTimeout(()=>{this.retryFailedConnections()},this.networkConfig.retryDelay)}retryFailedConnections(){}optimizeNetworkConnections(){this.preconnectToDomains(["ty-hongmeng.github.io","192.168.60.26:5173"]),this.setupDNSPrefetch(["ty-hongmeng.github.io","fonts.googleapis.com","cdnjs.cloudflare.com"])}preconnectToDomains(e){e.forEach(e=>{const t=document.createElement("link");t.rel="preconnect",t.href=e.startsWith("http")?e:"https://".concat(e),document.head.appendChild(t)})}setupDNSPrefetch(e){e.forEach(e=>{const t=document.createElement("link");t.rel="dns-prefetch",t.href=e.startsWith("http")?e:"https://".concat(e),document.head.appendChild(t)})}applyBrowserSpecificOptimizations(){this.browserInfo.isWeChat?this.applyWeChatOptimizations():this.browserInfo.isQQ?this.applyQQBrowserOptimizations():this.browserInfo.isSafari?this.applySafariOptimizations():this.browserInfo.isChrome&&this.applyChromeOptimizations()}applyWeChatOptimizations(){"serviceWorker"in navigator&&navigator.serviceWorker.getRegistrations().then(e=>{e.forEach(e=>e.unregister())}),this.setupWeChatNetworkConfig()}setupWeChatNetworkConfig(){const e=window.fetch;window.fetch=async(t,n)=>{const s="string"==typeof t?t:t.toString(),i=new Headers(null==n?void 0:n.headers);i.set("Cache-Control","no-cache"),i.set("Pragma","no-cache");const r={...n,headers:i,cache:"no-cache",mode:"cors",credentials:"omit"};return this.retryFetch(s,r,e)}}applyQQBrowserOptimizations(){document.documentElement.style.setProperty("-webkit-tap-highlight-color","transparent"),document.documentElement.style.setProperty("-webkit-touch-callout","none")}applySafariOptimizations(){document.documentElement.style.setProperty("-webkit-overflow-scrolling","touch"),this.setupSafariFetchFix()}setupSafariFetchFix(){const e=window.fetch;window.fetch=async(t,n)=>{const s="string"==typeof t?t:t.toString(),i={...n,credentials:"same-origin",mode:"cors"};return this.retryFetch(s,i,e)}}applyChromeOptimizations(){if("connection"in navigator){const e=navigator.connection;e&&e.effectiveType&&this.adjustConfigForNetworkType(e.effectiveType)}}adjustConfigForNetworkType(e){switch(e){case"slow-2g":case"2g":this.networkConfig.timeout=3e4,this.networkConfig.retryCount=5,this.networkConfig.retryDelay=3e3;break;case"3g":this.networkConfig.timeout=2e4,this.networkConfig.retryCount=4,this.networkConfig.retryDelay=2e3}}setupNetworkMonitoring(){if(window.addEventListener("online",()=>{this.handleNetworkReconnect()}),window.addEventListener("offline",()=>{this.handleNetworkDisconnect()}),"connection"in navigator){const e=navigator.connection;e&&e.addEventListener("change",()=>{this.handleNetworkChange(e)})}}handleNetworkReconnect(){this.retryAttempts.clear(),this.optimizeNetworkConnections()}handleNetworkDisconnect(){this.connectionPool.forEach(e=>{e.abort()}),this.connectionPool.clear()}handleNetworkChange(e){this.adjustConfigForNetworkType(e.effectiveType)}async retryFetch(e,t,n){const s="".concat(e,"_").concat(Date.now());let i=null;for(let m=0;m<this.networkConfig.retryCount;m++)try{const i=new AbortController;this.connectionPool.set(s,i);const r=setTimeout(()=>{i.abort()},this.networkConfig.timeout),o=await n(e,{...t,signal:i.signal});if(clearTimeout(r),this.connectionPool.delete(s),o.ok)return this.retryAttempts.delete(e),o;throw new Error("HTTP ".concat(o.status,": ").concat(o.statusText))}catch(o){i=o,this.connectionPool.delete(s),o instanceof Error&&o.message.includes("ERR_CONNECTION_RESET")&&this.handleConnectionReset(o),m<this.networkConfig.retryCount-1&&await new Promise(e=>setTimeout(e,this.networkConfig.retryDelay*(m+1)))}const r=this.retryAttempts.get(e)||0;throw this.retryAttempts.set(e,r+1),i||new Error("Failed to fetch ".concat(e," after ").concat(this.networkConfig.retryCount," attempts"))}createOptimizedFetch(){return async(e,t)=>{const n="string"==typeof e?e:e.toString(),s={...t,cache:"no-cache",mode:"cors",credentials:"omit",headers:{...null==t?void 0:t.headers,"Cache-Control":"no-cache",Pragma:"no-cache"}};return this.retryFetch(n,s,fetch)}}getBrowserInfo(){return this.browserInfo}getNetworkConfig(){return this.networkConfig}isProblematicBrowser(){return this.browserInfo.isWeChat||this.browserInfo.isQQ}getSuggestedSolutions(){const e=[];return this.browserInfo.isWeChat?(e.push("å°è¯•åœ¨ç³»ç»Ÿé»˜è®¤æµè§ˆå™¨ä¸­æ‰“å¼€"),e.push("æ¸…é™¤å¾®ä¿¡æµè§ˆå™¨ç¼“å­˜"),e.push("æ›´æ–°å¾®ä¿¡åˆ°æœ€æ–°ç‰ˆæœ¬")):this.browserInfo.isQQ?(e.push("å°è¯•åœ¨Chromeæˆ–Safariä¸­æ‰“å¼€"),e.push("æ¸…é™¤QQæµè§ˆå™¨ç¼“å­˜"),e.push("æ£€æŸ¥QQæµè§ˆå™¨çš„ç½‘ç»œè®¾ç½®")):this.browserInfo.isSafari&&(e.push("æ£€æŸ¥Safariçš„éšç§è®¾ç½®"),e.push("æ¸…é™¤Safariç¼“å­˜å’ŒCookie"),e.push("æ›´æ–°iOSåˆ°æœ€æ–°ç‰ˆæœ¬")),e.push("å°è¯•åˆ‡æ¢åˆ°ç§»åŠ¨æ•°æ®ç½‘ç»œ"),e.push("é‡å¯è®¾å¤‡çš„ç½‘ç»œè¿æ¥"),e.push("è”ç³»æŠ€æœ¯æ”¯æŒè·å–å¸®åŠ©"),e}};Re.createOptimizedFetch();const Ve=new class{constructor(){t(this,"retryCount",0),t(this,"maxRetries",3),t(this,"retryDelay",2e3),t(this,"connectionCheckInterval",null),this.initializeApp(),this.setupNetworkMonitoring(),this.initializeMobileOptimizations()}async initializeMobileOptimizations(){try{if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768){if(this.updateLoaderText("æ­£åœ¨ä¼˜åŒ–ç§»åŠ¨ç«¯ä½“éªŒ..."),navigator.connection){const e=navigator.connection;"slow-2g"!==e.effectiveType&&"2g"!==e.effectiveType||(this.updateLoaderText("æ£€æµ‹åˆ°æ…¢é€Ÿç½‘ç»œï¼Œæ­£åœ¨å‹ç¼©èµ„æº..."),document.documentElement.classList.add("mobile-minimal-mode"))}this.updateLoaderText("é¢„åŠ è½½ç§»åŠ¨ç«¯ç»„ä»¶..."),await this.preloadMobileComponents()}je.getOptimizationStatus(),Re.getBrowserInfo(),Re.isProblematicBrowser()&&(Re.getSuggestedSolutions(),this.applyProblematicBrowserOptimizations()),Ee.optimizeMobileCache(),await Ee.preloadCriticalResources(),await je.triggerDiagnostic()}catch(e){}}async preloadMobileComponents(){try{const e=[()=>o(()=>Promise.resolve().then(()=>$),void 0),()=>o(()=>import("./MobileErrorPage-Rl0LEM0p.js"),__vite__mapDeps([22,1,4,3,5,6])),()=>o(()=>import("./MobileDiagnostic-oUw_0MEv.js"),__vite__mapDeps([9,1,4,3,5,6]))];await Promise.allSettled(e.map(e=>e()))}catch(e){}}applyProblematicBrowserOptimizations(){try{document.documentElement.classList.add("problematic-browser");const e=document.createElement("style");e.textContent="\n        .problematic-browser * {\n          animation-duration: 0.01ms !important;\n          animation-delay: 0.01ms !important;\n          transition-duration: 0.01ms !important;\n          transition-delay: 0.01ms !important;\n        }\n      ",document.head.appendChild(e)}catch(e){}}setupNetworkMonitoring(){window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),window.addEventListener("mobileConnectionChange",e=>{const{type:t,networkState:n}=e.detail;switch(t){case"unstable":this.updateLoaderText("æ£€æµ‹åˆ°ç½‘ç»œä¸ç¨³å®šï¼Œæ­£åœ¨ä¼˜åŒ–è¿æ¥...");break;case"restored":this.updateLoaderText("ç½‘ç»œè¿æ¥å·²æ¢å¤")}}),this.connectionCheckInterval=setInterval(()=>{this.checkNetworkConnection()},3e4)}async checkNetworkConnection(){try{return navigator.onLine}catch(e){return navigator.onLine}}handleOnline(){this.updateLoaderText("ç½‘ç»œè¿æ¥å·²æ¢å¤ï¼Œæ­£åœ¨é‡æ–°åˆå§‹åŒ–..."),this.retryCount=0,setTimeout(()=>{this.initializeApp()},1e3)}handleOffline(){this.updateLoaderText("ç½‘ç»œè¿æ¥å·²æ–­å¼€ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®"),this.showNetworkError()}async initializeApp(){try{if(this.updateLoaderText("æ­£åœ¨åˆå§‹åŒ–å…¼å®¹æ€§æ”¯æŒ..."),(()=>{if(/iPhone|iPad|iPod/.test(navigator.userAgent)){const e=()=>{const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))};e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",()=>{setTimeout(e,100)})}/Android/.test(navigator.userAgent)&&document.addEventListener("touchstart",()=>{},{passive:!0}),"undefined"==typeof console&&(window.console={log:()=>{},warn:()=>{},error:()=>{},info:()=>{},debug:()=>{}}),window.requestAnimationFrame||(window.requestAnimationFrame=e=>window.setTimeout(e,1e3/60)),window.cancelAnimationFrame||(window.cancelAnimationFrame=e=>{clearTimeout(e)})})(),navigator,(()=>{try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}})(),CSS.supports("display","flex"),CSS.supports("display","grid"),this.updateLoaderText("æ­£åœ¨åˆå§‹åŒ–åº”ç”¨..."),!navigator.onLine)return void this.handleOfflineState();await this.preloadCriticalResources(),await this.registerServiceWorker(),this.renderApp()}catch(e){this.handleInitializationError(e)}}async preloadCriticalResources(){try{this.updateLoaderText("æ­£åœ¨åŠ è½½æ ¸å¿ƒèµ„æº...");const e=document.createElement("link");e.rel="prefetch",e.href="/timesheet-management-system/favicon.svg",document.head.appendChild(e),await new Promise(e=>setTimeout(e,100))}catch(e){}}async registerServiceWorker(){if("serviceWorker"in navigator&&"https:"===window.location.protocol)try{this.updateLoaderText("æ­£åœ¨æ³¨å†ŒæœåŠ¡å·¥ä½œè€…..."),(await navigator.serviceWorker.register("/timesheet-management-system/sw.js",{scope:"/timesheet-management-system/"})).addEventListener("updatefound",()=>{})}catch(e){}}renderApp(){try{this.updateLoaderText("æ­£åœ¨å¯åŠ¨åº”ç”¨...");const e=document.getElementById("root");if(!e)throw new Error("æ‰¾ä¸åˆ°æ ¹å®¹å™¨å…ƒç´ ");R(e).render(h.jsxDEV(l.StrictMode,{children:h.jsxDEV(ve,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/main.tsx",lineNumber:280,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/main.tsx",lineNumber:279,columnNumber:9},this)),setTimeout(()=>{window.hideInitialLoader&&window.hideInitialLoader()},500)}catch(e){this.handleInitializationError(e)}}handleOfflineState(){this.updateLoaderText("å½“å‰å¤„äºç¦»çº¿çŠ¶æ€"),this.showNetworkError(),setTimeout(()=>{try{this.renderApp()}catch(e){}},2e3)}handleInitializationError(e){var t,n,s,i,r;if(this.retryCount++,(null==(t=e.message)?void 0:t.includes("fetch"))||(null==(n=e.message)?void 0:n.includes("network"))||(null==(s=e.message)?void 0:s.includes("Failed to import"))||null==(i=e.message)||i.includes("ERR_CONNECTION_RESET"),null==(r=e.message)?void 0:r.includes("ERR_CONNECTION_RESET"))return this.updateLoaderText("æ£€æµ‹åˆ°è¿æ¥é‡ç½®é”™è¯¯ï¼Œæ­£åœ¨åº”ç”¨ä¿®å¤ç­–ç•¥..."),void je.triggerRecovery().then(()=>{setTimeout(()=>{this.initializeApp()},2e3)}).catch(t=>{this.continueWithStandardRetry(e)});this.continueWithStandardRetry(e)}continueWithStandardRetry(e){var t,n,s;if(((null==(t=e.message)?void 0:t.includes("fetch"))||(null==(n=e.message)?void 0:n.includes("network"))||(null==(s=e.message)?void 0:s.includes("Failed to import")))&&this.retryCount<=this.maxRetries){this.updateLoaderText("ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œæ­£åœ¨é‡è¯•... (".concat(this.retryCount,"/").concat(this.maxRetries,")"));const e=this.retryDelay*Math.pow(1.5,this.retryCount-1);setTimeout(()=>{this.initializeApp()},e)}else this.retryCount<=this.maxRetries?(this.updateLoaderText("åˆå§‹åŒ–å¤±è´¥ï¼Œæ­£åœ¨é‡è¯•... (".concat(this.retryCount,"/").concat(this.maxRetries,")")),setTimeout(()=>{this.initializeApp()},this.retryDelay)):(this.updateLoaderText("åº”ç”¨å¯åŠ¨å¤±è´¥"),this.showFinalError(e))}updateLoaderText(e){const t=document.getElementById("loader-text");t&&(t.textContent=e)}showNetworkError(){const e=document.getElementById("error-message"),t=document.getElementById("retry-button");e&&t&&(e.textContent="ç½‘ç»œè¿æ¥å¼‚å¸¸ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè®¾ç½®åé‡è¯•",e.style.display="block",t.style.display="inline-block",t.onclick=()=>{this.retryCount=0,e.style.display="none",t.style.display="none",this.initializeApp()})}showFinalError(e){var t,n;const s=document.getElementById("error-message"),i=document.getElementById("retry-button"),r=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768,o=(null==(t=e.message)?void 0:t.includes("ERR_CONNECTION_RESET"))||(null==(n=e.message)?void 0:n.includes("net::ERR_CONNECTION_RESET"));r&&o?this.redirectToMobileErrorPage(e):s&&i&&(s.textContent="åº”ç”¨å¯åŠ¨å¤±è´¥: ".concat(e.message||"æœªçŸ¥é”™è¯¯","ã€‚è¯·åˆ·æ–°é¡µé¢é‡è¯•ã€‚"),s.style.display="block",i.textContent="åˆ·æ–°é¡µé¢",i.style.display="inline-block",i.onclick=()=>{window.location.reload()})}redirectToMobileErrorPage(e){const t='\n      <!DOCTYPE html>\n      <html lang="zh-CN">\n      <head>\n        <meta charset="UTF-8">\n        <meta name="viewport" content="width=device-width, initial-scale=1.0">\n        <title>ç½‘ç»œè¿æ¥é—®é¢˜</title>\n        <style>\n          body {\n            font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n            margin: 0;\n            padding: 20px;\n            background-color: #f5f5f5;\n            color: #333;\n            line-height: 1.6;\n          }\n          .container {\n            max-width: 400px;\n            margin: 0 auto;\n            background: white;\n            border-radius: 12px;\n            padding: 24px;\n            box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n          }\n          .icon {\n            text-align: center;\n            font-size: 48px;\n            margin-bottom: 16px;\n          }\n          .title {\n            text-align: center;\n            font-size: 24px;\n            font-weight: bold;\n            margin-bottom: 12px;\n            color: #e74c3c;\n          }\n          .description {\n            text-align: center;\n            color: #666;\n            margin-bottom: 24px;\n          }\n          .error-details {\n            background: #ffeaa7;\n            border: 1px solid #fdcb6e;\n            border-radius: 8px;\n            padding: 12px;\n            margin-bottom: 24px;\n            font-size: 14px;\n          }\n          .button {\n            display: block;\n            width: 100%;\n            padding: 12px;\n            margin-bottom: 12px;\n            border: none;\n            border-radius: 8px;\n            font-size: 16px;\n            font-weight: 500;\n            cursor: pointer;\n            text-decoration: none;\n            text-align: center;\n            transition: background-color 0.2s;\n          }\n          .button-primary {\n            background-color: #3498db;\n            color: white;\n          }\n          .button-primary:hover {\n            background-color: #2980b9;\n          }\n          .button-secondary {\n            background-color: #95a5a6;\n            color: white;\n          }\n          .button-secondary:hover {\n            background-color: #7f8c8d;\n          }\n          .solutions {\n            background: #e8f5e8;\n            border: 1px solid #27ae60;\n            border-radius: 8px;\n            padding: 16px;\n            margin-bottom: 24px;\n          }\n          .solutions h3 {\n            margin-top: 0;\n            color: #27ae60;\n          }\n          .solutions ul {\n            margin: 0;\n            padding-left: 20px;\n          }\n          .solutions li {\n            margin-bottom: 8px;\n          }\n        </style>\n      </head>\n      <body>\n        <div class="container">\n          <div class="icon">âš ï¸</div>\n          <h1 class="title">ç½‘ç»œè¿æ¥è¢«é‡ç½®</h1>\n          <p class="description">\n            æ£€æµ‹åˆ° ERR_CONNECTION_RESET é”™è¯¯ï¼Œè¿™é€šå¸¸æ˜¯ç”±äºç½‘ç»œä¸ç¨³å®šæˆ–ç§»åŠ¨ç«¯æµè§ˆå™¨å…¼å®¹æ€§é—®é¢˜å¯¼è‡´çš„ã€‚\n          </p>\n          \n          <div class="error-details">\n            <strong>é”™è¯¯ä¿¡æ¯:</strong><br>\n            '.concat(e.message||"ERR_CONNECTION_RESET",'\n          </div>\n\n          <div class="solutions">\n            <h3>å»ºè®®è§£å†³æ–¹æ¡ˆ:</h3>\n            <ul>\n              <li>å°è¯•åœ¨ç³»ç»Ÿé»˜è®¤æµè§ˆå™¨ä¸­æ‰“å¼€</li>\n              <li>æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å’ŒCookie</li>\n              <li>åˆ‡æ¢åˆ°ç§»åŠ¨æ•°æ®ç½‘ç»œæˆ–WiFi</li>\n              <li>é‡å¯è®¾å¤‡çš„ç½‘ç»œè¿æ¥</li>\n              <li>æ›´æ–°æµè§ˆå™¨åˆ°æœ€æ–°ç‰ˆæœ¬</li>\n            </ul>\n          </div>\n\n          <button class="button button-primary" onclick="window.location.reload()">\n            ğŸ”„ é‡è¯•è¿æ¥\n          </button>\n          \n          <a href="/mobile-diagnostic" class="button button-secondary">\n            ğŸ”§ ç½‘ç»œè¯Šæ–­\n          </a>\n          \n          <button class="button button-secondary" onclick="copyErrorInfo()">\n            ğŸ“‹ å¤åˆ¶é”™è¯¯ä¿¡æ¯\n          </button>\n        </div>\n\n        <script>\n          function copyErrorInfo() {\n            const errorInfo = `é”™è¯¯ç±»å‹: ERR_CONNECTION_RESET\né”™è¯¯ä¿¡æ¯: ').concat(e.message||"ERR_CONNECTION_RESET","\næµè§ˆå™¨: ${navigator.userAgent}\næ—¶é—´: ${new Date().toLocaleString()}`;\n            \n            if (navigator.clipboard) {\n              navigator.clipboard.writeText(errorInfo).then(() => {\n                alert('é”™è¯¯ä¿¡æ¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');\n              });\n            } else {\n              // é™çº§æ–¹æ¡ˆ\n              const textArea = document.createElement('textarea');\n              textArea.value = errorInfo;\n              document.body.appendChild(textArea);\n              textArea.select();\n              document.execCommand('copy');\n              document.body.removeChild(textArea);\n              alert('é”™è¯¯ä¿¡æ¯å·²å¤åˆ¶åˆ°å‰ªè´´æ¿');\n            }\n          }\n        <\/script>\n      </body>\n      </html>\n    ");document.open(),document.write(t),document.close()}cleanup(){this.connectionCheckInterval&&clearInterval(this.connectionCheckInterval),window.removeEventListener("online",this.handleOnline.bind(this)),window.removeEventListener("offline",this.handleOffline.bind(this));try{je.cleanup()}catch(e){}}};window.addEventListener("beforeunload",()=>{Ve.cleanup()}),window.addEventListener("error",e=>{}),window.addEventListener("unhandledrejection",e=>{});export{_ as D,I as P,L as S,je as a,T as c,H as f,F as g,q as h,W as i,Re as m,P as s,U as u};
