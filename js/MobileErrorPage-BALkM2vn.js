import{r as e,j as m,l as t,d as s,S as n,W as r,b as o,T as i}from"./react-CJFYUZ2-.js";import{m as a}from"./index-CaFumSQp.js";import"./vendor-BGL5XM0N.js";import"./react-dom-CF0h6VJ-.js";import"./supabase-BCgBSYV2.js";import"./toast-FCEag1yS.js";const l=({error:l,errorType:c="unknown",onRetry:u,onDiagnostic:d})=>{const[h,b]=e.useState(!1),[g,N]=e.useState(null),[x,v]=e.useState([]);return e.useEffect(()=>{const e=a.getBrowserInfo(),m=a.getSuggestedSolutions();N(e),v(m)},[]),m.jsxDEV("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:m.jsxDEV("div",{className:"max-w-md w-full",children:[m.jsxDEV("div",{className:"text-center mb-6",children:[navigator.onLine?m.jsxDEV(i,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:84,columnNumber:12},void 0):m.jsxDEV(o,{className:"w-16 h-16 text-red-500 mx-auto mb-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:82,columnNumber:14},void 0),m.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:(()=>{switch(c){case"connection_reset":return"连接被重置";case"network_error":return"网络连接异常";case"timeout":return"连接超时";default:return"网络出错"}})()},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:93,columnNumber:11},void 0),m.jsxDEV("p",{className:"text-gray-600 text-sm leading-relaxed",children:(()=>{switch(c){case"connection_reset":return"服务器主动断开了连接，这通常是由于网络不稳定或服务器负载过高导致的。";case"network_error":return"无法连接到服务器，请检查您的网络连接是否正常。";case"timeout":return"连接超时，服务器响应时间过长，可能是网络较慢或服务器繁忙。";default:return"遇到了网络问题，无法正常访问页面。"}})()},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:96,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:91,columnNumber:9},void 0),l&&m.jsxDEV("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:[m.jsxDEV("h3",{className:"font-medium text-red-800 mb-2",children:"错误详情:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:104,columnNumber:13},void 0),m.jsxDEV("p",{className:"text-sm text-red-700 font-mono break-all",children:l.message},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:105,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:103,columnNumber:11},void 0),g&&m.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[m.jsxDEV("h3",{className:"font-medium text-blue-800 mb-2 flex items-center",children:[m.jsxDEV(t,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:115,columnNumber:15},void 0),"浏览器信息"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:114,columnNumber:13},void 0),m.jsxDEV("div",{className:"text-sm text-blue-700 space-y-1",children:[m.jsxDEV("div",{children:["浏览器: ",g.name," ",g.version]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:119,columnNumber:15},void 0),m.jsxDEV("div",{children:["平台: ",g.platform]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:120,columnNumber:15},void 0),g.isWeChat&&m.jsxDEV("div",{className:"text-orange-600 font-medium",children:"⚠️ 检测到微信浏览器，可能存在兼容性问题"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:122,columnNumber:17},void 0),g.isQQ&&m.jsxDEV("div",{className:"text-orange-600 font-medium",children:"⚠️ 检测到QQ浏览器，可能存在兼容性问题"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:127,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:118,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:113,columnNumber:11},void 0),m.jsxDEV("div",{className:"space-y-3 mb-6",children:[m.jsxDEV("button",{onClick:async()=>{if(u){b(!0);try{await u()}finally{b(!1)}}else window.location.reload()},disabled:h,className:"w-full bg-blue-500 hover:bg-blue-600 disabled:bg-blue-300 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center",children:h?m.jsxDEV(m.Fragment,{children:[m.jsxDEV(s,{className:"w-5 h-5 mr-2 animate-spin"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:144,columnNumber:17},void 0),"正在重试..."]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:143,columnNumber:15},void 0):m.jsxDEV(m.Fragment,{children:[m.jsxDEV(s,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:149,columnNumber:17},void 0),"重试连接"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:148,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:137,columnNumber:11},void 0),m.jsxDEV("button",{onClick:()=>{d?d():window.location.href="/mobile-diagnostic"},className:"w-full bg-gray-500 hover:bg-gray-600 text-white py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center",children:[m.jsxDEV(n,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:159,columnNumber:13},void 0),"网络诊断"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:155,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:136,columnNumber:9},void 0),x.length>0&&m.jsxDEV("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:[m.jsxDEV("h3",{className:"font-medium text-gray-900 mb-3",children:"建议解决方案:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:167,columnNumber:13},void 0),m.jsxDEV("div",{className:"space-y-2",children:x.slice(0,5).map((e,t)=>m.jsxDEV("div",{className:"flex items-start space-x-2 text-sm",children:[m.jsxDEV("div",{className:"flex-shrink-0 w-5 h-5 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center text-xs font-medium mt-0.5",children:t+1},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:171,columnNumber:19},void 0),m.jsxDEV("div",{className:"text-gray-700",children:e},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:174,columnNumber:19},void 0)]},t,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:170,columnNumber:17},void 0))},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:168,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:166,columnNumber:11},void 0),m.jsxDEV("div",{className:"text-center",children:m.jsxDEV("div",{className:"inline-flex items-center space-x-2 px-3 py-2 rounded-full text-sm font-medium ".concat(navigator.onLine?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:navigator.onLine?m.jsxDEV(m.Fragment,{children:[m.jsxDEV(r,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:190,columnNumber:17},void 0),m.jsxDEV("span",{children:"网络已连接"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:191,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:189,columnNumber:15},void 0):m.jsxDEV(m.Fragment,{children:[m.jsxDEV(o,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:195,columnNumber:17},void 0),m.jsxDEV("span",{children:"网络已断开"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:196,columnNumber:17},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:194,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:183,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:182,columnNumber:9},void 0),m.jsxDEV("div",{className:"text-center mt-6 text-sm text-gray-500",children:["如果问题持续存在，请",m.jsxDEV("a",{href:"mailto:support@example.com",className:"text-blue-500 hover:text-blue-600 ml-1",children:"联系技术支持"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:205,columnNumber:11},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:203,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:89,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileErrorPage.tsx",lineNumber:88,columnNumber:5},void 0)};export{l as default};
