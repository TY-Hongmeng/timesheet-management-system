import{r as e,j as t,h as s,F as m,w as n,d as r,D as i,e as a,x as o}from"./react-CJFYUZ2-.js";import{u as h,s as l}from"./index-CRVVxJI6.js";import{t as u}from"./toast-FCEag1yS.js";import"./vendor-BGL5XM0N.js";import"./react-dom-CF0h6VJ-.js";import"./supabase-BCgBSYV2.js";function c(){var c,g,d,N,y,x;const{user:b}=h(),[p,f]=e.useState(!0),[v,w]=e.useState(!1),[k,D]=e.useState([]),[j,T]=e.useState([]),[E,H]=e.useState([]),[V,_]=e.useState({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0],status:"",productionLineId:"",workTypeId:"",productId:""}),[S,I]=e.useState([]),[C,q]=e.useState(null),[F,L]=e.useState(!1),[M,z]=e.useState(null),[O,A]=e.useState(!1),[B,G]=e.useState(!1),[P,R]=e.useState(1),[Y,J]=e.useState(1),[K,Q]=e.useState(0);e.useEffect(()=>{U()},[]),e.useEffect(()=>{$()},[P]);const U=async()=>{try{f(!0),await Promise.all([W(),X(),Z()]),await $()}catch(e){u.error("加载数据失败")}finally{f(!1)}},W=async()=>{try{const{data:e,error:t}=await l.from("processes").select("production_line");if(t)throw t;const s=(e?[...new Set(e.map(e=>e.production_line).filter(Boolean))]:[]).map((e,t)=>({id:t+1,name:e}));D(s)}catch(e){D([])}},X=async()=>{const{data:e,error:t}=await l.from("work_types").select("id, name").eq("is_active",!0).order("name");if(t)throw t;T(e||[])},Z=async()=>{const{data:e,error:t}=await l.from("products").select("id, name, code").eq("is_active",!0).order("name");if(t)throw t;H(e||[])},$=async(e=!1)=>{if(b)try{w(!0),e&&R(1);const t=10*((e?1:P)-1);let s=l.from("timesheet_records").select("*",{count:"exact"}).eq("user_id",b.id).gte("record_date",V.startDate).lte("record_date",V.endDate).order("record_date",{ascending:!1}).order("created_at",{ascending:!1}).range(t,t+10-1);V.status&&(s=s.eq("status",V.status)),V.productionLineId&&(s=s.eq("production_line_id",parseInt(V.productionLineId)));const{data:m,error:n,count:r}=await s;if(n)throw n;const i=(null==m?void 0:m.map(e=>e.id))||[];let a=[];if(i.length>0){const{data:e,error:t}=await l.from("timesheet_record_items").select("*").in("timesheet_record_id",i);if(t)throw t;a=e||[]}const o=(null==m?void 0:m.map(e=>{const t=a.filter(t=>t.timesheet_record_id===e.id);return{...e,items:t,total_amount:t.reduce((e,t)=>e+t.quantity*t.unit_price,0)||0}}))||[];I(o),Q(r||0),J(Math.ceil((r||0)/10))}catch(t){u.error("查询失败，请重试")}finally{w(!1)}},ee=(e,t)=>{_(s=>({...s,[e]:t}))},te=()=>{A(!1),z(null)},se=e=>{switch(e){case"draft":return"草稿";case"submitted":return"已提交";case"approved":return"已审核";case"rejected":return"已拒绝";default:return e}},me=e=>{switch(e){case"draft":default:return"bg-gray-600 text-gray-300";case"submitted":return"bg-yellow-600 text-yellow-100";case"approved":return"bg-green-600 text-green-100";case"rejected":return"bg-red-600 text-red-100"}};return p?t.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsxDEV("div",{className:"text-green-400 text-xl animate-pulse font-mono",children:"加载中..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:346,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:345,columnNumber:7},this):t.jsxDEV("div",{className:"min-h-screen bg-black text-green-300",children:[t.jsxDEV("header",{className:"bg-gray-900 border-b border-green-400 px-6 py-4",children:t.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[t.jsxDEV("h1",{className:"text-2xl font-bold text-green-400 font-mono flex items-center gap-2",children:[t.jsxDEV(s,{className:"w-8 h-8"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:359,columnNumber:13},this),"工时记录历史"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:358,columnNumber:11},this),t.jsxDEV("p",{className:"text-green-600 text-sm font-mono mt-1",children:"TIMESHEET HISTORY MANAGEMENT"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:362,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:357,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:356,columnNumber:7},this),t.jsxDEV("div",{className:"max-w-7xl mx-auto p-6",children:[t.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-6 mb-6",children:[t.jsxDEV("h2",{className:"text-xl font-bold text-green-400 font-mono mb-4 flex items-center gap-2",children:[t.jsxDEV(m,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:372,columnNumber:13},this),"查询条件"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:371,columnNumber:11},this),t.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:[t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-green-300 font-mono text-sm mb-2",children:"开始日期"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:378,columnNumber:15},this),t.jsxDEV("input",{type:"date",value:V.startDate,onChange:e=>ee("startDate",e.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-green-600 rounded text-green-300 font-mono focus:outline-none focus:border-green-400"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:381,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:377,columnNumber:13},this),t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-green-300 font-mono text-sm mb-2",children:"结束日期"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:390,columnNumber:15},this),t.jsxDEV("input",{type:"date",value:V.endDate,onChange:e=>ee("endDate",e.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-green-600 rounded text-green-300 font-mono focus:outline-none focus:border-green-400"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:393,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:389,columnNumber:13},this),t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-green-300 font-mono text-sm mb-2",children:"状态"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:402,columnNumber:15},this),t.jsxDEV("select",{value:V.status,onChange:e=>ee("status",e.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-green-600 rounded text-green-300 font-mono focus:outline-none focus:border-green-400",children:[t.jsxDEV("option",{value:"",children:"全部状态"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:410,columnNumber:17},this),t.jsxDEV("option",{value:"draft",children:"草稿"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:411,columnNumber:17},this),t.jsxDEV("option",{value:"submitted",children:"已提交"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:412,columnNumber:17},this),t.jsxDEV("option",{value:"approved",children:"已审核"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:413,columnNumber:17},this),t.jsxDEV("option",{value:"rejected",children:"已拒绝"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:414,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:405,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:401,columnNumber:13},this),t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-green-300 font-mono text-sm mb-2",children:"生产线"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:419,columnNumber:15},this),t.jsxDEV("select",{value:V.productionLineId,onChange:e=>ee("productionLineId",e.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-green-600 rounded text-green-300 font-mono focus:outline-none focus:border-green-400",children:[t.jsxDEV("option",{value:"",children:"全部生产线"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:427,columnNumber:17},this),k.map(e=>t.jsxDEV("option",{value:e.id,children:e.name},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:429,columnNumber:19},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:422,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:418,columnNumber:13},this),t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-green-300 font-mono text-sm mb-2",children:"工时类型"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:435,columnNumber:15},this),t.jsxDEV("select",{value:V.workTypeId,onChange:e=>ee("workTypeId",e.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-green-600 rounded text-green-300 font-mono focus:outline-none focus:border-green-400",children:[t.jsxDEV("option",{value:"",children:"全部类型"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:443,columnNumber:17},this),j.map(e=>t.jsxDEV("option",{value:e.id,children:e.name},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:445,columnNumber:19},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:438,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:434,columnNumber:13},this),t.jsxDEV("div",{children:[t.jsxDEV("label",{className:"block text-green-300 font-mono text-sm mb-2",children:"产品"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:451,columnNumber:15},this),t.jsxDEV("select",{value:V.productId,onChange:e=>ee("productId",e.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-green-600 rounded text-green-300 font-mono focus:outline-none focus:border-green-400",children:[t.jsxDEV("option",{value:"",children:"全部产品"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:459,columnNumber:17},this),E.map(e=>t.jsxDEV("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:461,columnNumber:19},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:454,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:450,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:376,columnNumber:11},this),t.jsxDEV("div",{className:"flex gap-2",children:[t.jsxDEV("button",{onClick:()=>{$(!0)},disabled:v,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 disabled:bg-gray-600 text-white font-bold rounded transition-colors font-mono",children:[t.jsxDEV(n,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:473,columnNumber:15},this),v?"查询中...":"查询"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:468,columnNumber:13},this),t.jsxDEV("button",{onClick:()=>{_({startDate:new Date(Date.now()-2592e6).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0],status:"",productionLineId:"",workTypeId:"",productId:""}),R(1)},className:"flex items-center gap-2 px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white font-bold rounded transition-colors font-mono",children:[t.jsxDEV(r,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:481,columnNumber:15},this),"重置"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:477,columnNumber:13},this),t.jsxDEV("button",{onClick:async()=>{try{u.info("导出功能开发中...")}catch(e){u.error("导出失败")}},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white font-bold rounded transition-colors font-mono",children:[t.jsxDEV(i,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:489,columnNumber:15},this),"导出"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:485,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:467,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:370,columnNumber:9},this),t.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-4 mb-6",children:t.jsxDEV("div",{className:"flex justify-between items-center",children:[t.jsxDEV("div",{className:"text-green-300 font-mono",children:["共找到 ",t.jsxDEV("span",{className:"text-green-400 font-bold",children:K},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:499,columnNumber:19},this)," 条记录"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:498,columnNumber:13},this),t.jsxDEV("div",{className:"text-green-300 font-mono",children:["总金额: ",t.jsxDEV("span",{className:"text-green-400 font-bold",children:["￥",S.reduce((e,t)=>e+(t.total_amount||0),0).toFixed(2)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:502,columnNumber:20},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:501,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:497,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:496,columnNumber:9},this),t.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg overflow-hidden",children:t.jsxDEV("div",{className:"overflow-x-auto",children:t.jsxDEV("table",{className:"w-full",children:[t.jsxDEV("thead",{className:"bg-gray-800 border-b border-green-600",children:t.jsxDEV("tr",{children:[t.jsxDEV("th",{className:"px-4 py-3 text-left text-green-400 font-mono text-sm",children:"记录日期"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:513,columnNumber:19},this),t.jsxDEV("th",{className:"px-4 py-3 text-left text-green-400 font-mono text-sm",children:"生产线"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:514,columnNumber:19},this),t.jsxDEV("th",{className:"px-4 py-3 text-left text-green-400 font-mono text-sm",children:"工时项数"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:515,columnNumber:19},this),t.jsxDEV("th",{className:"px-4 py-3 text-left text-green-400 font-mono text-sm",children:"总金额"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:516,columnNumber:19},this),t.jsxDEV("th",{className:"px-4 py-3 text-left text-green-400 font-mono text-sm",children:"状态"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:517,columnNumber:19},this),t.jsxDEV("th",{className:"px-4 py-3 text-left text-green-400 font-mono text-sm",children:"创建时间"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:518,columnNumber:19},this),t.jsxDEV("th",{className:"px-4 py-3 text-left text-green-400 font-mono text-sm",children:"操作"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:519,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:512,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:511,columnNumber:15},this),t.jsxDEV("tbody",{children:0===S.length?t.jsxDEV("tr",{children:t.jsxDEV("td",{colSpan:7,className:"px-4 py-8 text-center",children:[t.jsxDEV(s,{className:"w-12 h-12 text-green-600 mx-auto mb-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:526,columnNumber:23},this),t.jsxDEV("p",{className:"text-green-600 font-mono",children:"暂无工时记录"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:527,columnNumber:23},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:525,columnNumber:21},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:524,columnNumber:19},this):S.map(e=>{var s,m;return t.jsxDEV("tr",{className:"border-b border-green-800 hover:bg-gray-800 transition-colors",children:[t.jsxDEV("td",{className:"px-4 py-3 text-green-300 font-mono text-sm",children:e.record_date},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:533,columnNumber:23},this),t.jsxDEV("td",{className:"px-4 py-3 text-green-300 font-mono text-sm",children:null==(s=e.production_line)?void 0:s.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:536,columnNumber:23},this),t.jsxDEV("td",{className:"px-4 py-3 text-green-300 font-mono text-sm",children:(null==(m=e.items)?void 0:m.length)||0},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:539,columnNumber:23},this),t.jsxDEV("td",{className:"px-4 py-3 text-green-300 font-mono text-sm",children:["￥",(e.total_amount||0).toFixed(2)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:542,columnNumber:23},this),t.jsxDEV("td",{className:"px-4 py-3",children:t.jsxDEV("span",{className:"px-2 py-1 rounded text-xs font-mono ".concat(me(e.status)),children:se(e.status)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:546,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:545,columnNumber:23},this),t.jsxDEV("td",{className:"px-4 py-3 text-green-300 font-mono text-sm",children:new Date(e.created_at).toLocaleString("zh-CN")},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:550,columnNumber:23},this),t.jsxDEV("td",{className:"px-4 py-3",children:t.jsxDEV("div",{className:"flex items-center gap-2",children:[t.jsxDEV("button",{onClick:()=>(e=>{q(e),L(!0)})(e),className:"p-1 text-blue-400 hover:text-blue-300 transition-colors",title:"查看详情",children:t.jsxDEV(a,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:560,columnNumber:29},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:555,columnNumber:27},this),"draft"===e.status&&t.jsxDEV("button",{onClick:()=>(e=>{"draft"===e.status?(z(e),A(!0)):u.error("只有草稿状态的工时记录可以删除")})(e),className:"p-1 text-red-400 hover:text-red-300 transition-colors",title:"删除记录",children:t.jsxDEV(o,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:568,columnNumber:31},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:563,columnNumber:29},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:554,columnNumber:25},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:553,columnNumber:23},this)]},e.id,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:532,columnNumber:21},this)})},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:522,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:510,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:509,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:508,columnNumber:9},this),Y>1&&t.jsxDEV("div",{className:"flex justify-center items-center gap-2 mt-6",children:[t.jsxDEV("button",{onClick:()=>R(e=>Math.max(1,e-1)),disabled:1===P,className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 text-green-300 font-mono rounded transition-colors",children:"上一页"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:584,columnNumber:13},this),t.jsxDEV("span",{className:"text-green-300 font-mono",children:["第 ",P," 页，共 ",Y," 页"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:592,columnNumber:13},this),t.jsxDEV("button",{onClick:()=>R(e=>Math.min(Y,e+1)),disabled:P===Y,className:"px-3 py-2 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 text-green-300 font-mono rounded transition-colors",children:"下一页"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:596,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:583,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:368,columnNumber:7},this),F&&C&&t.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:t.jsxDEV("div",{className:"p-6",children:[t.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[t.jsxDEV("h2",{className:"text-xl font-bold text-green-400 font-mono",children:"工时记录详情"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:613,columnNumber:17},this),t.jsxDEV("button",{onClick:()=>L(!1),className:"text-green-400 hover:text-green-300 transition-colors",children:"✕"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:616,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:612,columnNumber:15},this),t.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[t.jsxDEV("span",{className:"text-green-600",children:"记录日期:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:628,columnNumber:21},this)," ",C.record_date]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:627,columnNumber:19},this),t.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[t.jsxDEV("span",{className:"text-green-600",children:"生产线:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:631,columnNumber:21},this)," ",null==(c=C.production_line)?void 0:c.name]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:630,columnNumber:19},this),t.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[t.jsxDEV("span",{className:"text-green-600",children:"班长:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:634,columnNumber:21},this)," ",(null==(g=C.supervisor)?void 0:g.name)||"未指定"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:633,columnNumber:19},this),t.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[t.jsxDEV("span",{className:"text-green-600",children:"段长:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:637,columnNumber:21},this)," ",(null==(d=C.section_chief)?void 0:d.name)||"未指定"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:636,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:626,columnNumber:17},this),t.jsxDEV("div",{className:"space-y-2",children:[t.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[t.jsxDEV("span",{className:"text-green-600",children:"状态:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:642,columnNumber:21},this),t.jsxDEV("span",{className:"ml-2 px-2 py-1 rounded text-xs ".concat(me(C.status)),children:se(C.status)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:643,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:641,columnNumber:19},this),t.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[t.jsxDEV("span",{className:"text-green-600",children:"创建时间:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:648,columnNumber:21},this)," ",new Date(C.created_at).toLocaleString("zh-CN")]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:647,columnNumber:19},this),t.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[t.jsxDEV("span",{className:"text-green-600",children:"更新时间:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:651,columnNumber:21},this)," ",new Date(C.updated_at).toLocaleString("zh-CN")]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:650,columnNumber:19},this),t.jsxDEV("div",{className:"text-green-300 font-mono text-sm",children:[t.jsxDEV("span",{className:"text-green-600",children:"总金额:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:654,columnNumber:21},this)," ￥",(C.total_amount||0).toFixed(2)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:653,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:640,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:625,columnNumber:15},this),t.jsxDEV("div",{children:[t.jsxDEV("h3",{className:"text-lg font-bold text-green-400 font-mono mb-4",children:"工时明细"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:661,columnNumber:17},this),t.jsxDEV("div",{className:"overflow-x-auto",children:t.jsxDEV("table",{className:"w-full",children:[t.jsxDEV("thead",{className:"bg-gray-800 border-b border-green-600",children:t.jsxDEV("tr",{children:[t.jsxDEV("th",{className:"px-4 py-2 text-left text-green-400 font-mono text-sm",children:"工时类型"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:668,columnNumber:25},this),t.jsxDEV("th",{className:"px-4 py-2 text-left text-green-400 font-mono text-sm",children:"产品"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:669,columnNumber:25},this),t.jsxDEV("th",{className:"px-4 py-2 text-left text-green-400 font-mono text-sm",children:"工序"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:670,columnNumber:25},this),t.jsxDEV("th",{className:"px-4 py-2 text-left text-green-400 font-mono text-sm",children:"数量"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:671,columnNumber:25},this),t.jsxDEV("th",{className:"px-4 py-2 text-left text-green-400 font-mono text-sm",children:"单位"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:672,columnNumber:25},this),t.jsxDEV("th",{className:"px-4 py-2 text-left text-green-400 font-mono text-sm",children:"单价"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:673,columnNumber:25},this),t.jsxDEV("th",{className:"px-4 py-2 text-left text-green-400 font-mono text-sm",children:"小计"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:674,columnNumber:25},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:667,columnNumber:23},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:666,columnNumber:21},this),t.jsxDEV("tbody",{children:(null==(N=C.items)?void 0:N.map((e,s)=>{var m,n,r,i;return t.jsxDEV("tr",{className:"border-b border-green-800",children:[t.jsxDEV("td",{className:"px-4 py-2 text-green-300 font-mono text-sm",children:null==(m=e.work_type)?void 0:m.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:680,columnNumber:27},this),t.jsxDEV("td",{className:"px-4 py-2 text-green-300 font-mono text-sm",children:[null==(n=e.product)?void 0:n.name," (",null==(r=e.product)?void 0:r.code,")"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:683,columnNumber:27},this),t.jsxDEV("td",{className:"px-4 py-2 text-green-300 font-mono text-sm",children:null==(i=e.process)?void 0:i.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:686,columnNumber:27},this),t.jsxDEV("td",{className:"px-4 py-2 text-green-300 font-mono text-sm",children:e.quantity},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:689,columnNumber:27},this),t.jsxDEV("td",{className:"px-4 py-2 text-green-300 font-mono text-sm",children:e.unit},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:692,columnNumber:27},this),t.jsxDEV("td",{className:"px-4 py-2 text-green-300 font-mono text-sm",children:["￥",e.unit_price.toFixed(2)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:695,columnNumber:27},this),t.jsxDEV("td",{className:"px-4 py-2 text-green-300 font-mono text-sm",children:["￥",(e.quantity*e.unit_price).toFixed(2)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:698,columnNumber:27},this)]},e.id||s,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:679,columnNumber:25},this)}))||[]},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:677,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:665,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:664,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:660,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:611,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:610,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:609,columnNumber:9},this),O&&M&&t.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:t.jsxDEV("div",{className:"bg-gray-900 border border-red-400 rounded-lg max-w-md w-full",children:t.jsxDEV("div",{className:"p-6",children:[t.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[t.jsxDEV("h2",{className:"text-xl font-bold text-red-400 font-mono",children:"确认删除"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:718,columnNumber:17},this),t.jsxDEV("button",{onClick:te,className:"text-red-400 hover:text-red-300 transition-colors",disabled:B,children:"✕"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:721,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:717,columnNumber:15},this),t.jsxDEV("div",{className:"mb-6",children:[t.jsxDEV("p",{className:"text-red-300 font-mono mb-2",children:"您确定要删除以下工时记录吗？"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:731,columnNumber:17},this),t.jsxDEV("div",{className:"bg-gray-800 border border-red-600 rounded p-3",children:t.jsxDEV("div",{className:"text-green-300 font-mono text-sm space-y-1",children:[t.jsxDEV("div",{children:[t.jsxDEV("span",{className:"text-red-400",children:"记录日期:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:736,columnNumber:26},this)," ",M.record_date]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:736,columnNumber:21},this),t.jsxDEV("div",{children:[t.jsxDEV("span",{className:"text-red-400",children:"生产线:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:737,columnNumber:26},this)," ",null==(y=M.production_line)?void 0:y.name]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:737,columnNumber:21},this),t.jsxDEV("div",{children:[t.jsxDEV("span",{className:"text-red-400",children:"工时项数:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:738,columnNumber:26},this)," ",(null==(x=M.items)?void 0:x.length)||0]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:738,columnNumber:21},this),t.jsxDEV("div",{children:[t.jsxDEV("span",{className:"text-red-400",children:"总金额:"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:739,columnNumber:26},this)," ￥",(M.total_amount||0).toFixed(2)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:739,columnNumber:21},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:735,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:734,columnNumber:17},this),t.jsxDEV("p",{className:"text-red-400 font-mono text-sm mt-3",children:"⚠️ 此操作将同时删除所有相关的工时明细和审核历史，且无法恢复！"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:742,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:730,columnNumber:15},this),t.jsxDEV("div",{className:"flex justify-end gap-3",children:[t.jsxDEV("button",{onClick:te,disabled:B,className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-800 text-green-300 font-mono rounded transition-colors",children:"取消"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:748,columnNumber:17},this),t.jsxDEV("button",{onClick:async()=>{if(M)try{G(!0);const{error:e}=await l.from("timesheet_records").delete().eq("id",M.id).eq("user_id",null==b?void 0:b.id);if(e)throw e;u.success("工时记录删除成功"),await $(),A(!1),z(null)}catch(e){u.error("删除失败，请重试")}finally{G(!1)}},disabled:B,className:"px-4 py-2 bg-red-600 hover:bg-red-500 disabled:bg-red-800 text-white font-mono rounded transition-colors flex items-center gap-2",children:B?t.jsxDEV(t.Fragment,{children:[t.jsxDEV("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:762,columnNumber:23},this),"删除中..."]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:761,columnNumber:21},this):t.jsxDEV(t.Fragment,{children:[t.jsxDEV(o,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:767,columnNumber:23},this),"确认删除"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:766,columnNumber:21},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:755,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:747,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:716,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:715,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:714,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/TimesheetHistory.tsx",lineNumber:354,columnNumber:5},this)}export{c as default};
