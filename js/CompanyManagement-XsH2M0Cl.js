import{r as e,f as m,j as n,B as t,i as s,n as a,H as r,F as i,X as o,J as l,M as g,T as h,O as c,Q as u}from"./react-vendor-DDAYhcjm.js";import{u as N,s as d}from"./index-D-AASiPK.js";import{u as y,a as b,D as p,c as x,S as f,v,s as w,K as k,P as C,b as M,d as j,C as D}from"./dnd-BO5YMJxE.js";import"./vendor-_fbq4b22.js";import"./supabase-C28rFl6G.js";import"./toast-DbvY9YeO.js";function E({company:e,index:m,onEdit:t,onDelete:s}){const{attributes:a,listeners:r,setNodeRef:i,transform:o,transition:l,isDragging:g}=j({id:e.id}),N={transform:D.Transform.toString(o),transition:l,opacity:g?.5:1};return n.jsxDEV("div",{ref:i,style:N,className:"px-6 py-4 hover:bg-green-900/10 transition-colors "+(g?"bg-gray-800/70 shadow-lg":""),children:n.jsxDEV("div",{className:"grid grid-cols-12 gap-4 items-center",children:[n.jsxDEV("div",{className:"col-span-1 flex items-center gap-2",children:[n.jsxDEV("div",{...a,...r,className:"cursor-grab active:cursor-grabbing text-green-400 hover:text-green-300 p-1",title:"拖拽排序",children:n.jsxDEV(c,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:69,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:63,columnNumber:11},this),n.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-lg",children:m+1},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:71,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:62,columnNumber:9},this),n.jsxDEV("div",{className:"col-span-6",children:n.jsxDEV("h3",{className:"text-green-400 font-bold font-mono text-lg",children:e.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:76,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:75,columnNumber:9},this),n.jsxDEV("div",{className:"col-span-3",children:n.jsxDEV("span",{className:"text-green-600 font-mono text-sm",children:new Date(e.created_at).toLocaleString()},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:81,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:80,columnNumber:9},this),n.jsxDEV("div",{className:"col-span-2",children:n.jsxDEV("div",{className:"flex gap-2",children:[n.jsxDEV("button",{onClick:()=>t(e),className:"text-green-400 hover:text-green-300 transition-colors p-1",title:"编辑",children:n.jsxDEV(u,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:92,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:87,columnNumber:13},this),n.jsxDEV("button",{onClick:()=>s(e),className:"text-red-400 hover:text-red-300 transition-colors p-1",title:"删除",children:n.jsxDEV(h,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:99,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:94,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:86,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:85,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:61,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:54,columnNumber:5},this)}function _(){const[c,u]=e.useState([]),[j,D]=e.useState(!0),[_,z]=e.useState(!1),[S,$]=e.useState(null),[q,B]=e.useState({name:""}),[F,G]=e.useState(!1),[H,J]=e.useState(!1),[K,O]=e.useState(null),[P,Q]=e.useState(""),[R,T]=e.useState(""),{user:A,loading:I}=N(),L=m(),U=y(b(C),b(k,{coordinateGetter:w}));if(e.useEffect(()=>{I||A||L("/login")},[A,I,L]),I)return n.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:n.jsxDEV("div",{className:"text-center",children:[n.jsxDEV("div",{className:"text-green-400 text-2xl font-mono mb-4",children:"加载中..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:147,columnNumber:11},this),n.jsxDEV("div",{className:"text-green-600 font-mono",children:"正在验证用户身份"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:148,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:146,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:145,columnNumber:7},this);e.useEffect(()=>{V()},[]);const V=async()=>{D(!0),Q("");try{if(!A)return void Q("用户未登录，请重新登录");const{data:e,error:m}=await d.from("companies").select("*").order("order_index",{ascending:!0});if(m)throw m;u(e||[])}catch(e){Q("获取公司列表失败，请重试")}finally{D(!1)}},W=e=>{$(e),B({name:e.name}),z(!0)},X=e=>{O(e),J(!0)},Y=()=>{B({name:""}),$(null),z(!1),Q("")};return j?n.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:n.jsxDEV("div",{className:"text-green-400 text-xl animate-pulse font-mono",children:"加载中..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:340,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:339,columnNumber:7},this):n.jsxDEV("div",{className:"min-h-screen bg-black text-green-300 p-6",children:n.jsxDEV("div",{className:"max-w-7xl mx-auto",children:[n.jsxDEV("div",{className:"mb-8",children:[n.jsxDEV("div",{className:"flex justify-between items-center mb-4",children:[n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV(t,{className:"w-8 h-8 text-green-400 mr-3"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:355,columnNumber:15},this),n.jsxDEV("h1",{className:"text-4xl font-bold text-green-400 font-mono",children:"公司管理"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:356,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:354,columnNumber:13},this),n.jsxDEV(s,{to:"/dashboard",className:"flex items-center gap-2 px-3 py-2 sm:px-4 sm:py-2 bg-gradient-to-r from-gray-700 to-gray-800 hover:from-gray-600 hover:to-gray-700 text-green-300 hover:text-green-200 rounded-lg font-mono transition-all duration-200 shadow-md hover:shadow-lg border border-gray-600 hover:border-green-500/50",children:[n.jsxDEV(a,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:362,columnNumber:15},this),n.jsxDEV("span",{className:"hidden sm:inline",children:"返回控制台"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:363,columnNumber:15},this),n.jsxDEV("span",{className:"sm:hidden",children:"返回"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:364,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:358,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:353,columnNumber:11},this),n.jsxDEV("div",{className:"h-1 bg-gradient-to-r from-transparent via-green-400 to-transparent"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:367,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:352,columnNumber:9},this),n.jsxDEV("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[n.jsxDEV("div",{className:"flex-1",children:n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(r,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-green-400/60"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:374,columnNumber:15},this),n.jsxDEV("input",{type:"text",placeholder:"搜索公司名称...",className:"w-full bg-black border border-green-400/30 rounded px-10 py-2 text-green-400 placeholder-green-400/60 focus:outline-none focus:border-green-400"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:375,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:373,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:372,columnNumber:11},this),n.jsxDEV("button",{onClick:()=>z(!0),className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 text-black font-bold rounded transition-colors font-mono",children:[n.jsxDEV(i,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:386,columnNumber:13},this),"新增公司"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:382,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:371,columnNumber:9},this),P&&n.jsxDEV("div",{className:"mb-6 p-4 bg-red-900/50 border border-red-400 rounded text-red-300",children:P},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:392,columnNumber:11},this),_&&n.jsxDEV("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:n.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[n.jsxDEV("div",{className:"flex justify-between items-center mb-6",children:[n.jsxDEV("h2",{className:"text-2xl font-bold text-green-400 font-mono",children:S?"编辑公司":"新增公司"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:404,columnNumber:17},this),n.jsxDEV("button",{onClick:Y,className:"text-green-400 hover:text-green-300",children:n.jsxDEV(o,{className:"w-6 h-6"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:411,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:407,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:403,columnNumber:15},this),n.jsxDEV("form",{onSubmit:async e=>{e.preventDefault(),G(!0),Q("");let m="";try{if(S){const{data:e,error:n}=await d.from("companies").update({name:q.name,updated_at:(new Date).toISOString()}).eq("id",S.id).select();if(n)throw Error(n.message);if(!e||0===e.length)throw Error("更新失败：权限不足或记录不存在");const t=e[0];u(e=>e.map(e=>e.id===t.id?t:e)),m=`公司 "${t.name}" 更新成功`}else{const{data:e,error:n}=await d.from("companies").insert([q]).select();if(n)throw Error(n.message);const t=e[0];u(e=>[...e,t]),m=`公司 "${t.name}" 创建成功`}Q(""),T(m),await V(),Y()}catch(n){Q(n.message||"保存失败")}finally{G(!1)}},className:"space-y-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"公司名称 *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:417,columnNumber:19},this),n.jsxDEV("input",{type:"text",name:"name",value:q.name,onChange:e=>{B({...q,[e.target.name]:e.target.value})},required:!0,className:"w-full px-3 py-2 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",placeholder:"请输入公司名称"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:420,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:416,columnNumber:17},this),n.jsxDEV("div",{className:"flex gap-3 pt-4",children:[n.jsxDEV("button",{type:"submit",disabled:F,className:"flex items-center gap-2 px-4 py-2 bg-green-600 hover:bg-green-500 disabled:bg-green-800 text-black font-bold rounded transition-colors font-mono",children:[n.jsxDEV(l,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:439,columnNumber:21},this),F?"保存中...":"保存"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:434,columnNumber:19},this),n.jsxDEV("button",{type:"button",onClick:Y,className:"px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white font-bold rounded transition-colors font-mono",children:"取消"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:442,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:433,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:415,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:402,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:401,columnNumber:11},this),H&&K&&n.jsxDEV("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center p-4 z-50",children:n.jsxDEV("div",{className:"bg-gray-900 border border-red-400 rounded-lg p-6 w-full max-w-md",children:[n.jsxDEV("div",{className:"flex items-center gap-3 mb-4",children:[n.jsxDEV(g,{className:"text-red-400 w-8 h-8"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:460,columnNumber:17},this),n.jsxDEV("h2",{className:"text-xl font-bold text-red-400 font-mono",children:"确认删除"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:461,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:459,columnNumber:15},this),n.jsxDEV("div",{className:"mb-6",children:[n.jsxDEV("p",{className:"text-green-300 font-mono mb-2",children:"您确定要删除以下公司吗？"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:467,columnNumber:17},this),n.jsxDEV("div",{className:"bg-black border border-green-400 rounded p-3 mb-3",children:n.jsxDEV("p",{className:"text-green-400 font-mono font-bold",children:K.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:471,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:470,columnNumber:17},this),n.jsxDEV("p",{className:"text-red-300 text-sm font-mono",children:"⚠️ 此操作不可恢复，请谨慎操作！"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:475,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:466,columnNumber:15},this),n.jsxDEV("div",{className:"flex gap-3",children:[n.jsxDEV("button",{onClick:async()=>{if(K)try{const{error:e}=await d.from("companies").delete().eq("id",K.id);if(e)throw e;await V(),J(!1),O(null)}catch(e){Q(e.message||"删除失败")}},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 hover:bg-red-500 text-white font-bold rounded transition-colors font-mono",children:[n.jsxDEV(h,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:485,columnNumber:19},this),"确认删除"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:481,columnNumber:17},this),n.jsxDEV("button",{onClick:()=>{J(!1),O(null)},className:"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white font-bold rounded transition-colors font-mono",children:"取消"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:488,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:480,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:458,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:457,columnNumber:11},this),n.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg overflow-hidden",children:[n.jsxDEV("div",{className:"bg-green-900/30 border-b border-green-400 px-6 py-4",children:n.jsxDEV("div",{className:"grid grid-cols-12 gap-4 items-center",children:[n.jsxDEV("div",{className:"col-span-1",children:n.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"排序"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:505,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:504,columnNumber:15},this),n.jsxDEV("div",{className:"col-span-6",children:n.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"公司名称"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:508,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:507,columnNumber:15},this),n.jsxDEV("div",{className:"col-span-3",children:n.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"创建时间"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:511,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:510,columnNumber:15},this),n.jsxDEV("div",{className:"col-span-2",children:n.jsxDEV("span",{className:"text-green-400 font-bold font-mono text-sm",children:"操作"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:514,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:513,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:503,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:502,columnNumber:11},this),n.jsxDEV(p,{sensors:U,collisionDetection:x,onDragEnd:async e=>{const{active:m,over:n}=e;if(m.id!==(null==n?void 0:n.id)){const e=c.findIndex(e=>e.id===m.id),s=c.findIndex(e=>e.id===(null==n?void 0:n.id)),a=M(c,e,s);u(a);try{const e=a.map((e,m)=>({id:e.id,order_index:m+1}));for(const m of e)await d.from("companies").update({order_index:m.order_index}).eq("id",m.id)}catch(t){await V()}}},children:n.jsxDEV(f,{items:c.map(e=>e.id),strategy:v,children:n.jsxDEV("div",{className:"divide-y divide-green-800",children:c.map((e,m)=>n.jsxDEV(E,{company:e,index:m,onEdit:W,onDelete:X},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:531,columnNumber:19},this))},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:529,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:525,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:520,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:500,columnNumber:9},this),0===c.length&&n.jsxDEV("div",{className:"text-center py-12",children:[n.jsxDEV(t,{className:"w-16 h-16 text-green-600 mx-auto mb-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:546,columnNumber:13},this),n.jsxDEV("p",{className:"text-green-400 text-lg font-mono",children:"暂无公司数据"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:547,columnNumber:13},this),n.jsxDEV("p",{className:"text-green-600 text-sm font-mono mt-2",children:"点击上方按钮添加第一家公司"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:550,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:545,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:349,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/CompanyManagement.tsx",lineNumber:348,columnNumber:5},this)}export{_ as default};
