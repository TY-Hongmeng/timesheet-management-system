import{r as t,R as e}from"./react-BjXQKpih.js";import{r as n}from"./react-dom-BYPRsttm.js";const r="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement;function o(t){const e={}.toString.call(t);return"[object Window]"===e||"[object global]"===e}function i(t){return"nodeType"in t}function a(t){var e,n;return t?o(t)?t:i(t)&&null!=(e=null==(n=t.ownerDocument)?void 0:n.defaultView)?e:window:window}function l(t){const{Document:e}=a(t);return t instanceof e}function s(t){return!o(t)&&t instanceof a(t).HTMLElement}function c(t){return t instanceof a(t).SVGElement}function u(t){return t?o(t)?t.document:i(t)?l(t)?t:s(t)||c(t)?t.ownerDocument:document:document:document}const d=r?t.useLayoutEffect:t.useEffect;function v(e){const n=t.useRef(e);return d(()=>{n.current=e}),t.useCallback(function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];return null==n.current?void 0:n.current(...e)},[])}function f(e,n){void 0===n&&(n=[e]);const r=t.useRef(e);return d(()=>{r.current!==e&&(r.current=e)},n),r}function h(e,n){const r=t.useRef();return t.useMemo(()=>{const t=e(r.current);return r.current=t,t},[...n])}function p(e){const n=v(e),r=t.useRef(null),o=t.useCallback(t=>{t!==r.current&&(null==n||n(t,r.current)),r.current=t},[]);return[r,o]}function g(e){const n=t.useRef();return t.useEffect(()=>{n.current=e},[e]),n.current}let b={};function m(e,n){return t.useMemo(()=>{if(n)return n;const t=null==b[e]?0:b[e]+1;return b[e]=t,e+"-"+t},[e,n])}function y(t){return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];return r.reduce((e,n)=>{const r=Object.entries(n);for(const[o,i]of r){const n=e[o];null!=n&&(e[o]=n+t*i)}return e},{...e})}}const w=y(1),x=y(-1);function R(t){if(!t)return!1;const{KeyboardEvent:e}=a(t.target);return e&&t instanceof e}function D(t){if(function(t){if(!t)return!1;const{TouchEvent:e}=a(t.target);return e&&t instanceof e}(t)){if(t.touches&&t.touches.length){const{clientX:e,clientY:n}=t.touches[0];return{x:e,y:n}}if(t.changedTouches&&t.changedTouches.length){const{clientX:e,clientY:n}=t.changedTouches[0];return{x:e,y:n}}}return function(t){return"clientX"in t&&"clientY"in t}(t)?{x:t.clientX,y:t.clientY}:null}const N=Object.freeze({Translate:{toString(t){if(!t)return;const{x:e,y:n}=t;return"translate3d("+(e?Math.round(e):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(t){if(!t)return;const{scaleX:e,scaleY:n}=t;return"scaleX("+e+") scaleY("+n+")"}},Transform:{toString(t){if(t)return[N.Translate.toString(t),N.Scale.toString(t)].join(" ")}},Transition:{toString(t){let{property:e,duration:n,easing:r}=t;return e+" "+n+"ms "+r}}}),C="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function I(t){return t.matches(C)?t:t.querySelector(C)}const M={display:"none"};function A(t){let{id:n,value:r}=t;return e.createElement("div",{id:n,style:M},r)}function S(t){let{id:n,announcement:r,ariaLiveType:o="assertive"}=t;return e.createElement("div",{id:n,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":o,"aria-atomic":!0},r)}const T=t.createContext(null),E={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},O={onDragStart(t){let{active:e}=t;return"Picked up draggable item "+e.id+"."},onDragOver(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was moved over droppable area "+n.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(t){let{active:e,over:n}=t;return n?"Draggable item "+e.id+" was dropped over droppable area "+n.id:"Draggable item "+e.id+" was dropped."},onDragCancel(t){let{active:e}=t;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function k(r){let{announcements:o=O,container:i,hiddenTextDescribedById:a,screenReaderInstructions:l=E}=r;const{announce:s,announcement:c}=function(){const[e,n]=t.useState("");return{announce:t.useCallback(t=>{null!=t&&n(t)},[]),announcement:e}}(),u=m("DndLiveRegion"),[d,v]=t.useState(!1);if(t.useEffect(()=>{v(!0)},[]),function(e){const n=t.useContext(T);t.useEffect(()=>{if(!n)throw Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}(t.useMemo(()=>({onDragStart(t){let{active:e}=t;s(o.onDragStart({active:e}))},onDragMove(t){let{active:e,over:n}=t;o.onDragMove&&s(o.onDragMove({active:e,over:n}))},onDragOver(t){let{active:e,over:n}=t;s(o.onDragOver({active:e,over:n}))},onDragEnd(t){let{active:e,over:n}=t;s(o.onDragEnd({active:e,over:n}))},onDragCancel(t){let{active:e,over:n}=t;s(o.onDragCancel({active:e,over:n}))}}),[s,o])),!d)return null;const f=e.createElement(e.Fragment,null,e.createElement(A,{id:a,value:l.draggable}),e.createElement(S,{id:u,announcement:c}));return i?n.createPortal(f,i):f}var j,X;function Y(){}function B(e,n){return t.useMemo(()=>({sensor:e,options:null!=n?n:{}}),[e,n])}function P(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];return t.useMemo(()=>[...n].filter(t=>null!=t),[...n])}(X=j||(j={})).DragStart="dragStart",X.DragMove="dragMove",X.DragEnd="dragEnd",X.DragCancel="dragCancel",X.DragOver="dragOver",X.RegisterDroppable="registerDroppable",X.SetDroppableDisabled="setDroppableDisabled",X.UnregisterDroppable="unregisterDroppable";const L=Object.freeze({x:0,y:0});function z(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function F(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return n-r}function J(t,e){let{data:{value:n}}=t,{data:{value:r}}=e;return r-n}function K(t){let{left:e,top:n,height:r,width:o}=t;return[{x:e,y:n},{x:e+o,y:n},{x:e,y:n+r},{x:e+o,y:n+r}]}function W(t,e){if(!t||0===t.length)return null;const[n]=t;return n[e]}function q(t,e,n){return void 0===e&&(e=t.left),void 0===n&&(n=t.top),{x:e+.5*t.width,y:n+.5*t.height}}const H=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const o=q(e,e.left,e.top),i=[];for(const a of r){const{id:t}=a,e=n.get(t);if(e){const n=z(q(e),o);i.push({id:t,data:{droppableContainer:a,value:n}})}}return i.sort(F)};function U(t,e){const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),o=Math.min(e.left+e.width,t.left+t.width),i=Math.min(e.top+e.height,t.top+t.height);if(o>r&&i>n){const a=(o-r)*(i-n);return+(a/(e.width*e.height+t.width*t.height-a)).toFixed(4)}return 0}const G=t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const o=[];for(const i of r){const{id:t}=i,r=n.get(t);if(r){const n=U(r,e);n>0&&o.push({id:t,data:{droppableContainer:i,value:n}})}}return o.sort(J)};function Q(t,e){return t&&e?{x:t.left-e.left,y:t.top-e.top}:L}function V(t){return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),o=1;n>o;o++)r[o-1]=arguments[o];return r.reduce((e,n)=>({...e,top:e.top+t*n.y,bottom:e.bottom+t*n.y,left:e.left+t*n.x,right:e.right+t*n.x}),{...e})}}const Z=V(1),$={ignoreTransform:!1};function _(t,e){void 0===e&&(e=$);let n=t.getBoundingClientRect();if(e.ignoreTransform){const{transform:e,transformOrigin:r}=a(t).getComputedStyle(t);e&&(n=function(t,e,n){const r=function(t){if(t.startsWith("matrix3d(")){const e=t.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}if(t.startsWith("matrix(")){const e=t.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}(e);if(!r)return t;const{scaleX:o,scaleY:i,x:a,y:l}=r,s=t.left-a-(1-o)*parseFloat(n),c=t.top-l-(1-i)*parseFloat(n.slice(n.indexOf(" ")+1)),u=o?t.width/o:t.width,d=i?t.height/i:t.height;return{width:u,height:d,top:c,right:s+u,bottom:c+d,left:s}}(n,e,r))}const{top:r,left:o,width:i,height:l,bottom:s,right:c}=n;return{top:r,left:o,width:i,height:l,bottom:s,right:c}}function tt(t){return _(t,{ignoreTransform:!0})}function et(t,e){const n=[];return t?function r(o){if(null!=e&&n.length>=e)return n;if(!o)return n;if(l(o)&&null!=o.scrollingElement&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!s(o)||c(o))return n;if(n.includes(o))return n;const i=a(t).getComputedStyle(o);return o!==t&&function(t,e){void 0===e&&(e=a(t).getComputedStyle(t));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(t=>{const r=e[t];return"string"==typeof r&&n.test(r)})}(o,i)&&n.push(o),function(t,e){return void 0===e&&(e=a(t).getComputedStyle(t)),"fixed"===e.position}(o,i)?n:r(o.parentNode)}(t):n}function nt(t){const[e]=et(t,1);return null!=e?e:null}function rt(t){return r&&t?o(t)?t:i(t)?l(t)||t===u(t).scrollingElement?window:s(t)?t:null:null:null}function ot(t){return o(t)?t.scrollX:t.scrollLeft}function it(t){return o(t)?t.scrollY:t.scrollTop}function at(t){return{x:ot(t),y:it(t)}}var lt,st;function ct(t){return!(!r||!t)&&t===document.scrollingElement}function ut(t){const e={x:0,y:0},n=ct(t)?{height:window.innerHeight,width:window.innerWidth}:{height:t.clientHeight,width:t.clientWidth},r={x:t.scrollWidth-n.width,y:t.scrollHeight-n.height};return{isTop:t.scrollTop<=e.y,isLeft:t.scrollLeft<=e.x,isBottom:t.scrollTop>=r.y,isRight:t.scrollLeft>=r.x,maxScroll:r,minScroll:e}}(st=lt||(lt={}))[st.Forward=1]="Forward",st[st.Backward=-1]="Backward";const dt={x:.2,y:.2};function vt(t,e,n,r,o){let{top:i,left:a,right:l,bottom:s}=n;void 0===r&&(r=10),void 0===o&&(o=dt);const{isTop:c,isBottom:u,isLeft:d,isRight:v}=ut(t),f={x:0,y:0},h={x:0,y:0},p=e.height*o.y,g=e.width*o.x;return c||i>e.top+p?u||s<e.bottom-p||(f.y=lt.Forward,h.y=r*Math.abs((e.bottom-p-s)/p)):(f.y=lt.Backward,h.y=r*Math.abs((e.top+p-i)/p)),v||l<e.right-g?d||a>e.left+g||(f.x=lt.Backward,h.x=r*Math.abs((e.left+g-a)/g)):(f.x=lt.Forward,h.x=r*Math.abs((e.right-g-l)/g)),{direction:f,speed:h}}function ft(t){if(t===document.scrollingElement){const{innerWidth:t,innerHeight:e}=window;return{top:0,left:0,right:t,bottom:e,width:t,height:e}}const{top:e,left:n,right:r,bottom:o}=t.getBoundingClientRect();return{top:e,left:n,right:r,bottom:o,width:t.clientWidth,height:t.clientHeight}}function ht(t){return t.reduce((t,e)=>w(t,at(e)),L)}const pt=[["x",["left","right"],function(t){return t.reduce((t,e)=>t+ot(e),0)}],["y",["top","bottom"],function(t){return t.reduce((t,e)=>t+it(e),0)}]];class gt{constructor(t,e){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=et(e),r=ht(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,i,a]of pt)for(const t of i)Object.defineProperty(this,t,{get:()=>{const e=a(n),i=r[o]-e;return this.rect[t]+i},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class bt{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var e;return null==(e=this.target)?void 0:e.removeEventListener(...t)})},this.target=t}add(t,e,n){var r;null==(r=this.target)||r.addEventListener(t,e,n),this.listeners.push([t,e,n])}}function mt(t,e){const n=Math.abs(t.x),r=Math.abs(t.y);return"number"==typeof e?Math.sqrt(n**2+r**2)>e:"x"in e&&"y"in e?n>e.x&&r>e.y:"x"in e?n>e.x:"y"in e&&r>e.y}var yt,wt,xt,Rt;function Dt(t){t.preventDefault()}function Nt(t){t.stopPropagation()}(wt=yt||(yt={})).Click="click",wt.DragStart="dragstart",wt.Keydown="keydown",wt.ContextMenu="contextmenu",wt.Resize="resize",wt.SelectionChange="selectionchange",wt.VisibilityChange="visibilitychange",(Rt=xt||(xt={})).Space="Space",Rt.Down="ArrowDown",Rt.Right="ArrowRight",Rt.Left="ArrowLeft",Rt.Up="ArrowUp",Rt.Esc="Escape",Rt.Enter="Enter",Rt.Tab="Tab";const Ct={start:[xt.Space,xt.Enter],cancel:[xt.Esc],end:[xt.Space,xt.Enter,xt.Tab]},It=(t,e)=>{let{currentCoordinates:n}=e;switch(t.code){case xt.Right:return{...n,x:n.x+25};case xt.Left:return{...n,x:n.x-25};case xt.Down:return{...n,y:n.y+25};case xt.Up:return{...n,y:n.y-25}}};class Mt{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:e}}=t;this.props=t,this.listeners=new bt(u(e)),this.windowListeners=new bt(a(e)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(yt.Resize,this.handleCancel),this.windowListeners.add(yt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(yt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:e}=this.props,n=t.node.current;n&&function(t,e){if(void 0===e&&(e=_),!t)return;const{top:n,left:r,bottom:o,right:i}=e(t);nt(t)&&(o>0&&i>0&&n<window.innerHeight&&r<window.innerWidth||t.scrollIntoView({block:"center",inline:"center"}))}(n),e(L)}handleKeyDown(t){if(R(t)){const{active:e,context:n,options:r}=this.props,{keyboardCodes:o=Ct,coordinateGetter:i=It,scrollBehavior:a="smooth"}=r,{code:l}=t;if(o.end.includes(l))return void this.handleEnd(t);if(o.cancel.includes(l))return void this.handleCancel(t);const{collisionRect:s}=n.current,c=s?{x:s.left,y:s.top}:L;this.referenceCoordinates||(this.referenceCoordinates=c);const u=i(t,{active:e,context:n.current,currentCoordinates:c});if(u){const e=x(u,c),r={x:0,y:0},{scrollableAncestors:o}=n.current;for(const n of o){const o=t.code,{isTop:i,isRight:l,isLeft:s,isBottom:c,maxScroll:d,minScroll:v}=ut(n),f=ft(n),h={x:Math.min(o===xt.Right?f.right-f.width/2:f.right,Math.max(o===xt.Right?f.left:f.left+f.width/2,u.x)),y:Math.min(o===xt.Down?f.bottom-f.height/2:f.bottom,Math.max(o===xt.Down?f.top:f.top+f.height/2,u.y))},p=o===xt.Right&&!l||o===xt.Left&&!s,g=o===xt.Down&&!c||o===xt.Up&&!i;if(p&&h.x!==u.x){const t=n.scrollLeft+e.x,i=o===xt.Right&&t<=d.x||o===xt.Left&&t>=v.x;if(i&&!e.y)return void n.scrollTo({left:t,behavior:a});r.x=i?n.scrollLeft-t:o===xt.Right?n.scrollLeft-d.x:n.scrollLeft-v.x,r.x&&n.scrollBy({left:-r.x,behavior:a});break}if(g&&h.y!==u.y){const t=n.scrollTop+e.y,i=o===xt.Down&&t<=d.y||o===xt.Up&&t>=v.y;if(i&&!e.x)return void n.scrollTo({top:t,behavior:a});r.y=i?n.scrollTop-t:o===xt.Down?n.scrollTop-d.y:n.scrollTop-v.y,r.y&&n.scrollBy({top:-r.y,behavior:a});break}}this.handleMove(t,w(x(u,this.referenceCoordinates),r))}}}handleMove(t,e){const{onMove:n}=this.props;t.preventDefault(),n(e)}handleEnd(t){const{onEnd:e}=this.props;t.preventDefault(),this.detach(),e()}handleCancel(t){const{onCancel:e}=this.props;t.preventDefault(),this.detach(),e()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function At(t){return!(!t||!("distance"in t))}function St(t){return!(!t||!("delay"in t))}Mt.activators=[{eventName:"onKeyDown",handler:(t,e,n)=>{let{keyboardCodes:r=Ct,onActivation:o}=e,{active:i}=n;const{code:a}=t.nativeEvent;if(r.start.includes(a)){const e=i.activatorNode.current;return!(e&&t.target!==e||(t.preventDefault(),null==o||o({event:t.nativeEvent}),0))}return!1}}];class Tt{constructor(t,e,n){var r;void 0===n&&(n=function(t){const{EventTarget:e}=a(t);return t instanceof e?t:u(t)}(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=e;const{event:o}=t,{target:i}=o;this.props=t,this.events=e,this.document=u(i),this.documentListeners=new bt(this.document),this.listeners=new bt(n),this.windowListeners=new bt(a(i)),this.initialCoordinates=null!=(r=D(o))?r:L,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:e,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(yt.Resize,this.handleCancel),this.windowListeners.add(yt.DragStart,Dt),this.windowListeners.add(yt.VisibilityChange,this.handleCancel),this.windowListeners.add(yt.ContextMenu,Dt),this.documentListeners.add(yt.Keydown,this.handleKeydown),e){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(St(e))return this.timeoutId=setTimeout(this.handleStart,e.delay),void this.handlePending(e);if(At(e))return void this.handlePending(e)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,e){const{active:n,onPending:r}=this.props;r(n,t,this.initialCoordinates,e)}handleStart(){const{initialCoordinates:t}=this,{onStart:e}=this.props;t&&(this.activated=!0,this.documentListeners.add(yt.Click,Nt,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(yt.SelectionChange,this.removeTextSelection),e(t))}handleMove(t){var e;const{activated:n,initialCoordinates:r,props:o}=this,{onMove:i,options:{activationConstraint:a}}=o;if(!r)return;const l=null!=(e=D(t))?e:L,s=x(r,l);if(!n&&a){if(At(a)){if(null!=a.tolerance&&mt(s,a.tolerance))return this.handleCancel();if(mt(s,a.distance))return this.handleStart()}return St(a)&&mt(s,a.tolerance)?this.handleCancel():void this.handlePending(a,s)}t.cancelable&&t.preventDefault(),i(l)}handleEnd(){const{onAbort:t,onEnd:e}=this.props;this.detach(),this.activated||t(this.props.active),e()}handleCancel(){const{onAbort:t,onCancel:e}=this.props;this.detach(),this.activated||t(this.props.active),e()}handleKeydown(t){t.code===xt.Esc&&this.handleCancel()}removeTextSelection(){var t;null==(t=this.document.getSelection())||t.removeAllRanges()}}const Et={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ot extends Tt{constructor(t){const{event:e}=t,n=u(e.target);super(t,Et,n)}}Ot.activators=[{eventName:"onPointerDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return!(!n.isPrimary||0!==n.button||(null==r||r({event:n}),0))}}];const kt={move:{name:"mousemove"},end:{name:"mouseup"}};var jt,Xt;(Xt=jt||(jt={}))[Xt.RightClick=2]="RightClick",class extends Tt{constructor(t){super(t,kt,u(t.event.target))}}.activators=[{eventName:"onMouseDown",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;return n.button!==jt.RightClick&&(null==r||r({event:n}),!0)}}];const Yt={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var Bt,Pt,Lt,zt;(class extends Tt{constructor(t){super(t,Yt)}static setup(){return window.addEventListener(Yt.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Yt.move.name,t)};function t(){}}}).activators=[{eventName:"onTouchStart",handler:(t,e)=>{let{nativeEvent:n}=t,{onActivation:r}=e;const{touches:o}=n;return 1>=o.length&&(null==r||r({event:n}),!0)}}],(Pt=Bt||(Bt={}))[Pt.Pointer=0]="Pointer",Pt[Pt.DraggableRect=1]="DraggableRect",(zt=Lt||(Lt={}))[zt.TreeOrder=0]="TreeOrder",zt[zt.ReversedTreeOrder=1]="ReversedTreeOrder";const Ft={x:{[lt.Backward]:!1,[lt.Forward]:!1},y:{[lt.Backward]:!1,[lt.Forward]:!1}};var Jt,Kt,Wt;(Kt=Jt||(Jt={}))[Kt.Always=0]="Always",Kt[Kt.BeforeDragging=1]="BeforeDragging",Kt[Kt.WhileDragging=2]="WhileDragging",(Wt||(Wt={})).Optimized="optimized";const qt=new Map;function Ht(t,e){return h(n=>t?n||("function"==typeof e?e(t):t):null,[e,t])}function Ut(e){let{callback:n,disabled:r}=e;const o=v(n),i=t.useMemo(()=>{if(r||"undefined"==typeof window||void 0===window.ResizeObserver)return;const{ResizeObserver:t}=window;return new t(o)},[r]);return t.useEffect(()=>()=>null==i?void 0:i.disconnect(),[i]),i}function Gt(t){return new gt(_(t),t)}function Qt(e,n,r){void 0===n&&(n=Gt);const[o,i]=t.useState(null);function a(){i(t=>{if(!e)return null;var o;if(!1===e.isConnected)return null!=(o=null!=t?t:r)?o:null;const i=n(e);return JSON.stringify(t)===JSON.stringify(i)?t:i})}const l=function(e){let{callback:n,disabled:r}=e;const o=v(n),i=t.useMemo(()=>{if(r||"undefined"==typeof window||void 0===window.MutationObserver)return;const{MutationObserver:t}=window;return new t(o)},[o,r]);return t.useEffect(()=>()=>null==i?void 0:i.disconnect(),[i]),i}({callback(t){if(e)for(const n of t){const{type:t,target:r}=n;if("childList"===t&&r instanceof HTMLElement&&r.contains(e)){a();break}}}}),s=Ut({callback:a});return d(()=>{a(),e?(null==s||s.observe(e),null==l||l.observe(document.body,{childList:!0,subtree:!0})):(null==s||s.disconnect(),null==l||l.disconnect())},[e]),o}const Vt=[];function Zt(e,n){void 0===n&&(n=[]);const r=t.useRef(null);return t.useEffect(()=>{r.current=null},n),t.useEffect(()=>{const t=e!==L;t&&!r.current&&(r.current=e),!t&&r.current&&(r.current=null)},[e]),r.current?x(e,r.current):L}function $t(e){return t.useMemo(()=>e?function(t){const e=t.innerWidth,n=t.innerHeight;return{top:0,left:0,right:e,bottom:n,width:e,height:n}}(e):null,[e])}const _t=[],te=[{sensor:Ot,options:{}},{sensor:Mt,options:{}}],ee={current:{}},ne={draggable:{measure:tt},droppable:{measure:tt,strategy:Jt.WhileDragging,frequency:Wt.Optimized},dragOverlay:{measure:_}};class re extends Map{get(t){var e;return null!=t&&null!=(e=super.get(t))?e:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:e}=t;return!e})}getNodeFor(t){var e,n;return null!=(e=null==(n=this.get(t))?void 0:n.node.current)?e:void 0}}const oe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new re,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Y},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:ne,measureDroppableContainers:Y,windowRect:null,measuringScheduled:!1},ie={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Y,draggableNodes:new Map,over:null,measureDroppableContainers:Y},ae=t.createContext(ie),le=t.createContext(oe);function se(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new re}}}function ce(t,e){switch(e.type){case j.DragStart:return{...t,draggable:{...t.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case j.DragMove:return null==t.draggable.active?t:{...t,draggable:{...t.draggable,translate:{x:e.coordinates.x-t.draggable.initialCoordinates.x,y:e.coordinates.y-t.draggable.initialCoordinates.y}}};case j.DragEnd:case j.DragCancel:return{...t,draggable:{...t.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case j.RegisterDroppable:{const{element:n}=e,{id:r}=n,o=new re(t.droppable.containers);return o.set(r,n),{...t,droppable:{...t.droppable,containers:o}}}case j.SetDroppableDisabled:{const{id:n,key:r,disabled:o}=e,i=t.droppable.containers.get(n);if(!i||r!==i.key)return t;const a=new re(t.droppable.containers);return a.set(n,{...i,disabled:o}),{...t,droppable:{...t.droppable,containers:a}}}case j.UnregisterDroppable:{const{id:n,key:r}=e,o=t.droppable.containers.get(n);if(!o||r!==o.key)return t;const i=new re(t.droppable.containers);return i.delete(n),{...t,droppable:{...t.droppable,containers:i}}}default:return t}}function ue(e){let{disabled:n}=e;const{active:r,activatorEvent:o,draggableNodes:i}=t.useContext(ae),a=g(o),l=g(null==r?void 0:r.id);return t.useEffect(()=>{if(!n&&!o&&a&&null!=l){if(!R(a))return;if(document.activeElement===a.target)return;const t=i.get(l);if(!t)return;const{activatorNode:e,node:n}=t;if(!e.current&&!n.current)return;requestAnimationFrame(()=>{for(const t of[e.current,n.current]){if(!t)continue;const e=I(t);if(e){e.focus();break}}})}},[o,n,i,l,a]),null}const de=t.createContext({...L,scaleX:1,scaleY:1});var ve,fe;(fe=ve||(ve={}))[fe.Uninitialized=0]="Uninitialized",fe[fe.Initializing=1]="Initializing",fe[fe.Initialized=2]="Initialized";const he=t.memo(function(o){var i,l,c,u;let{id:v,accessibility:b,autoScroll:y=!0,children:x,sensors:R=te,collisionDetection:N=G,measuring:C,modifiers:I,...M}=o;const A=t.useReducer(ce,void 0,se),[S,E]=A,[O,X]=function(){const[e]=t.useState(()=>new Set),n=t.useCallback(t=>(e.add(t),()=>e.delete(t)),[e]);return[t.useCallback(t=>{let{type:n,event:r}=t;e.forEach(t=>{var e;return null==(e=t[n])?void 0:e.call(t,r)})},[e]),n]}(),[Y,B]=t.useState(ve.Uninitialized),P=Y===ve.Initialized,{draggable:{active:z,nodes:F,translate:J},droppable:{containers:K}}=S,q=null!=z?F.get(z):null,H=t.useRef({initial:null,translated:null}),U=t.useMemo(()=>{var t;return null!=z?{id:z,data:null!=(t=null==q?void 0:q.data)?t:ee,rect:H}:null},[z,q]),V=t.useRef(null),[$,tt]=t.useState(null),[ot,it]=t.useState(null),st=f(M,Object.values(M)),ut=m("DndDescribedBy",v),dt=t.useMemo(()=>K.getEnabled(),[K]),ft=(pt=C,t.useMemo(()=>({draggable:{...ne.draggable,...null==pt?void 0:pt.draggable},droppable:{...ne.droppable,...null==pt?void 0:pt.droppable},dragOverlay:{...ne.dragOverlay,...null==pt?void 0:pt.dragOverlay}}),[null==pt?void 0:pt.draggable,null==pt?void 0:pt.droppable,null==pt?void 0:pt.dragOverlay]));var pt;const{droppableRects:bt,measureDroppableContainers:mt,measuringScheduled:yt}=function(e,n){let{dragging:r,dependencies:o,config:i}=n;const[a,l]=t.useState(null),{frequency:s,measure:c,strategy:u}=i,d=t.useRef(e),v=function(){switch(u){case Jt.Always:return!1;case Jt.BeforeDragging:return r;default:return!r}}(),p=f(v),g=t.useCallback(function(t){void 0===t&&(t=[]),p.current||l(e=>null===e?t:e.concat(t.filter(t=>!e.includes(t))))},[p]),b=t.useRef(null),m=h(t=>{if(v&&!r)return qt;if(!t||t===qt||d.current!==e||null!=a){const t=new Map;for(let n of e){if(!n)continue;if(a&&a.length>0&&!a.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,r=e?new gt(c(e),e):null;n.rect.current=r,r&&t.set(n.id,r)}return t}return t},[e,a,r,v,c]);return t.useEffect(()=>{d.current=e},[e]),t.useEffect(()=>{v||g()},[r,v]),t.useEffect(()=>{a&&a.length>0&&l(null)},[JSON.stringify(a)]),t.useEffect(()=>{v||"number"!=typeof s||null!==b.current||(b.current=setTimeout(()=>{g(),b.current=null},s))},[s,v,g,...o]),{droppableRects:m,measureDroppableContainers:g,measuringScheduled:null!=a}}(dt,{dragging:P,dependencies:[J.x,J.y],config:ft.droppable}),wt=function(t,e){const n=null!=e?t.get(e):void 0,r=n?n.node.current:null;return h(t=>{var n;return null==e?null:null!=(n=null!=r?r:t)?n:null},[r,e])}(F,z),xt=t.useMemo(()=>ot?D(ot):null,[ot]),Rt=function(){const t=!1===(null==$?void 0:$.autoScrollEnabled),e="object"==typeof y?!1===y.enabled:!1===y,n=P&&!t&&!e;return"object"==typeof y?{...y,enabled:n}:{enabled:n}}(),Dt=function(t,e){return Ht(t,e)}(wt,ft.draggable.measure);!function(e){let{activeNode:n,measure:r,initialRect:o,config:i=!0}=e;const a=t.useRef(!1),{x:l,y:s}="boolean"==typeof i?{x:i,y:i}:i;d(()=>{if(!l&&!s||!n)return void(a.current=!1);if(a.current||!o)return;const t=null==n?void 0:n.node.current;if(!t||!1===t.isConnected)return;const e=Q(r(t),o);if(l||(e.x=0),s||(e.y=0),a.current=!0,Math.abs(e.x)>0||Math.abs(e.y)>0){const n=nt(t);n&&n.scrollBy({top:e.y,left:e.x})}},[n,l,s,o,r])}({activeNode:null!=z?F.get(z):null,config:Rt.layoutShiftCompensation,initialRect:Dt,measure:ft.draggable.measure});const Nt=Qt(wt,ft.draggable.measure,Dt),Ct=Qt(wt?wt.parentElement:null),It=t.useRef({activatorEvent:null,active:null,activeNode:wt,collisionRect:null,collisions:null,droppableRects:bt,draggableNodes:F,draggingNode:null,draggingNodeRect:null,droppableContainers:K,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Mt=K.getNodeFor(null==(i=It.current.over)?void 0:i.id),At=function(e){let{measure:n}=e;const[r,o]=t.useState(null),i=Ut({callback:t.useCallback(t=>{for(const{target:e}of t)if(s(e)){o(t=>{const r=n(e);return t?{...t,width:r.width,height:r.height}:r});break}},[n])}),a=t.useCallback(t=>{const e=function(t){if(!t)return null;if(t.children.length>1)return t;const e=t.children[0];return s(e)?e:t}(t);null==i||i.disconnect(),e&&(null==i||i.observe(e)),o(e?n(e):null)},[n,i]),[l,c]=p(a);return t.useMemo(()=>({nodeRef:l,rect:r,setRef:c}),[r,l,c])}({measure:ft.dragOverlay.measure}),St=null!=(l=At.nodeRef.current)?l:wt,Tt=P?null!=(c=At.rect)?c:Nt:null,Et=!(!At.nodeRef.current||!At.rect),Ot=Q(kt=Et?null:Nt,Ht(kt));var kt;const jt=$t(St?a(St):null),Xt=function(e){const n=t.useRef(e),r=h(t=>e?t&&t!==Vt&&e&&n.current&&e.parentNode===n.current.parentNode?t:et(e):Vt,[e]);return t.useEffect(()=>{n.current=e},[e]),r}(P?null!=Mt?Mt:wt:null),Yt=function(e,n){void 0===n&&(n=_);const[r]=e,o=$t(r?a(r):null),[i,l]=t.useState(_t);function s(){l(()=>e.length?e.map(t=>ct(t)?o:new gt(n(t),t)):_t)}const c=Ut({callback:s});return d(()=>{null==c||c.disconnect(),s(),e.forEach(t=>null==c?void 0:c.observe(t))},[e]),i}(Xt),Pt=function(t,e){let{transform:n,...r}=e;return null!=t&&t.length?t.reduce((t,e)=>e({transform:t,...r}),n):n}(I,{transform:{x:J.x-Ot.x,y:J.y-Ot.y,scaleX:1,scaleY:1},activatorEvent:ot,active:U,activeNodeRect:Nt,containerNodeRect:Ct,draggingNodeRect:Tt,over:It.current.over,overlayNodeRect:At.rect,scrollableAncestors:Xt,scrollableAncestorRects:Yt,windowRect:jt}),zt=xt?w(xt,J):null,Kt=function(e){const[n,r]=t.useState(null),o=t.useRef(e),i=t.useCallback(t=>{const e=rt(t.target);e&&r(t=>t?(t.set(e,at(e)),new Map(t)):null)},[]);return t.useEffect(()=>{const t=o.current;if(e!==t){n(t);const a=e.map(t=>{const e=rt(t);return e?(e.addEventListener("scroll",i,{passive:!0}),[e,at(e)]):null}).filter(t=>null!=t);r(a.length?new Map(a):null),o.current=e}return()=>{n(e),n(t)};function n(t){t.forEach(t=>{const e=rt(t);null==e||e.removeEventListener("scroll",i)})}},[i,e]),t.useMemo(()=>e.length?n?Array.from(n.values()).reduce((t,e)=>w(t,e),L):ht(e):L,[e,n])}(Xt),Wt=Zt(Kt),Gt=Zt(Kt,[Nt]),re=w(Pt,Wt),oe=Tt?Z(Tt,Pt):null,ie=U&&oe?N({active:U,collisionRect:oe,droppableRects:bt,droppableContainers:dt,pointerCoordinates:zt}):null,fe=W(ie,"id"),[he,pe]=t.useState(null),ge=function(t,e,n){return{...t,scaleX:e&&n?e.width/n.width:1,scaleY:e&&n?e.height/n.height:1}}(Et?Pt:w(Pt,Gt),null!=(u=null==he?void 0:he.rect)?u:null,Nt),be=t.useRef(null),me=t.useCallback((t,e)=>{let{sensor:r,options:o}=e;if(null==V.current)return;const i=F.get(V.current);if(!i)return;const a=t.nativeEvent,l=new r({active:V.current,activeNode:i,event:a,options:o,context:It,onAbort(t){if(!F.get(t))return;const{onDragAbort:e}=st.current,n={id:t};null==e||e(n),O({type:"onDragAbort",event:n})},onPending(t,e,n,r){if(!F.get(t))return;const{onDragPending:o}=st.current,i={id:t,constraint:e,initialCoordinates:n,offset:r};null==o||o(i),O({type:"onDragPending",event:i})},onStart(t){const e=V.current;if(null==e)return;const r=F.get(e);if(!r)return;const{onDragStart:o}=st.current,i={activatorEvent:a,active:{id:e,data:r.data,rect:H}};n.unstable_batchedUpdates(()=>{null==o||o(i),B(ve.Initializing),E({type:j.DragStart,initialCoordinates:t,active:e}),O({type:"onDragStart",event:i}),tt(be.current),it(a)})},onMove(t){E({type:j.DragMove,coordinates:t})},onEnd:s(j.DragEnd),onCancel:s(j.DragCancel)});function s(t){return async function(){const{active:e,collisions:r,over:o,scrollAdjustedTranslate:i}=It.current;let l=null;if(e&&i){const{cancelDrop:n}=st.current;l={activatorEvent:a,active:e,collisions:r,delta:i,over:o},t===j.DragEnd&&"function"==typeof n&&await Promise.resolve(n(l))&&(t=j.DragCancel)}V.current=null,n.unstable_batchedUpdates(()=>{E({type:t}),B(ve.Uninitialized),pe(null),tt(null),it(null),be.current=null;const e=t===j.DragEnd?"onDragEnd":"onDragCancel";if(l){const t=st.current[e];null==t||t(l),O({type:e,event:l})}})}}be.current=l},[F]),ye=function(e,n){return t.useMemo(()=>e.reduce((t,e)=>{const{sensor:r}=e;return[...t,...r.activators.map(t=>({eventName:t.eventName,handler:n(t.handler,e)}))]},[]),[e,n])}(R,t.useCallback((t,e)=>(n,r)=>{const o=n.nativeEvent,i=F.get(r);if(null!==V.current||!i||o.dndKit||o.defaultPrevented)return;const a={active:i};!0===t(n,e.options,a)&&(o.dndKit={capturedBy:e.sensor},V.current=r,me(n,e))},[F,me]));!function(e){t.useEffect(()=>{if(!r)return;const t=e.map(t=>{let{sensor:e}=t;return null==e.setup?void 0:e.setup()});return()=>{for(const e of t)null==e||e()}},e.map(t=>{let{sensor:e}=t;return e}))}(R),d(()=>{Nt&&Y===ve.Initializing&&B(ve.Initialized)},[Nt,Y]),t.useEffect(()=>{const{onDragMove:t}=st.current,{active:e,activatorEvent:r,collisions:o,over:i}=It.current;if(!e||!r)return;const a={active:e,activatorEvent:r,collisions:o,delta:{x:re.x,y:re.y},over:i};n.unstable_batchedUpdates(()=>{null==t||t(a),O({type:"onDragMove",event:a})})},[re.x,re.y]),t.useEffect(()=>{const{active:t,activatorEvent:e,collisions:r,droppableContainers:o,scrollAdjustedTranslate:i}=It.current;if(!t||null==V.current||!e||!i)return;const{onDragOver:a}=st.current,l=o.get(fe),s=l&&l.rect.current?{id:l.id,rect:l.rect.current,data:l.data,disabled:l.disabled}:null,c={active:t,activatorEvent:e,collisions:r,delta:{x:i.x,y:i.y},over:s};n.unstable_batchedUpdates(()=>{pe(s),null==a||a(c),O({type:"onDragOver",event:c})})},[fe]),d(()=>{It.current={activatorEvent:ot,active:U,activeNode:wt,collisionRect:oe,collisions:ie,droppableRects:bt,draggableNodes:F,draggingNode:St,draggingNodeRect:Tt,droppableContainers:K,over:he,scrollableAncestors:Xt,scrollAdjustedTranslate:re},H.current={initial:Tt,translated:oe}},[U,wt,ie,oe,F,St,Tt,bt,K,he,Xt,re]),function(e){let{acceleration:n,activator:r=Bt.Pointer,canScroll:o,draggingRect:i,enabled:a,interval:l=5,order:s=Lt.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:v,threshold:f}=e;const p=function(t){let{delta:e,disabled:n}=t;const r=g(e);return h(t=>{if(n||!r||!t)return Ft;const o=Math.sign(e.x-r.x),i=Math.sign(e.y-r.y);return{x:{[lt.Backward]:t.x[lt.Backward]||-1===o,[lt.Forward]:t.x[lt.Forward]||1===o},y:{[lt.Backward]:t.y[lt.Backward]||-1===i,[lt.Forward]:t.y[lt.Forward]||1===i}}},[n,e,r])}({delta:v,disabled:!a}),[b,m]=function(){const e=t.useRef(null);return[t.useCallback((t,n)=>{e.current=setInterval(t,n)},[]),t.useCallback(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),y=t.useRef({x:0,y:0}),w=t.useRef({x:0,y:0}),x=t.useMemo(()=>{switch(r){case Bt.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case Bt.DraggableRect:return i}},[r,i,c]),R=t.useRef(null),D=t.useCallback(()=>{const t=R.current;if(!t)return;const e=y.current.x*w.current.x,n=y.current.y*w.current.y;t.scrollBy(e,n)},[]),N=t.useMemo(()=>s===Lt.TreeOrder?[...u].reverse():u,[s,u]);t.useEffect(()=>{if(a&&u.length&&x){for(const t of N){if(!1===(null==o?void 0:o(t)))continue;const e=u.indexOf(t),r=d[e];if(!r)continue;const{direction:i,speed:a}=vt(t,r,x,n,f);for(const t of["x","y"])p[t][i[t]]||(a[t]=0,i[t]=0);if(a.x>0||a.y>0)return m(),R.current=t,b(D,l),y.current=a,void(w.current=i)}y.current={x:0,y:0},w.current={x:0,y:0},m()}else m()},[n,D,o,m,a,l,JSON.stringify(x),JSON.stringify(p),b,u,N,d,JSON.stringify(f)])}({...Rt,delta:J,draggingRect:oe,pointerCoordinates:zt,scrollableAncestors:Xt,scrollableAncestorRects:Yt});const we=t.useMemo(()=>({active:U,activeNode:wt,activeNodeRect:Nt,activatorEvent:ot,collisions:ie,containerNodeRect:Ct,dragOverlay:At,draggableNodes:F,droppableContainers:K,droppableRects:bt,over:he,measureDroppableContainers:mt,scrollableAncestors:Xt,scrollableAncestorRects:Yt,measuringConfiguration:ft,measuringScheduled:yt,windowRect:jt}),[U,wt,Nt,ot,ie,Ct,At,F,K,bt,he,mt,Xt,Yt,ft,yt,jt]),xe=t.useMemo(()=>({activatorEvent:ot,activators:ye,active:U,activeNodeRect:Nt,ariaDescribedById:{draggable:ut},dispatch:E,draggableNodes:F,over:he,measureDroppableContainers:mt}),[ot,ye,U,Nt,E,ut,F,he,mt]);return e.createElement(T.Provider,{value:X},e.createElement(ae.Provider,{value:xe},e.createElement(le.Provider,{value:we},e.createElement(de.Provider,{value:ge},x)),e.createElement(ue,{disabled:!1===(null==b?void 0:b.restoreFocus)})),e.createElement(k,{...b,hiddenTextDescribedById:ut}))}),pe=t.createContext(null),ge="button",be={timeout:25};function me(t,e,n){const r=t.slice();return r.splice(0>n?r.length+n:n,0,r.splice(e,1)[0]),r}function ye(t,e){return t.reduce((t,n,r)=>{const o=e.get(n);return o&&(t[r]=o),t},Array(t.length))}function we(t){return null!==t&&t>=0}const xe=t=>{let{rects:e,activeIndex:n,overIndex:r,index:o}=t;const i=me(e,r,n),a=e[o],l=i[o];return l&&a?{x:l.left-a.left,y:l.top-a.top,scaleX:l.width/a.width,scaleY:l.height/a.height}:null},Re={scaleX:1,scaleY:1},De=t=>{var e;let{activeIndex:n,activeNodeRect:r,index:o,rects:i,overIndex:a}=t;const l=null!=(e=i[n])?e:r;if(!l)return null;if(o===n){const t=i[a];return t?{x:0,y:a>n?t.top+t.height-(l.top+l.height):t.top-l.top,...Re}:null}const s=function(t,e,n){const r=t[e],o=t[e-1],i=t[e+1];return r?e>n?o?r.top-(o.top+o.height):i?i.top-(r.top+r.height):0:i?i.top-(r.top+r.height):o?r.top-(o.top+o.height):0:0}(i,o,n);return o>n&&a>=o?{x:0,y:-l.height-s,...Re}:n>o&&o>=a?{x:0,y:l.height+s,...Re}:{x:0,y:0,...Re}},Ne="Sortable",Ce=e.createContext({activeIndex:-1,containerId:Ne,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:xe,disabled:{draggable:!1,droppable:!1}});function Ie(n){let{children:r,id:o,items:i,strategy:a=xe,disabled:l=!1}=n;const{active:s,dragOverlay:c,droppableRects:u,over:v,measureDroppableContainers:f}=t.useContext(le),h=m(Ne,o),p=!(null===c.rect),g=t.useMemo(()=>i.map(t=>"object"==typeof t&&"id"in t?t.id:t),[i]),b=null!=s,y=s?g.indexOf(s.id):-1,w=v?g.indexOf(v.id):-1,x=t.useRef(g),R=!function(t,e){if(t===e)return!0;if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(g,x.current),D=-1!==w&&-1===y||R,N=function(t){return"boolean"==typeof t?{draggable:t,droppable:t}:t}(l);d(()=>{R&&b&&f(g)},[R,g,b,f]),t.useEffect(()=>{x.current=g},[g]);const C=t.useMemo(()=>({activeIndex:y,containerId:h,disabled:N,disableTransforms:D,items:g,overIndex:w,useDragOverlay:p,sortedRects:ye(g,u),strategy:a}),[y,h,N.draggable,N.droppable,D,g,w,u,p,a]);return e.createElement(Ce.Provider,{value:C},r)}const Me=t=>{let{id:e,items:n,activeIndex:r,overIndex:o}=t;return me(n,r,o).indexOf(e)},Ae=t=>{let{containerId:e,isSorting:n,wasDragging:r,index:o,items:i,newIndex:a,previousItems:l,previousContainerId:s,transition:c}=t;return!(!c||!r||l!==i&&o===a||!n&&(a===o||e!==s))},Se={duration:200,easing:"ease"},Te="transform",Ee=N.Transition.toString({property:Te,duration:0,easing:"linear"}),Oe={roleDescription:"sortable"};function ke(e){let{animateLayoutChanges:n=Ae,attributes:r,disabled:o,data:i,getNewIndex:a=Me,id:l,strategy:s,resizeObserverConfig:c,transition:u=Se}=e;const{items:v,containerId:h,activeIndex:g,disabled:b,disableTransforms:y,sortedRects:w,overIndex:x,useDragOverlay:D,strategy:C}=t.useContext(Ce),I=function(t,e){var n,r;return"boolean"==typeof t?{draggable:t,droppable:!1}:{draggable:null!=(n=null==t?void 0:t.draggable)?n:e.draggable,droppable:null!=(r=null==t?void 0:t.droppable)?r:e.droppable}}(o,b),M=v.indexOf(l),A=t.useMemo(()=>({sortable:{containerId:h,index:M,items:v},...i}),[h,i,M,v]),S=t.useMemo(()=>v.slice(v.indexOf(l)),[v,l]),{rect:T,node:E,isOver:O,setNodeRef:k}=function(e){let{data:n,disabled:r=!1,id:o,resizeObserverConfig:i}=e;const a=m("Droppable"),{active:l,dispatch:s,over:c,measureDroppableContainers:u}=t.useContext(ae),d=t.useRef({disabled:r}),v=t.useRef(!1),h=t.useRef(null),g=t.useRef(null),{disabled:b,updateMeasurementsFor:y,timeout:w}={...be,...i},x=f(null!=y?y:o),R=Ut({callback:t.useCallback(()=>{v.current?(null!=g.current&&clearTimeout(g.current),g.current=setTimeout(()=>{u(Array.isArray(x.current)?x.current:[x.current]),g.current=null},w)):v.current=!0},[w]),disabled:b||!l}),D=t.useCallback((t,e)=>{R&&(e&&(R.unobserve(e),v.current=!1),t&&R.observe(t))},[R]),[N,C]=p(D),I=f(n);return t.useEffect(()=>{R&&N.current&&(R.disconnect(),v.current=!1,R.observe(N.current))},[N,R]),t.useEffect(()=>(s({type:j.RegisterDroppable,element:{id:o,key:a,disabled:r,node:N,rect:h,data:I}}),()=>s({type:j.UnregisterDroppable,key:a,id:o})),[o]),t.useEffect(()=>{r!==d.current.disabled&&(s({type:j.SetDroppableDisabled,id:o,key:a,disabled:r}),d.current.disabled=r)},[o,a,r,s]),{active:l,rect:h,isOver:(null==c?void 0:c.id)===o,node:N,over:c,setNodeRef:C}}({id:l,data:A,disabled:I.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:X,activatorEvent:Y,activeNodeRect:B,attributes:P,setNodeRef:L,listeners:z,isDragging:F,over:J,setActivatorNodeRef:K,transform:W}=function(e){let{id:n,data:r,disabled:o=!1,attributes:i}=e;const a=m("Draggable"),{activators:l,activatorEvent:s,active:c,activeNodeRect:u,ariaDescribedById:v,draggableNodes:h,over:g}=t.useContext(ae),{role:b=ge,roleDescription:y="draggable",tabIndex:w=0}=null!=i?i:{},x=(null==c?void 0:c.id)===n,R=t.useContext(x?de:pe),[D,N]=p(),[C,I]=p(),M=function(e,n){return t.useMemo(()=>e.reduce((t,e)=>{let{eventName:r,handler:o}=e;return t[r]=t=>{o(t,n)},t},{}),[e,n])}(l,n),A=f(r);return d(()=>(h.set(n,{id:n,key:a,node:D,activatorNode:C,data:A}),()=>{const t=h.get(n);t&&t.key===a&&h.delete(n)}),[h,n]),{active:c,activatorEvent:s,activeNodeRect:u,attributes:t.useMemo(()=>({role:b,tabIndex:w,"aria-disabled":o,"aria-pressed":!(!x||b!==ge)||void 0,"aria-roledescription":y,"aria-describedby":v.draggable}),[o,b,w,x,y,v.draggable]),isDragging:x,listeners:o?void 0:M,node:D,over:g,setNodeRef:N,setActivatorNodeRef:I,transform:R}}({id:l,data:A,attributes:{...Oe,...r},disabled:I.draggable}),q=function(){for(var e=arguments.length,n=Array(e),r=0;e>r;r++)n[r]=arguments[r];return t.useMemo(()=>t=>{n.forEach(e=>e(t))},n)}(k,L),H=!!X,U=H&&!y&&we(g)&&we(x),G=!D&&F,Q=G&&U?W:null,V=U?null!=Q?Q:(null!=s?s:C)({rects:w,activeNodeRect:B,activeIndex:g,overIndex:x,index:M}):null,Z=we(g)&&we(x)?a({id:l,items:v,activeIndex:g,overIndex:x}):M,$=null==X?void 0:X.id,tt=t.useRef({activeId:$,items:v,newIndex:Z,containerId:h}),et=v!==tt.current.items,nt=n({active:X,containerId:h,isDragging:F,isSorting:H,id:l,index:M,items:v,newIndex:tt.current.newIndex,previousItems:tt.current.items,previousContainerId:tt.current.containerId,transition:u,wasDragging:null!=tt.current.activeId}),rt=function(e){let{disabled:n,index:r,node:o,rect:i}=e;const[a,l]=t.useState(null),s=t.useRef(r);return d(()=>{if(!n&&r!==s.current&&o.current){const t=i.current;if(t){const e=_(o.current,{ignoreTransform:!0}),n={x:t.left-e.left,y:t.top-e.top,scaleX:t.width/e.width,scaleY:t.height/e.height};(n.x||n.y)&&l(n)}}r!==s.current&&(s.current=r)},[n,r,o,i]),t.useEffect(()=>{a&&l(null)},[a]),a}({disabled:!nt,index:M,node:E,rect:T});return t.useEffect(()=>{H&&tt.current.newIndex!==Z&&(tt.current.newIndex=Z),h!==tt.current.containerId&&(tt.current.containerId=h),v!==tt.current.items&&(tt.current.items=v)},[H,Z,h,v]),t.useEffect(()=>{if($===tt.current.activeId)return;if(null!=$&&null==tt.current.activeId)return void(tt.current.activeId=$);const t=setTimeout(()=>{tt.current.activeId=$},50);return()=>clearTimeout(t)},[$]),{active:X,activeIndex:g,attributes:P,data:A,rect:T,index:M,newIndex:Z,items:v,isOver:O,isSorting:H,isDragging:F,listeners:z,node:E,overIndex:x,over:J,setNodeRef:q,setActivatorNodeRef:K,setDroppableNodeRef:k,setDraggableNodeRef:L,transform:null!=rt?rt:V,transition:rt||et&&tt.current.newIndex===M?Ee:G&&!R(Y)||!u?void 0:H||nt?N.Transition.toString({...u,property:Te}):void 0}}function je(t){if(!t)return!1;const e=t.data.current;return!!(e&&"sortable"in e&&"object"==typeof e.sortable&&"containerId"in e.sortable&&"items"in e.sortable&&"index"in e.sortable)}const Xe=[xt.Down,xt.Right,xt.Up,xt.Left],Ye=(t,e)=>{let{context:{active:n,collisionRect:r,droppableRects:o,droppableContainers:i,over:a,scrollableAncestors:l}}=e;if(Xe.includes(t.code)){if(t.preventDefault(),!n||!r)return;const e=[];i.getEnabled().forEach(n=>{if(!n||null!=n&&n.disabled)return;const i=o.get(n.id);if(i)switch(t.code){case xt.Down:r.top<i.top&&e.push(n);break;case xt.Up:r.top>i.top&&e.push(n);break;case xt.Left:r.left>i.left&&e.push(n);break;case xt.Right:r.left<i.left&&e.push(n)}});const u=(t=>{let{collisionRect:e,droppableRects:n,droppableContainers:r}=t;const o=K(e),i=[];for(const a of r){const{id:t}=a,e=n.get(t);if(e){const n=K(e),r=+(o.reduce((t,e,r)=>t+z(n[r],e),0)/4).toFixed(4);i.push({id:t,data:{droppableContainer:a,value:r}})}}return i.sort(F)})({collisionRect:r,droppableRects:o,droppableContainers:e});let d=W(u,"id");if(d===(null==a?void 0:a.id)&&u.length>1&&(d=u[1].id),null!=d){const t=i.get(n.id),e=i.get(d),a=e?o.get(e.id):null,u=null==e?void 0:e.node.current;if(u&&a&&t&&e){const n=et(u).some((t,e)=>l[e]!==t),o=Be(t,e),i=(c=e,!(!je(s=t)||!je(c))&&!!Be(s,c)&&s.data.current.sortable.index<c.data.current.sortable.index),d=n||!o?{x:0,y:0}:{x:i?r.width-a.width:0,y:i?r.height-a.height:0},v={x:a.left,y:a.top};return d.x&&d.y?v:x(v,d)}}}var s,c};function Be(t,e){return!(!je(t)||!je(e))&&t.data.current.sortable.containerId===e.data.current.sortable.containerId}export{N as C,he as D,Mt as K,Ot as P,Ie as S,B as a,me as b,H as c,ke as d,xe as r,Ye as s,P as u,De as v};
