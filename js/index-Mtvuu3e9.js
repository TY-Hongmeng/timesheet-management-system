const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["js/Dashboard-CEr-XzGn.js","js/react-vendor-DNzT5kIg.js","js/vendor-DLvgz_hY.js","js/dnd-DKcXQQxY.js","js/supabase-BSlBLnmQ.js","js/toast-B5TM6ihQ.js","js/TimesheetRecord-BK5ByfmV.js","js/TimesheetHistory-7b3k1hIu.js","js/CompanyManagement-CEZWCYJn.js","js/UserManagement-D09rydla.js","js/ProcessManagement-CPV2pzEQ.js","js/excel-CwtzAf-t.js","js/RoleList-BCP5j5zK.js","js/RoleEdit-uvaJP0y7.js","js/RoleCreate-DdtEKK4e.js","js/SupervisorApproval--w1KIWqu.js","js/SectionChiefApproval-WoVI-Ubn.js","js/Reports-0Tl1d_7j.js","js/History-CW68e-Co.js","js/ToastTest-Ct27eo68.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,s,n)=>((t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n)(t,"symbol"!=typeof s?s+"":s,n);import{r as s,j as n,u as m,N as r,W as i,d as a,e as o,f as l,P as c,L as u,E as h,h as g,X as d,U as N,i as b,C as y,k as p,l as f,A as w,m as v,B as x,S as k,n as R,o as S,p as _,q as A,s as E}from"./react-vendor-DNzT5kIg.js";import{_ as P}from"./vendor-DLvgz_hY.js";import{c as T}from"./supabase-BSlBLnmQ.js";import{T as C}from"./toast-B5TM6ihQ.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const L=new class{constructor(){t(this,"retryCount",0),t(this,"maxRetries",3),t(this,"retryDelay",1e3),t(this,"isOnline",navigator.onLine),t(this,"networkListeners",[]),this.setupNetworkListeners(),this.setupVisibilityListener()}setupNetworkListeners(){window.addEventListener("online",()=>{this.isOnline=!0,this.notifyListeners(!0),this.retryCount=0}),window.addEventListener("offline",()=>{this.isOnline=!1,this.notifyListeners(!1)}),document.addEventListener("visibilitychange",()=>{document.hidden||setTimeout(()=>this.checkNetworkStatus(),500)}),window.addEventListener("focus",()=>{setTimeout(()=>this.checkNetworkStatus(),500)})}setupVisibilityListener(){document.addEventListener("visibilitychange",()=>{!document.hidden&&this.isOnline&&this.checkNetworkStatus()})}async checkNetworkStatus(){try{const e=new AbortController,t=setTimeout(()=>e.abort(),5e3),s="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname;let n,m;s?(n="https://www.baidu.com/favicon.ico",m={method:"HEAD",cache:"no-cache",signal:e.signal,mode:"no-cors"}):(n="/timesheet-management-system/manifest.json",m={method:"HEAD",cache:"no-cache",signal:e.signal,mode:"cors",credentials:"same-origin"});const r=await fetch(n,m);clearTimeout(t);const i=!!s||r.ok;return this.isOnline!==i&&(this.isOnline=i,this.notifyListeners(i)),i}catch(e){return this.isOnline&&(this.isOnline=!1,this.notifyListeners(!1)),!1}}notifyListeners(e){this.networkListeners.forEach(t=>{try{t(e)}catch(s){}})}onNetworkChange(e){return this.networkListeners.push(e),e(this.isOnline),()=>{const t=this.networkListeners.indexOf(e);t>-1&&this.networkListeners.splice(t,1)}}async retryRequest(e,t={}){const{maxRetries:s=this.maxRetries,retryDelay:n=this.retryDelay,exponentialBackoff:m=!0}=t;let r;for(let a=0;s>=a;a++)try{this.isOnline||await this.waitForNetwork();const t=await e();return this.retryCount=0,t}catch(i){if(r=i,s>a){const e=m?n*Math.pow(2,a):n;await this.delay(e)}}throw r}async waitForNetwork(e=3e4){if(!this.isOnline)return new Promise((t,s)=>{const n=setTimeout(()=>{m(),s(Error("Network timeout"))},e),m=this.onNetworkChange(e=>{e&&(clearTimeout(n),m(),t())})})}delay(e){return new Promise(t=>setTimeout(t,e))}get networkStatus(){return this.isOnline}async safeFetch(e,t){const s=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),n={...t,credentials:"same-origin",mode:"cors",cache:s?"no-cache":(null==t?void 0:t.cache)||"default"},m=new AbortController,r=setTimeout(()=>m.abort(),1e4);try{const t=await fetch(e,{...n,signal:m.signal});return clearTimeout(r),t}catch(i){if(clearTimeout(r),i instanceof Error&&"AbortError"===i.name)throw Error("Request timeout - please check your network connection");throw i}}},D=new class{constructor(){t(this,"errorQueue",[]),t(this,"networkConfig",{timeout:1e4,retries:3,retryDelay:1e3,maxConcurrent:2}),t(this,"activeRequests",0),t(this,"requestQueue",[]),this.initErrorHandling(),this.initNetworkOptimization()}initErrorHandling(){window.addEventListener("error",e=>{var t;const s=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);this.handleError({message:e.message,stack:null==(t=e.error)?void 0:t.stack,userAgent:navigator.userAgent,url:window.location.href,timestamp:Date.now(),deviceInfo:this.getDeviceInfo(),networkStatus:L.networkStatus,errorType:s?"safari":"javascript"})}),window.addEventListener("unhandledrejection",e=>{var t,s,n,m,r,i,a;const o=(null==(s=null==(t=e.reason)?void 0:t.message)?void 0:s.includes("fetch"))||(null==(m=null==(n=e.reason)?void 0:n.message)?void 0:m.includes("network"))||(null==(i=null==(r=e.reason)?void 0:r.message)?void 0:i.includes("timeout"));this.handleError({message:"Unhandled Promise Rejection: ".concat(e.reason),stack:null==(a=e.reason)?void 0:a.stack,userAgent:navigator.userAgent,url:window.location.href,timestamp:Date.now(),deviceInfo:this.getDeviceInfo(),networkStatus:L.networkStatus,errorType:o?"network":"javascript"})}),window.addEventListener("error",e=>{if(e.target&&e.target!==window){const t=e.target;this.handleError({message:"Resource loading error: ".concat(t.tagName," - ").concat(t.src||t.href),userAgent:navigator.userAgent,url:window.location.href,timestamp:Date.now(),deviceInfo:this.getDeviceInfo()})}},!0)}initNetworkOptimization(){window.addEventListener("online",()=>{this.processRequestQueue()}),window.addEventListener("offline",()=>{})}getDeviceInfo(){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return{screenSize:"".concat(window.screen.width,"x").concat(window.screen.height),connectionType:(null==e?void 0:e.effectiveType)||"unknown",platform:navigator.platform,language:navigator.language}}handleError(e){this.errorQueue.push(e),this.errorQueue.length>50&&this.errorQueue.shift(),this.showUserFriendlyError(e)}showUserFriendlyError(e){e.message.includes("fetch")||e.message.includes("network")||e.message.includes("loading")?this.showToast("网络连接不稳定，请检查网络设置","warning"):e.message.includes("Resource loading error")?this.showToast("资源加载失败，正在重试...","info"):this.showToast("应用遇到问题，正在自动修复...","info")}showToast(e,t="info"){const s=document.createElement("div");s.className="mobile-toast mobile-toast-".concat(t),s.textContent=e,s.style.cssText="\n      position: fixed;\n      top: 20px;\n      left: 50%;\n      transform: translateX(-50%);\n      background: ".concat("error"===t?"#ff4444":"warning"===t?"#ffaa00":"#00ff41",";\n      color: ").concat("error"===t||"warning"===t?"#fff":"#000",";\n      padding: 12px 20px;\n      border-radius: 6px;\n      font-size: 14px;\n      font-family: monospace;\n      z-index: 10000;\n      max-width: 90%;\n      text-align: center;\n      box-shadow: 0 4px 12px rgba(0,0,0,0.3);\n      animation: slideInDown 0.3s ease-out;\n    "),document.body.appendChild(s),setTimeout(()=>{s.parentNode&&(s.style.animation="slideOutUp 0.3s ease-in",setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s)},300))},3e3)}async optimizedFetch(e,t={}){try{return await L.retryRequest(()=>L.safeFetch(e,t),{maxRetries:this.networkConfig.retries,retryDelay:this.networkConfig.retryDelay,exponentialBackoff:!0})}catch(s){throw this.handleError({message:"Network request failed: ".concat(s.message),stack:s.stack,userAgent:navigator.userAgent,url:window.location.href,timestamp:Date.now(),deviceInfo:this.getDeviceInfo(),networkStatus:L.networkStatus,errorType:"network"}),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)?this.showToast("网络连接问题，请检查网络设置后重试","error"):this.showToast("网络请求失败，正在重试...","warning"),s}}async addToRequestQueue(e){return new Promise((t,s)=>{const n=async()=>{this.activeRequests++;try{const s=await e();t(s)}catch(n){s(n)}finally{this.activeRequests--,this.processRequestQueue()}};this.activeRequests<this.networkConfig.maxConcurrent?n():this.requestQueue.push(n)})}processRequestQueue(){for(;this.activeRequests<this.networkConfig.maxConcurrent&&this.requestQueue.length>0;){const e=this.requestQueue.shift();e&&e()}}getErrorReports(){return[...this.errorQueue]}clearErrorReports(){this.errorQueue=[]}isOnline(){return navigator.onLine}getNetworkInfo(){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return{online:navigator.onLine,effectiveType:(null==e?void 0:e.effectiveType)||"unknown",downlink:(null==e?void 0:e.downlink)||0,rtt:(null==e?void 0:e.rtt)||0,saveData:(null==e?void 0:e.saveData)||!1}}};(()=>{if(!document.getElementById("mobile-toast-styles")){const e=document.createElement("style");e.id="mobile-toast-styles",e.textContent="\n      @keyframes slideInDown {\n        from {\n          transform: translateX(-50%) translateY(-100%);\n          opacity: 0;\n        }\n        to {\n          transform: translateX(-50%) translateY(0);\n          opacity: 1;\n        }\n      }\n      \n      @keyframes slideOutUp {\n        from {\n          transform: translateX(-50%) translateY(0);\n          opacity: 1;\n        }\n        to {\n          transform: translateX(-50%) translateY(-100%);\n          opacity: 0;\n        }\n      }\n    ",document.head.appendChild(e)}})();const M=T("https://agesdprmugyybtqrvqks.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFnZXNkcHJtdWd5eWJ0cXJ2cWtzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUxNDY0OTIsImV4cCI6MjA3MDcyMjQ5Mn0.bfo_xb818yMd7-u6cJhDoJrqmDwcGY1nBDJIesFSfWk",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"X-Client-Info":"supabase-js-web-mobile-safari-optimized"},fetch:async(e,t)=>{try{return await L.retryRequest(()=>L.safeFetch(e,t),{maxRetries:2,retryDelay:1e3,exponentialBackoff:!0})}catch(m){return s=e,n=t,D.optimizedFetch(s,n)}var s,n}},db:{schema:"public"},realtime:{params:{eventsPerSecond:3}}}),O={USER_READ:"user:read",USER_MANAGE:"user:manage",USER_CREATE:"user:create",USER_DELETE:"user:delete",COMPANY_READ:"company:read",COMPANY_MANAGE:"company:manage",COMPANY_CREATE:"company:create",COMPANY_DELETE:"company:delete",PROCESS_READ:"process:read",PROCESS_MANAGE:"process:manage",PROCESS_CREATE:"process:create",PROCESS_DELETE:"process:delete",ROLE_MANAGE:"role:manage",SYSTEM_CONFIG:"system:config",TIME_RECORD:"time_record",REPORTS:"reports",HISTORY:"history",PROCESS_MANAGEMENT:"process_management",USER_MANAGEMENT:"user_management",COMPANY_MANAGEMENT:"company_management",SUPERVISOR_REVIEW:"supervisor_review",MANAGER_REVIEW:"manager_review",PERMISSION_MANAGEMENT:"permission_management"},I="超级管理员",j=[{id:"time_record",name:"记录工时",description:"记录和管理工作时间",icon:"Clock",path:"/timesheet-record",permission:O.TIME_RECORD,color:"from-green-400 to-green-600"},{id:"reports",name:"查看报表",description:"查看工时统计和分析报表",icon:"BarChart3",path:"/reports",permission:O.REPORTS,color:"from-blue-400 to-blue-600"},{id:"history",name:"历史记录",description:"查看个人工时历史记录",icon:"Activity",path:"/history",permission:O.HISTORY,color:"from-cyan-400 to-cyan-600"},{id:"process_management",name:"工序管理",description:"管理生产工序和流程",icon:"Settings",path:"/process-management",permission:O.PROCESS_MANAGEMENT,color:"from-purple-400 to-purple-600"},{id:"user_management",name:"用户管理",description:"管理系统用户和权限",icon:"Users",path:"/user-management",permission:O.USER_MANAGEMENT,color:"from-orange-400 to-orange-600"},{id:"company_management",name:"公司管理",description:"管理公司信息和部门",icon:"Building2",path:"/company-management",permission:O.COMPANY_MANAGEMENT,color:"from-teal-400 to-teal-600"},{id:"supervisor_review",name:"班长审核",description:"班长审核工时记录",icon:"CheckCircle",path:"/supervisor-approval",permission:O.SUPERVISOR_REVIEW,color:"from-indigo-400 to-indigo-600"},{id:"section_chief_review",name:"段长审核",description:"段长审核工时记录",icon:"Shield",path:"/section-chief-approval",permission:O.MANAGER_REVIEW,color:"from-pink-400 to-pink-600"},{id:"permission_management",name:"权限管理",description:"管理用户角色和权限",icon:"Key",path:"/role-permissions",permission:O.PERMISSION_MANAGEMENT,color:"from-red-400 to-red-600"}];async function q(e,t){try{return(await z(e)).includes(t)}catch(s){return!1}}let U=null;const J=6e5;async function z(e){try{if(U&&U.userId===e&&Date.now()-U.timestamp<J)return U.permissions;const{data:t,error:s}=await async function(){try{return await async function(e,t=3,s=1e3){let n;for(let r=1;t>=r;r++)try{return await e()}catch(m){if(n=m,r===t)break;const e=s*Math.pow(2,r-1);await new Promise(t=>setTimeout(t,e))}throw n}(async()=>await M.from("users").select("\n          id,\n          role_id,\n          user_roles (\n            id,\n            name,\n            permissions\n          )\n        ").eq("id",e).single(),2,500)}catch(t){return{data:null,error:{message:"网络连接异常，请检查网络设置或稍后重试",code:"NETWORK_ERROR",details:t}}}}();if(s||!t)return[];let n=[];return t.user_roles&&V(t.user_roles.name)?n=G():t.user_roles&&t.user_roles.permissions&&(n=t.user_roles.permissions),U={permissions:n,timestamp:Date.now(),userId:e},n}catch(t){return[]}}function F(e){return j.filter(t=>e.includes(t.permission))}function V(e){return"object"==typeof e&&null!==e?"超级管理员"===e.name:"超级管理员"===e}function Y(){return j}const B=(e,t)=>{if(!e)return!1;if(V(e.role||e.user_roles))return!0;const s=e.role||e.user_roles;return!(!s||!s.permissions)&&s.permissions.includes(t)},G=()=>Object.values(O),W=s.createContext(void 0);function H({children:e}){const[t,m]=s.useState(null),[r,i]=s.useState(!0);s.useEffect(()=>{(async()=>{try{const t=localStorage.getItem("auth_user"),s=localStorage.getItem("last_login_time");if(t&&s){const n=JSON.parse(t),r=parseInt(s),a=Date.now();if(a-r>864e5)return localStorage.removeItem("auth_user"),localStorage.removeItem("last_login_time"),m(null),void i(!1);if(!navigator.onLine)return m(n),void i(!1);try{const{data:e,error:t}=await Promise.race([M.from("users").select("\n                  *,\n                  company:companies(*),\n                  role:user_roles(*)\n                ").eq("id",n.id).eq("is_active",!0).single(),new Promise((e,t)=>setTimeout(()=>t(Error("验证超时")),8e3))]);if(e&&!t){const t=await z(e.id),s={id:e.id,phone:e.phone,name:e.name,id_card:e.id_card,company:e.company,role:e.role,department_id:e.department_id,is_active:e.is_active,permissions:t};m(s),localStorage.setItem("auth_user",JSON.stringify(s)),localStorage.setItem("last_login_time",a.toString())}else localStorage.removeItem("auth_user"),localStorage.removeItem("last_login_time"),m(null)}catch(e){m(n)}}else m(null)}catch(t){localStorage.removeItem("auth_user"),localStorage.removeItem("last_login_time"),m(null)}finally{i(!1)}})();const e=setInterval(()=>{const e=localStorage.getItem("last_login_time");if(e){const t=parseInt(e);Date.now()-t>864e5&&(localStorage.removeItem("auth_user"),localStorage.removeItem("last_login_time"),m(null),window.location.href="/login")}},6e4),{data:{subscription:t}}=M.auth.onAuthStateChange(async(e,t)=>{"SIGNED_OUT"===e&&(m(null),localStorage.removeItem("auth_user"),localStorage.removeItem("last_login_time"))});return()=>{t.unsubscribe(),clearInterval(e)}},[]);const a=async(e,t,s=0)=>{var n,r,i,o,l,c,u,h;try{if(!navigator.onLine)return{success:!1,error:"网络连接已断开，请检查网络后重试"};const{data:s,error:n}=await Promise.race([M.from("users").select("\n            *,\n            company:companies(*),\n            role:user_roles(*)\n          ").eq("phone",e).eq("is_active",!0).single(),new Promise((e,t)=>setTimeout(()=>t(Error("请求超时")),1e4))]);if(n){if("PGRST116"===n.code)return{success:!1,error:"用户不存在或已被禁用"};throw n}if(!s)return{success:!1,error:"用户不存在或已被禁用"};if(s.password_hash!==t)return{success:!1,error:"密码错误"};let r=[];s.role&&"超级管理员"===s.role.name?r=Object.values(O):setTimeout(async()=>{try{const e=await z(s.id),t=JSON.parse(localStorage.getItem("auth_user")||"{}");t.id===s.id&&(t.permissions=e,localStorage.setItem("auth_user",JSON.stringify(t)),m(t))}catch(e){}},100);const i={id:s.id,phone:s.phone,name:s.name,id_card:s.id_card,company:s.company,role:s.role,department_id:s.department_id,is_active:s.is_active,permissions:r};return m(i),localStorage.setItem("auth_user",JSON.stringify(i)),localStorage.setItem("last_login_time",Date.now().toString()),{success:!0}}catch(g){const m=(null==(n=g.message)?void 0:n.includes("fetch"))||(null==(r=g.message)?void 0:r.includes("network"))||(null==(i=g.message)?void 0:i.includes("CONNECTION_CLOSED"))||(null==(o=g.message)?void 0:o.includes("ERR_NETWORK_CHANGED"))||(null==(l=g.message)?void 0:l.includes("ERR_ABORTED"))||(null==(c=g.message)?void 0:c.includes("ERR_CONNECTION_CLOSED"))||(null==(u=g.message)?void 0:u.includes("请求超时"))||(null==(h=g.message)?void 0:h.includes("Failed to fetch"))||"NETWORK_ERROR"===g.code||"TypeError"===g.name||!navigator.onLine;return 5>s&&m?(await new Promise(e=>setTimeout(e,1e3*Math.pow(2,s))),a(e,t,s+1)):m?{success:!1,error:"网络连接不稳定，已重试".concat(s,"次，请检查网络后重试")}:{success:!1,error:g.message||"登录失败，请稍后重试"}}},o={user:t,loading:r,login:a,register:async e=>{try{const{data:t,error:s}=await M.from("users").select("id").eq("id_card",e.id_card).maybeSingle();if(s&&"PGRST116"!==s.code)return{success:!1,error:"系统错误，请稍后重试"};const{data:n,error:m}=await M.from("users").select("id").eq("phone",e.phone).maybeSingle();if(m&&"PGRST116"!==m.code)return{success:!1,error:"系统错误，请稍后重试"};if(t||n){if(t)return{success:!1,error:"该身份证号已被注册"};if(n)return{success:!1,error:"该手机号已被注册"}}const r=crypto.randomUUID(),{error:i}=await M.from("users").insert({id:r,phone:e.phone,id_card:e.id_card,name:e.name,company_id:e.company_id,role_id:e.role_id,password_hash:e.password,production_line:e.production_line,is_active:!1});if(i)return{success:!1,error:"用户信息创建失败"};const{data:a}=await M.from("users").select("\n          *,\n          company:companies(*),\n          role:user_roles(*)\n        ").eq("id",r).single();return{success:!0}}catch(t){return{success:!1,error:t.message||"注册失败，请重试"}}},logout:async()=>{try{m(null),localStorage.removeItem("auth_user"),localStorage.removeItem("last_login_time")}catch(e){m(null),localStorage.removeItem("auth_user"),localStorage.removeItem("last_login_time")}},resetPassword:async(e,t)=>{var s;try{const{data:s,error:n}=await Promise.race([M.from("users").select("id, phone, name").eq("id_card",e).eq("is_active",!0).single(),new Promise((e,t)=>setTimeout(()=>t(Error("查询超时")),8e3))]);if(n)return"PGRST116"===n.code?{success:!1,error:"未找到该身份证号对应的用户"}:{success:!1,error:"查询用户失败，请重试"};if(!s)return{success:!1,error:"未找到该身份证号对应的用户"};if(!t)return{success:!0,user:{id:s.id,phone:s.phone,name:s.name}};const{error:m}=await Promise.race([M.from("users").update({password_hash:t}).eq("id",s.id),new Promise((e,t)=>setTimeout(()=>t(Error("更新超时")),8e3))]);return m?{success:!1,error:"密码重置失败，请重试"}:{success:!0}}catch(n){return(null==(s=n.message)?void 0:s.includes("超时"))?{success:!1,error:"网络超时，请检查网络连接后重试"}:{success:!1,error:n.message||"密码重置失败"}}},refreshUser:async()=>{if(null==t?void 0:t.id)try{const{data:e,error:s}=await M.from("users").select("\n          *,\n          company:companies(*),\n          role:user_roles(*)\n        ").eq("id",t.id).eq("is_active",!0).single();if(e&&!s){const t=await z(e.id),s={id:e.id,phone:e.phone,name:e.name,id_card:e.id_card,company:e.company,role:e.role,department_id:e.department_id,is_active:e.is_active,permissions:t};m(s),localStorage.setItem("auth_user",JSON.stringify(s))}}catch(e){}},isAuthenticated:()=>!!(t&&t.id&&t.is_active)};return n.jsxDEV(W.Provider,{value:o,children:e},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/contexts/AuthContext.tsx",lineNumber:498,columnNumber:10},this)}function X(){const e=s.useContext(W);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function Q({children:e,requireAuth:t=!0}){const{user:s,loading:i,isAuthenticated:a}=X(),o=m();return i?n.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:n.jsxDEV("div",{className:"text-green-400 text-xl animate-pulse font-mono",children:"加载中..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/ProtectedRoute.tsx",lineNumber:17,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/ProtectedRoute.tsx",lineNumber:16,columnNumber:7},this):t&&!a()?n.jsxDEV(r,{to:"/login",state:{from:o},replace:!0},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/ProtectedRoute.tsx",lineNumber:26,columnNumber:12},this):!t&&a()?n.jsxDEV(r,{to:"/dashboard",replace:!0},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/ProtectedRoute.tsx",lineNumber:31,columnNumber:12},this):n.jsxDEV(n.Fragment,{children:e},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/ProtectedRoute.tsx",lineNumber:34,columnNumber:10},this)}function K({children:e,allowedRoles:t,fallbackPath:s="/dashboard"}){var i;const{user:a,loading:o}=X(),l=m();if(o)return n.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:n.jsxDEV("div",{className:"text-green-400 text-xl animate-pulse font-mono",children:"加载中..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:22,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:21,columnNumber:7},this);if(!a)return n.jsxDEV(r,{to:"/login",state:{from:l},replace:!0},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:31,columnNumber:12},this);const c=null==(i=a.role)?void 0:i.name;return t.some(e=>c===e||(null==c?void 0:c.toLowerCase())===e.toLowerCase())?n.jsxDEV(n.Fragment,{children:e},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:70,columnNumber:10},this):n.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:n.jsxDEV("div",{className:"text-center",children:[n.jsxDEV("div",{className:"text-red-400 text-6xl mb-4",children:"🚫"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:54,columnNumber:11},this),n.jsxDEV("h1",{className:"text-2xl font-bold text-red-400 mb-2 font-mono",children:"访问被拒绝"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:55,columnNumber:11},this),n.jsxDEV("p",{className:"text-green-300 mb-6 font-mono",children:["您没有权限访问此页面。需要角色: ",t.join(", ")]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:56,columnNumber:11},this),n.jsxDEV("button",{onClick:()=>window.history.back(),className:"px-6 py-2 bg-green-600 hover:bg-green-500 text-black font-bold rounded font-mono transition-colors",children:"返回上一页"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:59,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:53,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RoleProtectedRoute.tsx",lineNumber:52,columnNumber:7},this)}function Z({onRetry:e,showRetryButton:t=!1}){const[m,r]=s.useState(navigator.onLine),[l,c]=s.useState("unknown"),[u,h]=s.useState(!1);return s.useEffect(()=>{const e=()=>{r(!0),h(!0),setTimeout(()=>h(!1),3e3)},t=()=>{r(!1),h(!0)},s=()=>{if("connection"in navigator){const e=navigator.connection;e&&c(e.effectiveType||"unknown")}};if(window.addEventListener("online",e),window.addEventListener("offline",t),"connection"in navigator){const e=navigator.connection;e&&(e.addEventListener("change",s),s())}return()=>{if(window.removeEventListener("online",e),window.removeEventListener("offline",t),"connection"in navigator){const e=navigator.connection;e&&e.removeEventListener("change",s)}}},[]),!u&&m?null:n.jsxDEV("div",{className:"fixed top-4 right-4 z-50 transition-all duration-300 ".concat(u?"translate-y-0 opacity-100":"translate-y-[-100px] opacity-0"),children:n.jsxDEV("div",{className:"rounded-lg shadow-lg p-4 max-w-sm ".concat(m?"bg-green-50 border border-green-200 text-green-800":"bg-red-50 border border-red-200 text-red-800"),children:n.jsxDEV("div",{className:"flex items-center space-x-3",children:[n.jsxDEV("div",{className:"flex-shrink-0",children:m?n.jsxDEV(i,{className:"w-5 h-5 text-green-600"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:75,columnNumber:15},this):n.jsxDEV(a,{className:"w-5 h-5 text-red-600"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:77,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:73,columnNumber:11},this),n.jsxDEV("div",{className:"flex-1",children:[n.jsxDEV("p",{className:"text-sm font-medium",children:m?"网络已连接":"网络连接断开"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:81,columnNumber:13},this),m&&"unknown"!==l&&n.jsxDEV("p",{className:"text-xs opacity-75",children:["连接类型: ",l]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:85,columnNumber:15},this),!m&&n.jsxDEV("p",{className:"text-xs opacity-75",children:"请检查网络设置"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:90,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:80,columnNumber:11},this),!m&&t&&e&&n.jsxDEV("button",{onClick:e,className:"flex-shrink-0 p-1 rounded-full hover:bg-red-100 transition-colors",title:"重试连接",children:n.jsxDEV(o,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:101,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:96,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:72,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:67,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatus.tsx",lineNumber:64,columnNumber:5},this)}const $=({onNetworkChange:e})=>{const[t,m]=s.useState(navigator.onLine),[r,i]=s.useState(!1),[a,o]=s.useState(null);return s.useEffect(()=>L.onNetworkChange(t=>{m(t),t?a&&(i(!0),setTimeout(()=>i(!1),3e3)):(o(new Date),i(!0)),null==e||e(t)}),[e,a]),t&&!r?null:n.jsxDEV("div",{style:{position:"fixed",top:0,left:0,right:0,zIndex:9999,padding:"8px 16px",backgroundColor:t?"#4CAF50":"#f44336",color:"white",textAlign:"center",fontSize:"14px",fontWeight:"bold",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",transform:r?"translateY(0)":"translateY(-100%)",transition:"transform 0.3s ease-in-out"},children:t?n.jsxDEV("span",{children:"✅ 网络连接已恢复"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatusMonitor.tsx",lineNumber:60,columnNumber:9},void 0):n.jsxDEV("span",{children:"❌ 网络连接已断开 - 请检查网络设置"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatusMonitor.tsx",lineNumber:62,columnNumber:9},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/NetworkStatusMonitor.tsx",lineNumber:41,columnNumber:5},void 0)};function ee({message:e="正在加载...",showRetry:t=!1,onRetry:m}){const[r,l]=s.useState(e),[c,u]=s.useState(t),[h,g]=s.useState(!1),[d,N]=s.useState(0);return s.useEffect(()=>{const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;e&&g(["slow-2g","2g","3g"].includes(e.effectiveType));const t=setInterval(()=>{N(e=>90>e?e+10*Math.random():e)},500),s=setTimeout(()=>{l("加载时间较长，请稍候..."),N(60)},3e3),n=setTimeout(()=>{l("网络较慢，正在努力加载..."),N(80)},8e3),m=setTimeout(()=>{u(!0),l("加载超时，请检查网络连接"),N(90)},15e3);return()=>{clearInterval(t),clearTimeout(s),clearTimeout(n),clearTimeout(m)}},[]),n.jsxDEV("div",{className:"fixed inset-0 bg-white z-50 flex flex-col items-center justify-center px-4",children:[n.jsxDEV("div",{className:"text-center max-w-sm w-full",children:[n.jsxDEV("div",{className:"relative mb-8",children:[n.jsxDEV("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mx-auto"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:78,columnNumber:11},this),h&&n.jsxDEV("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-orange-500 rounded-full flex items-center justify-center",children:n.jsxDEV(a,{className:"w-3 h-3 text-white"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:81,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:80,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:77,columnNumber:9},this),n.jsxDEV("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"工时管理系统"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:87,columnNumber:9},this),n.jsxDEV("p",{className:"text-gray-600 mb-6 text-base",children:r},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:88,columnNumber:9},this),n.jsxDEV("div",{className:"w-full bg-gray-200 rounded-full h-2 mb-6",children:n.jsxDEV("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500 ease-out",style:{width:"".concat(d,"%")}},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:92,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:91,columnNumber:9},this),h&&n.jsxDEV("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 mb-4",children:n.jsxDEV("div",{className:"flex items-center space-x-2",children:[n.jsxDEV(a,{className:"w-4 h-4 text-orange-600"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:102,columnNumber:15},this),n.jsxDEV("p",{className:"text-orange-700 text-sm",children:"检测到网络连接较慢，加载可能需要更长时间"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:103,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:101,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:100,columnNumber:11},this),c&&n.jsxDEV("div",{className:"space-y-4",children:[n.jsxDEV("button",{onClick:()=>{m?m():window.location.reload()},className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center space-x-2",children:[n.jsxDEV(o,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:117,columnNumber:15},this),n.jsxDEV("span",{children:"重新加载"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:118,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:113,columnNumber:13},this),n.jsxDEV("p",{className:"text-gray-500 text-sm",children:"如果问题持续存在，请检查网络连接或稍后再试"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:120,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:112,columnNumber:11},this),!c&&n.jsxDEV("div",{className:"space-y-2",children:[n.jsxDEV("div",{className:"flex items-center justify-center space-x-2 text-gray-500 text-sm",children:[n.jsxDEV(i,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:130,columnNumber:15},this),n.jsxDEV("span",{children:"正在优化移动端体验..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:131,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:129,columnNumber:13},this),h&&n.jsxDEV("p",{className:"text-xs text-gray-400",children:"为了更好的体验，我们正在压缩数据传输"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:134,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:128,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:75,columnNumber:7},this),n.jsxDEV("div",{className:"absolute bottom-8 left-4 right-4 text-center",children:n.jsxDEV("p",{className:"text-xs text-gray-400",children:"首次加载可能需要较长时间，后续访问会更快"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:144,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:143,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/MobileLoadingSpinner.tsx",lineNumber:73,columnNumber:5},this)}function te(){var e,t;const[r,i]=s.useState({phone:"",password:""}),[a,o]=s.useState(!1),[y,p]=s.useState(!1),[f,w]=s.useState(""),[v,x]=s.useState(!1),[k,R]=s.useState(!1),[S,_]=s.useState([]),{login:A}=X(),E=l(),P=(null==(t=null==(e=m().state)?void 0:e.from)?void 0:t.pathname)||"/dashboard",T=e=>{try{return atob(e)}catch(t){return""}};s.useEffect(()=>{const e=localStorage.getItem("savedUsers"),t=localStorage.getItem("savedCredentials");if(e){const t=JSON.parse(e);_(t),t.length>0&&(i(e=>({...e,phone:t[0].phone})),x(!0))}if(t)try{const e=JSON.parse(t);e.phone&&e.password&&(i({phone:e.phone,password:T(e.password)}),R(!0),x(!0))}catch(s){}},[]);const C=e=>{i({...r,[e.target.name]:e.target.value})};return n.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center px-4",children:n.jsxDEV("div",{className:"max-w-md w-full space-y-8",children:[n.jsxDEV("div",{className:"text-center",children:[n.jsxDEV("div",{className:"flex items-center justify-center mb-2",children:[n.jsxDEV("svg",{className:"w-16 h-16 mr-4",viewBox:"0 0 80 80",xmlns:"http://www.w3.org/2000/svg",children:[n.jsxDEV("ellipse",{cx:"40",cy:"40",rx:"38",ry:"30",fill:"black",stroke:"#22c55e",strokeWidth:"3"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:163,columnNumber:15},this),n.jsxDEV("text",{x:"40",y:"50",textAnchor:"middle",fill:"#22c55e",fontSize:"28",fontWeight:"bold",fontFamily:"Arial, sans-serif",children:"JT"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:164,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:162,columnNumber:13},this),n.jsxDEV("h1",{className:"text-4xl font-bold text-green-400 font-mono",children:"工时管理系统"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:166,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:161,columnNumber:11},this),n.jsxDEV("div",{className:"mt-4 h-1 bg-gradient-to-r from-transparent via-green-400 to-transparent"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:170,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:160,columnNumber:9},this),n.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-8 shadow-lg shadow-green-400/20",children:[n.jsxDEV("h2",{className:"text-2xl font-bold text-green-400 mb-6 text-center font-mono",children:"用户登录"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:175,columnNumber:11},this),f&&n.jsxDEV("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-400 rounded text-red-300 text-sm",children:f},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:180,columnNumber:13},this),n.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),p(!0),w(""),!r.phone||!r.password)return w("请填写所有必填字段"),void p(!1);const t=await A(r.phone,r.password);if(t.success){if(v){const e=JSON.parse(localStorage.getItem("savedUsers")||"[]");if(e.find(e=>e.phone===r.phone)){const t=e.filter(e=>e.phone!==r.phone),s=[{phone:r.phone},...t];localStorage.setItem("savedUsers",JSON.stringify(s))}else{const t=[{phone:r.phone},...e.slice(0,4)];localStorage.setItem("savedUsers",JSON.stringify(t))}}if(k){const e={phone:r.phone,password:(s=r.password,btoa(s))};localStorage.setItem("savedCredentials",JSON.stringify(e))}else localStorage.removeItem("savedCredentials");E(P,{replace:!0})}else w(t.error||"登录失败");var s;p(!1)},className:"space-y-6",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-2",children:"手机号码"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:188,columnNumber:15},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:192,columnNumber:17},this),n.jsxDEV("input",{type:"tel",name:"phone",value:r.phone,onChange:C,className:"w-full pl-12 pr-4 py-3 bg-black border border-green-400 rounded-lg text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono",placeholder:"请输入手机号码",maxLength:11},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:193,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:191,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:187,columnNumber:13},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-2",children:"登录密码"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:207,columnNumber:15},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:211,columnNumber:17},this),n.jsxDEV("input",{type:a?"text":"password",name:"password",value:r.password,onChange:C,className:"w-full pl-12 pr-12 py-3 bg-black border border-green-400 rounded-lg text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono",placeholder:"请输入密码"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:212,columnNumber:17},this),n.jsxDEV("button",{type:"button",onClick:()=>o(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-400 hover:text-green-300",children:a?n.jsxDEV(h,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:225,columnNumber:35},this):n.jsxDEV(g,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:225,columnNumber:68},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:220,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:210,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:206,columnNumber:13},this),n.jsxDEV("div",{className:"space-y-3",children:[n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("input",{type:"checkbox",id:"rememberMe",checked:v,onChange:e=>x(e.target.checked),className:"w-4 h-4 text-green-600 bg-black border-green-400 rounded focus:ring-green-500 focus:ring-2"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:233,columnNumber:17},this),n.jsxDEV("label",{htmlFor:"rememberMe",className:"ml-2 text-sm text-green-300 font-mono",children:"记住账号"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:240,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:232,columnNumber:15},this),n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("input",{type:"checkbox",id:"rememberPassword",checked:k,onChange:e=>R(e.target.checked),className:"w-4 h-4 text-green-600 bg-black border-green-400 rounded focus:ring-green-500 focus:ring-2"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:246,columnNumber:17},this),n.jsxDEV("label",{htmlFor:"rememberPassword",className:"ml-2 text-sm text-green-300 font-mono",children:"记住密码"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:253,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:245,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:231,columnNumber:13},this),n.jsxDEV("button",{type:"submit",disabled:y,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:bg-green-800 text-black font-bold rounded-lg transition-colors duration-200 font-mono text-lg",children:y?"登录中...":"登录"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:260,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:185,columnNumber:11},this),S.length>0&&n.jsxDEV("div",{className:"mt-6",children:[n.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[n.jsxDEV("h3",{className:"text-green-300 text-sm font-mono",children:"快速登录"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:273,columnNumber:17},this),n.jsxDEV("button",{type:"button",onClick:()=>{localStorage.removeItem("savedUsers"),localStorage.removeItem("savedCredentials"),_([]),i({phone:"",password:""}),x(!1),R(!1)},className:"text-red-400 hover:text-red-300 text-xs font-mono flex items-center",title:"清除所有保存的登录信息",children:[n.jsxDEV(d,{className:"w-3 h-3 mr-1"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:280,columnNumber:19},this),"清除"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:274,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:272,columnNumber:15},this),n.jsxDEV("div",{className:"space-y-2",children:S.slice(0,3).map((e,t)=>n.jsxDEV("button",{type:"button",onClick:()=>(e=>{i(t=>({...t,phone:e}));const t=localStorage.getItem("savedCredentials");if(t)try{const s=JSON.parse(t);s.phone===e&&s.password&&(i({phone:e,password:T(s.password)}),R(!0))}catch(s){}})(e.phone),className:"w-full flex items-center p-2 bg-gray-800 hover:bg-gray-700 border border-green-400/30 rounded-lg transition-colors duration-200",children:[n.jsxDEV(N,{className:"w-4 h-4 text-green-400 mr-2"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:292,columnNumber:21},this),n.jsxDEV("span",{className:"text-green-300 font-mono text-sm",children:e.phone},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:293,columnNumber:21},this),r.phone===e.phone&&n.jsxDEV("span",{className:"ml-auto text-green-400 text-xs font-mono",children:"当前"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:295,columnNumber:23},this)]},e.phone,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:286,columnNumber:19},this))},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:284,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:271,columnNumber:13},this),n.jsxDEV("div",{className:"mt-6 text-center space-y-2",children:[n.jsxDEV(b,{to:"/register",className:"block text-green-400 hover:text-green-300 text-sm font-mono transition-colors",children:"还没有账号？立即注册"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:305,columnNumber:13},this),n.jsxDEV(b,{to:"/reset-password",className:"block text-green-400 hover:text-green-300 text-sm font-mono transition-colors",children:"忘记密码？重置密码"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:311,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:304,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:174,columnNumber:9},this),n.jsxDEV("div",{className:"text-center text-green-600 text-xs font-mono",children:[n.jsxDEV("p",{children:"© 吉林省通用机械（集团）有限责任公司."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:322,columnNumber:11},this),n.jsxDEV("div",{className:"mt-2 flex justify-center space-x-2",children:[n.jsxDEV("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:324,columnNumber:13},this),n.jsxDEV("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:325,columnNumber:13},this),n.jsxDEV("span",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse",style:{animationDelay:"0.4s"}},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:326,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:323,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:321,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:158,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Login.tsx",lineNumber:157,columnNumber:5},this)}function se({isOpen:e,onClose:t,userName:s,userPhone:m}){return e?n.jsxDEV("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:n.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg shadow-2xl shadow-green-400/30 max-w-md w-full",children:[n.jsxDEV("div",{className:"bg-gradient-to-r from-green-900/50 to-green-800/50 border-b border-green-400/30 p-6 rounded-t-lg",children:[n.jsxDEV("div",{className:"flex items-center justify-center mb-4",children:n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(y,{className:"w-16 h-16 text-green-400"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:26,columnNumber:15},this),n.jsxDEV("div",{className:"absolute inset-0 animate-ping",children:n.jsxDEV(y,{className:"w-16 h-16 text-green-400 opacity-30"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:28,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:27,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:25,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:24,columnNumber:11},this),n.jsxDEV("h2",{className:"text-2xl font-bold text-green-400 text-center font-mono",children:"注册申请提交成功"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:32,columnNumber:11},this),n.jsxDEV("p",{className:"text-green-300 text-center text-sm font-mono mt-2",children:"REGISTRATION SUBMITTED SUCCESSFULLY"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:35,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:23,columnNumber:9},this),n.jsxDEV("div",{className:"p-6 space-y-6",children:[n.jsxDEV("div",{className:"bg-black/50 border border-green-400/30 rounded-lg p-4",children:[n.jsxDEV("h3",{className:"text-green-400 font-mono text-sm mb-3 flex items-center",children:[n.jsxDEV(p,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:45,columnNumber:15},this),"申请人信息"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:44,columnNumber:13},this),n.jsxDEV("div",{className:"space-y-2 text-sm",children:[n.jsxDEV("div",{className:"flex justify-between",children:[n.jsxDEV("span",{className:"text-green-300",children:"姓名："},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:50,columnNumber:17},this),n.jsxDEV("span",{className:"text-green-100 font-mono",children:s},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:51,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:49,columnNumber:15},this),n.jsxDEV("div",{className:"flex justify-between",children:[n.jsxDEV("span",{className:"text-green-300",children:"手机号："},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:54,columnNumber:17},this),n.jsxDEV("span",{className:"text-green-100 font-mono",children:m},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:55,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:53,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:48,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:43,columnNumber:11},this),n.jsxDEV("div",{className:"bg-yellow-900/20 border border-yellow-400/30 rounded-lg p-4",children:[n.jsxDEV("h3",{className:"text-yellow-400 font-mono text-sm mb-3 flex items-center",children:[n.jsxDEV(f,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:63,columnNumber:15},this),"当前状态"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:62,columnNumber:13},this),n.jsxDEV("div",{className:"space-y-3",children:[n.jsxDEV("div",{className:"flex items-center",children:[n.jsxDEV("div",{className:"w-2 h-2 bg-yellow-400 rounded-full mr-3 animate-pulse"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:68,columnNumber:17},this),n.jsxDEV("span",{className:"text-yellow-100 text-sm",children:"账号状态：待激活"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:69,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:67,columnNumber:15},this),n.jsxDEV("p",{className:"text-yellow-200 text-xs leading-relaxed",children:'您的账号已成功创建，但当前处于"待激活"状态。系统管理员将在1-2个工作日内审核您的申请。'},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:71,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:66,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:61,columnNumber:11},this),n.jsxDEV("div",{className:"bg-blue-900/20 border border-blue-400/30 rounded-lg p-4",children:[n.jsxDEV("h3",{className:"text-blue-400 font-mono text-sm mb-3",children:"后续步骤"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:79,columnNumber:13},this),n.jsxDEV("div",{className:"space-y-2 text-xs text-blue-200",children:[n.jsxDEV("div",{className:"flex items-start",children:[n.jsxDEV(w,{className:"w-3 h-3 mr-2 mt-0.5 text-blue-400 flex-shrink-0"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:82,columnNumber:17},this),n.jsxDEV("span",{children:"请耐心等待系统管理员审核激活您的账号"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:83,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:81,columnNumber:15},this),n.jsxDEV("div",{className:"flex items-start",children:[n.jsxDEV(w,{className:"w-3 h-3 mr-2 mt-0.5 text-blue-400 flex-shrink-0"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:86,columnNumber:17},this),n.jsxDEV("span",{children:"账号激活后，您将可以使用注册的手机号和密码登录系统"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:87,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:85,columnNumber:15},this),n.jsxDEV("div",{className:"flex items-start",children:[n.jsxDEV(w,{className:"w-3 h-3 mr-2 mt-0.5 text-blue-400 flex-shrink-0"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:90,columnNumber:17},this),n.jsxDEV("span",{children:"如有疑问，请联系系统管理员或IT支持部门"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:91,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:89,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:80,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:78,columnNumber:11},this),n.jsxDEV("div",{className:"pt-4",children:n.jsxDEV("button",{onClick:t,className:"w-full bg-green-600 hover:bg-green-500 text-white font-mono py-3 px-4 rounded-lg transition-all duration-200 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-50",children:"前往登录页面"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:98,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:97,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:41,columnNumber:9},this),n.jsxDEV("div",{className:"bg-gray-800/50 border-t border-green-400/30 p-4 rounded-b-lg",children:n.jsxDEV("p",{className:"text-green-300 text-xs text-center font-mono",children:"工时管理系统 · TIMETRACK SYSTEM"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:109,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:108,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:21,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/components/RegistrationSuccessDialog.tsx",lineNumber:20,columnNumber:5},this):null}function ne(){const[e,t]=s.useState({phone:"",password:"",confirmPassword:"",id_card:"",name:"",company_id:"",role_id:"",production_line:""}),[m,r]=s.useState(!1),[i,a]=s.useState(!1),[o,d]=s.useState(!1),[y,f]=s.useState(""),[w,R]=s.useState([]),[S,_]=s.useState([]),[A,E]=s.useState(""),[P,T]=s.useState(!0),[C,L]=s.useState([]),[D,O]=s.useState(!1),[I,j]=s.useState(null),[q,U]=s.useState(!1),{register:J}=X(),z=l();s.useEffect(()=>{(async()=>{try{const{data:e,error:t}=await M.from("companies").select("*").order("name");if(t)throw t;const{data:s,error:n}=await M.from("user_roles").select("*").neq("name","超级管理员").order("name");if(n)throw n;R(e||[]),_(s||[])}catch(e){f("获取数据失败，请重试")}finally{T(!1)}})()},[]);const F=async e=>{try{const{data:t,error:s}=await M.from("processes").select("production_line").eq("company_id",e).eq("is_active",!0);if(s)throw s;const n=[...new Set((null==t?void 0:t.map(e=>e.production_line))||[])];L(n)}catch(t){L([])}},V=async s=>{const{name:n,value:m}=s.target;if(t(e=>({...e,[n]:m})),"role_id"===n){const s=S.find(e=>e.id===m);j(s||null);const n=s&&("班长"===s.name||"段长"===s.name);O(n||!1),n&&e.company_id&&await F(e.company_id),n||t(e=>({...e,production_line:""}))}if("company_id"===n&&D&&(await F(m),t(e=>({...e,production_line:""}))),"confirmPassword"===n||"password"===n){const t="password"===n?m:e.password,s="confirmPassword"===n?m:e.confirmPassword;E(s&&t!==s?"两次输入的密码不一致":"")}};return P?n.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center",children:n.jsxDEV("div",{className:"text-green-400 text-xl animate-pulse font-mono",children:"加载中..."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:209,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:208,columnNumber:7},this):n.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center px-4 py-8",children:[n.jsxDEV("div",{className:"max-w-md w-full space-y-8",children:[n.jsxDEV("div",{className:"text-center",children:[n.jsxDEV("h1",{className:"text-4xl font-bold text-green-400 mb-2 font-mono",children:"工时管理系统"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:221,columnNumber:11},this),n.jsxDEV("p",{className:"text-green-300 text-lg font-mono",children:"TIMETRACK SYSTEM"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:224,columnNumber:11},this),n.jsxDEV("div",{className:"mt-4 h-1 bg-gradient-to-r from-transparent via-green-400 to-transparent"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:227,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:220,columnNumber:9},this),n.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-8 shadow-lg shadow-green-400/20",children:[n.jsxDEV("h2",{className:"text-2xl font-bold text-green-400 mb-6 text-center font-mono",children:"用户注册"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:232,columnNumber:11},this),y&&n.jsxDEV("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-400 rounded text-red-300 text-sm",children:y},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:237,columnNumber:13},this),n.jsxDEV("form",{onSubmit:async t=>{if(t.preventDefault(),d(!0),f(""),!(e.phone&&e.password&&e.id_card&&e.name&&e.company_id&&e.role_id))return f("请填写所有必填字段"),void d(!1);if(D&&!e.production_line)return f("请选择生产线"),void d(!1);if(e.password!==e.confirmPassword)return f("两次输入的密码不一致"),E("两次输入的密码不一致"),void d(!1);if(6>e.password.length)return f("密码长度至少6位"),void d(!1);if(!/^1[3-9]\d{9}$/.test(e.phone))return f("请输入正确的手机号码"),void d(!1);if(!/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(e.id_card))return f("请输入正确的身份证号码"),void d(!1);const s=await J({phone:e.phone,password:e.password,id_card:e.id_card,name:e.name,company_id:e.company_id,role_id:e.role_id,production_line:D?e.production_line:null});s.success?(f(""),U(!0)):f(s.error||"注册失败"),d(!1)},className:"space-y-4",children:[n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"手机号码 *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:245,columnNumber:15},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(c,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:249,columnNumber:17},this),n.jsxDEV("input",{type:"tel",name:"phone",value:e.phone,onChange:V,className:"w-full pl-10 pr-4 py-2 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",placeholder:"请输入手机号码",maxLength:11},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:250,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:248,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:244,columnNumber:13},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"身份证号 *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:264,columnNumber:15},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:268,columnNumber:17},this),n.jsxDEV("input",{type:"text",name:"id_card",value:e.id_card,onChange:V,className:"w-full pl-10 pr-4 py-2 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",placeholder:"请输入身份证号码",maxLength:18},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:269,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:267,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:263,columnNumber:13},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"姓名 *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:283,columnNumber:15},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(N,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:287,columnNumber:17},this),n.jsxDEV("input",{type:"text",name:"name",value:e.name,onChange:V,className:"w-full pl-10 pr-4 py-2 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",placeholder:"请输入真实姓名"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:288,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:286,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:282,columnNumber:13},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"所属公司 *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:303,columnNumber:15},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(x,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:307,columnNumber:17},this),n.jsxDEV("select",{name:"company_id",value:e.company_id,onChange:V,className:"w-full pl-10 pr-4 py-2 bg-black border border-green-400 rounded text-green-300 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",children:[n.jsxDEV("option",{value:"",children:"请选择公司"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:314,columnNumber:19},this),w.map(e=>n.jsxDEV("option",{value:e.id,children:e.name},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:316,columnNumber:21},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:308,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:306,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:302,columnNumber:13},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"用户角色 *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:326,columnNumber:15},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(p,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:330,columnNumber:17},this),n.jsxDEV("select",{name:"role_id",value:e.role_id,onChange:V,className:"w-full pl-10 pr-4 py-2 bg-black border border-green-400 rounded text-green-300 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",children:[n.jsxDEV("option",{value:"",children:"请选择角色"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:337,columnNumber:19},this),S.map(e=>n.jsxDEV("option",{value:e.id,children:e.name},e.id,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:339,columnNumber:21},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:331,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:329,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:325,columnNumber:13},this),D&&n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"生产线 *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:350,columnNumber:17},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(k,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:354,columnNumber:19},this),n.jsxDEV("select",{name:"production_line",value:e.production_line,onChange:V,className:"w-full pl-10 pr-4 py-2 bg-black border border-green-400 rounded text-green-300 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",children:[n.jsxDEV("option",{value:"",children:"请选择生产线"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:361,columnNumber:21},this),C.map(e=>n.jsxDEV("option",{value:e,children:e},e,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:363,columnNumber:23},this))]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:355,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:353,columnNumber:17},this),0===C.length&&e.company_id&&n.jsxDEV("div",{className:"mt-1 text-yellow-400 text-xs font-mono",children:"该公司暂无可用生产线"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:370,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:349,columnNumber:15},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"登录密码 *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:379,columnNumber:15},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:383,columnNumber:17},this),n.jsxDEV("input",{type:m?"text":"password",name:"password",value:e.password,onChange:V,className:"w-full pl-10 pr-10 py-2 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono text-sm",placeholder:"请输入密码（至少6位）"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:384,columnNumber:17},this),n.jsxDEV("button",{type:"button",onClick:()=>r(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-400 hover:text-green-300",children:m?n.jsxDEV(h,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:397,columnNumber:35},this):n.jsxDEV(g,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:397,columnNumber:68},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:392,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:382,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:378,columnNumber:13},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-1",children:"确认密码 *"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:404,columnNumber:15},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:408,columnNumber:17},this),n.jsxDEV("input",{type:i?"text":"password",name:"confirmPassword",value:e.confirmPassword,onChange:V,className:"w-full pl-10 pr-10 py-2 bg-black border rounded text-green-300 placeholder-green-600 focus:outline-none focus:ring-1 font-mono text-sm ".concat(A?"border-red-400 focus:border-red-300 focus:ring-red-300":"border-green-400 focus:border-green-300 focus:ring-green-300"),placeholder:"请再次输入密码"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:409,columnNumber:17},this),n.jsxDEV("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-400 hover:text-green-300",children:i?n.jsxDEV(h,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:424,columnNumber:42},this):n.jsxDEV(g,{className:"w-4 h-4"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:424,columnNumber:75},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:419,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:407,columnNumber:15},this),A&&n.jsxDEV("div",{className:"mt-1 text-red-400 text-xs font-mono",children:A},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:428,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:403,columnNumber:13},this),n.jsxDEV("button",{type:"submit",disabled:o,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:bg-green-800 text-black font-bold rounded-lg transition-colors duration-200 font-mono text-lg mt-6",children:o?"注册中...":"注册"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:435,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:242,columnNumber:11},this),n.jsxDEV("div",{className:"mt-6 text-center",children:n.jsxDEV(b,{to:"/login",className:"text-green-400 hover:text-green-300 text-sm font-mono transition-colors",children:"已有账号？立即登录"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:446,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:445,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:231,columnNumber:9},this),n.jsxDEV("div",{className:"text-center text-green-600 text-xs font-mono",children:n.jsxDEV("p",{children:"© 2024 工时管理系统. All rights reserved."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:457,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:456,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:218,columnNumber:7},this),n.jsxDEV(se,{isOpen:q,onClose:()=>{U(!1),z("/login")},userName:e.name,userPhone:e.phone},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:462,columnNumber:7},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/Register.tsx",lineNumber:217,columnNumber:5},this)}function me(){const[e,t]=s.useState("verify"),[m,r]=s.useState({id_card:"",newPassword:"",confirmPassword:""}),[i,a]=s.useState(!1),[o,c]=s.useState(!1),[d,N]=s.useState(!1),[y,p]=s.useState(""),[f,w]=s.useState(""),[x,k]=s.useState(null),{resetPassword:S}=X(),_=l(),A=e=>{const{name:t,value:s}=e.target;if(r(e=>({...e,[t]:s})),"confirmPassword"===t||"newPassword"===t){const e="newPassword"===t?s:m.newPassword,n="confirmPassword"===t?s:m.confirmPassword;w(n&&e!==n?"两次输入的密码不一致":"")}};return n.jsxDEV("div",{className:"min-h-screen bg-black flex items-center justify-center px-4",children:n.jsxDEV("div",{className:"max-w-md w-full space-y-8",children:[n.jsxDEV("div",{className:"text-center",children:[n.jsxDEV("h1",{className:"text-4xl font-bold text-green-400 mb-2 font-mono",children:"工时管理系统"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:124,columnNumber:11},this),n.jsxDEV("p",{className:"text-green-300 text-lg font-mono",children:"TIMETRACK SYSTEM"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:127,columnNumber:11},this),n.jsxDEV("div",{className:"mt-4 h-1 bg-gradient-to-r from-transparent via-green-400 to-transparent"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:130,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:123,columnNumber:9},this),n.jsxDEV("div",{className:"bg-gray-900 border border-green-400 rounded-lg p-8 shadow-lg shadow-green-400/20",children:[n.jsxDEV("div",{className:"flex items-center mb-6",children:[n.jsxDEV("button",{onClick:()=>{"reset"===e?(t("verify"),k(null),p("")):_("/login")},className:"text-green-400 hover:text-green-300 mr-3 transition-colors",children:n.jsxDEV(R,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:140,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:136,columnNumber:13},this),n.jsxDEV("h2",{className:"text-2xl font-bold text-green-400 font-mono",children:"verify"===e?"身份验证":"重置密码"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:142,columnNumber:13},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:135,columnNumber:11},this),y&&n.jsxDEV("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-400 rounded text-red-300 text-sm",children:y},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:148,columnNumber:13},this),"verify"===e?n.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),N(!0),p(""),!m.id_card)return p("请输入身份证号码"),void N(!1);if(!/^[1-9]\d{5}(18|19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(m.id_card))return p("请输入正确的身份证号码"),void N(!1);const s=await S(m.id_card);s.success&&s.user?(k(s.user),t("reset"),p("")):p(s.error||"身份证号码验证失败，请检查后重试"),N(!1)},className:"space-y-6",children:[n.jsxDEV("div",{className:"text-center mb-6",children:n.jsxDEV("p",{className:"text-green-300 text-sm font-mono",children:"请输入您的身份证号码进行身份验证"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:156,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:155,columnNumber:15},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-2",children:"身份证号码"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:163,columnNumber:17},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:167,columnNumber:19},this),n.jsxDEV("input",{type:"text",name:"id_card",value:m.id_card,onChange:A,className:"w-full pl-12 pr-4 py-3 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono",placeholder:"请输入身份证号码",maxLength:18},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:168,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:166,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:162,columnNumber:15},this),n.jsxDEV("button",{type:"submit",disabled:d,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:bg-green-800 text-black font-bold rounded-lg transition-colors duration-200 font-mono text-lg",children:d?"验证中...":"验证身份"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:181,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:154,columnNumber:13},this):n.jsxDEV("form",{onSubmit:async e=>{if(e.preventDefault(),N(!0),p(""),!m.newPassword||!m.confirmPassword)return p("请填写新密码和确认密码"),void N(!1);if(m.newPassword!==m.confirmPassword)return p("两次输入的密码不一致"),w("两次输入的密码不一致"),void N(!1);if(6>m.newPassword.length)return p("密码长度至少6位"),void N(!1);const t=await S(m.id_card,m.newPassword);t.success?(alert("密码重置成功，请使用新密码登录"),_("/login")):p(t.error||"密码重置失败"),N(!1)},className:"space-y-6",children:[x&&n.jsxDEV("div",{className:"bg-green-900/30 border border-green-400 rounded p-4 mb-6",children:[n.jsxDEV("p",{className:"text-green-300 text-sm font-mono",children:["验证成功！正在为用户 ",n.jsxDEV("span",{className:"text-green-400 font-bold",children:x.name},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:194,columnNumber:32},this)," 重置密码"]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:193,columnNumber:19},this),n.jsxDEV("p",{className:"text-green-400 text-xs font-mono mt-1",children:["手机号: ",x.phone]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:196,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:192,columnNumber:17},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-2",children:"新密码"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:204,columnNumber:17},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:208,columnNumber:19},this),n.jsxDEV("input",{type:i?"text":"password",name:"newPassword",value:m.newPassword,onChange:A,className:"w-full pl-12 pr-12 py-3 bg-black border border-green-400 rounded text-green-300 placeholder-green-600 focus:outline-none focus:border-green-300 focus:ring-1 focus:ring-green-300 font-mono",placeholder:"请输入新密码（至少6位）"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:209,columnNumber:19},this),n.jsxDEV("button",{type:"button",onClick:()=>a(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-400 hover:text-green-300",children:i?n.jsxDEV(h,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:222,columnNumber:37},this):n.jsxDEV(g,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:222,columnNumber:70},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:217,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:207,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:203,columnNumber:15},this),n.jsxDEV("div",{children:[n.jsxDEV("label",{className:"block text-green-300 text-sm font-mono mb-2",children:"确认新密码"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:229,columnNumber:17},this),n.jsxDEV("div",{className:"relative",children:[n.jsxDEV(u,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-green-400 w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:233,columnNumber:19},this),n.jsxDEV("input",{type:o?"text":"password",name:"confirmPassword",value:m.confirmPassword,onChange:A,className:"w-full pl-12 pr-12 py-3 bg-black border rounded text-green-300 placeholder-green-600 focus:outline-none focus:ring-1 font-mono ".concat(f?"border-red-400 focus:border-red-300 focus:ring-red-300":"border-green-400 focus:border-green-300 focus:ring-green-300"),placeholder:"请再次输入新密码"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:234,columnNumber:19},this),n.jsxDEV("button",{type:"button",onClick:()=>c(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-400 hover:text-green-300",children:o?n.jsxDEV(h,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:249,columnNumber:44},this):n.jsxDEV(g,{className:"w-5 h-5"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:249,columnNumber:77},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:244,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:232,columnNumber:17},this),f&&n.jsxDEV("div",{className:"mt-1 text-red-400 text-xs font-mono",children:f},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:253,columnNumber:19},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:228,columnNumber:15},this),n.jsxDEV("button",{type:"submit",disabled:d,className:"w-full py-3 bg-green-600 hover:bg-green-500 disabled:bg-green-800 text-black font-bold rounded-lg transition-colors duration-200 font-mono text-lg",children:d?"重置中...":"重置密码"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:260,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:190,columnNumber:13},this),n.jsxDEV("div",{className:"mt-6 text-center",children:n.jsxDEV(b,{to:"/login",className:"text-green-400 hover:text-green-300 text-sm font-mono transition-colors",children:"返回登录"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:272,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:271,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:134,columnNumber:9},this),n.jsxDEV("div",{className:"text-center text-green-600 text-xs font-mono",children:n.jsxDEV("p",{children:"© 2024 工时管理系统. All rights reserved."},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:283,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:282,columnNumber:9},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:121,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/pages/ResetPassword.tsx",lineNumber:120,columnNumber:5},this)}const re=s.lazy(()=>P(()=>import("./Dashboard-CEr-XzGn.js"),__vite__mapDeps([0,1,2,3,4,5]))),ie=s.lazy(()=>P(()=>import("./TimesheetRecord-BK5ByfmV.js"),__vite__mapDeps([6,1,2,5,4]))),ae=s.lazy(()=>P(()=>import("./TimesheetHistory-7b3k1hIu.js"),__vite__mapDeps([7,1,2,5,4]))),oe=s.lazy(()=>P(()=>import("./CompanyManagement-CEZWCYJn.js"),__vite__mapDeps([8,1,2,3,4,5]))),le=s.lazy(()=>P(()=>import("./UserManagement-D09rydla.js"),__vite__mapDeps([9,1,2,5,4]))),ce=s.lazy(()=>P(()=>import("./ProcessManagement-CPV2pzEQ.js"),__vite__mapDeps([10,1,2,5,11,4]))),ue=s.lazy(()=>P(()=>import("./RoleList-BCP5j5zK.js"),__vite__mapDeps([12,1,2,4,5]))),he=s.lazy(()=>P(()=>import("./RoleEdit-uvaJP0y7.js"),__vite__mapDeps([13,1,2,4,5]))),ge=s.lazy(()=>P(()=>import("./RoleCreate-DdtEKK4e.js"),__vite__mapDeps([14,1,2,4,5]))),de=s.lazy(()=>P(()=>import("./SupervisorApproval--w1KIWqu.js"),__vite__mapDeps([15,1,2,5,4]))),Ne=s.lazy(()=>P(()=>import("./SectionChiefApproval-WoVI-Ubn.js"),__vite__mapDeps([16,1,2,5,4]))),be=s.lazy(()=>P(()=>import("./Reports-0Tl1d_7j.js"),__vite__mapDeps([17,2,1,5,4]))),ye=s.lazy(()=>P(()=>import("./History-CW68e-Co.js"),__vite__mapDeps([18,1,2,5,4]))),pe=s.lazy(()=>P(()=>import("./ToastTest-Ct27eo68.js"),__vite__mapDeps([19,1,2,5]))),fe=()=>{const[e,t]=s.useState("正在加载..."),[m,r]=s.useState(!1),[i,a]=s.useState(!1);return s.useEffect(()=>{const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;e&&a(["slow-2g","2g","3g"].includes(e.effectiveType));const s=setTimeout(()=>{t("加载时间较长，请稍候...")},3e3),n=setTimeout(()=>{t("网络较慢，正在努力加载...")},8e3),m=setTimeout(()=>{r(!0),t("加载超时，请检查网络连接")},15e3);return()=>{clearTimeout(s),clearTimeout(n),clearTimeout(m)}},[]),n.jsxDEV("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 px-4",children:n.jsxDEV("div",{className:"text-center",children:[n.jsxDEV("div",{className:"relative mb-6",children:[n.jsxDEV("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mx-auto"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:88,columnNumber:11},void 0),i&&n.jsxDEV("div",{className:"absolute -top-2 -right-2 w-6 h-6 bg-orange-500 rounded-full flex items-center justify-center",children:n.jsxDEV("span",{className:"text-white text-xs",children:"!"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:91,columnNumber:15},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:90,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:87,columnNumber:9},void 0),n.jsxDEV("p",{className:"text-gray-600 mb-4 text-lg",children:e},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:97,columnNumber:9},void 0),i&&n.jsxDEV("p",{className:"text-orange-600 text-sm mb-4",children:"检测到网络连接较慢，加载可能需要更长时间"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:101,columnNumber:11},void 0),m&&n.jsxDEV("div",{className:"space-y-3",children:[n.jsxDEV("button",{onClick:()=>{window.location.reload()},className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"重新加载"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:109,columnNumber:13},void 0),n.jsxDEV("p",{className:"text-gray-500 text-sm",children:"如果问题持续存在，请检查网络连接或稍后再试"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:115,columnNumber:13},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:108,columnNumber:11},void 0),n.jsxDEV("div",{className:"mt-6 w-64 mx-auto",children:n.jsxDEV("div",{className:"w-full bg-gray-200 rounded-full h-2",children:n.jsxDEV("div",{className:"bg-blue-600 h-2 rounded-full animate-pulse",style:{width:"60%"}},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:124,columnNumber:13},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:123,columnNumber:11},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:122,columnNumber:9},void 0)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:85,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:84,columnNumber:5},void 0)};class we extends s.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t})}render(){var e;return this.state.hasError?n.jsxDEV("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 px-4",children:n.jsxDEV("div",{className:"max-w-md text-center",children:[n.jsxDEV("div",{className:"mb-6",children:[n.jsxDEV("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:n.jsxDEV("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n.jsxDEV("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 18.5c-.77.833.192 2.5 1.732 2.5z"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:165,columnNumber:19},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:164,columnNumber:17},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:163,columnNumber:15},this),n.jsxDEV("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"应用出现错误"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:168,columnNumber:15},this),n.jsxDEV("p",{className:"text-gray-600 mb-6",children:"抱歉，应用遇到了一个意外错误。请尝试刷新页面或稍后再试。"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:169,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:162,columnNumber:13},this),n.jsxDEV("div",{className:"space-y-3",children:[n.jsxDEV("button",{onClick:()=>window.location.reload(),className:"w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"刷新页面"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:175,columnNumber:15},this),n.jsxDEV("button",{onClick:()=>this.setState({hasError:!1}),className:"w-full px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300 transition-colors",children:"重试"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:181,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:174,columnNumber:13},this),this.state.error&&n.jsxDEV("details",{className:"mt-6 text-left",children:[n.jsxDEV("summary",{className:"cursor-pointer text-sm text-gray-500 hover:text-gray-700",children:"查看错误详情"},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:192,columnNumber:17},this),n.jsxDEV("pre",{className:"mt-2 p-3 bg-gray-100 rounded text-xs overflow-auto max-h-40",children:[this.state.error.toString(),null==(e=this.state.errorInfo)?void 0:e.componentStack]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:195,columnNumber:17},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:191,columnNumber:15},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:161,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:160,columnNumber:9},this):this.props.children}}const ve=({children:e})=>{const t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||768>=window.innerWidth;return n.jsxDEV(s.Suspense,{fallback:t?n.jsxDEV(ee,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:266,columnNumber:36},void 0):n.jsxDEV(fe,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:266,columnNumber:63},void 0),children:n.jsxDEV(we,{children:e},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:267,columnNumber:7},void 0)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:266,columnNumber:5},void 0)};function xe(){return s.useEffect(()=>{(()=>{const e=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||768>=window.innerWidth,t=navigator.connection||navigator.mozConnection||navigator.webkitConnection,s=t&&["slow-2g","2g","3g"].includes(t.effectiveType);e?s||(setTimeout(()=>{var e,t;null==(e=re.preload)||e.call(re),null==(t=ie.preload)||t.call(ie)},3e3),setTimeout(()=>{var e;null==(e=ae.preload)||e.call(ae)},8e3)):("requestIdleCallback"in window?requestIdleCallback(()=>{var e,t,s;null==(e=re.preload)||e.call(re),null==(t=ie.preload)||t.call(ie),null==(s=ae.preload)||s.call(ae)}):setTimeout(()=>{var e,t,s;null==(e=re.preload)||e.call(re),null==(t=ie.preload)||t.call(ie),null==(s=ae.preload)||s.call(ae)},2e3),setTimeout(()=>{var e,t;null==(e=oe.preload)||e.call(oe),null==(t=le.preload)||t.call(le)},5e3))})()},[]),n.jsxDEV(we,{children:n.jsxDEV(H,{children:n.jsxDEV(S,{basename:"/timesheet-management-system",children:[n.jsxDEV($,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:285,columnNumber:11},this),n.jsxDEV(Z,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:286,columnNumber:11},this),n.jsxDEV(C,{position:"top-right",richColors:!0},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:287,columnNumber:11},this),n.jsxDEV(_,{children:[n.jsxDEV(A,{path:"/login",element:n.jsxDEV(te,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:290,columnNumber:41},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:290,columnNumber:11},this),n.jsxDEV(A,{path:"/register",element:n.jsxDEV(ne,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:291,columnNumber:44},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:291,columnNumber:11},this),n.jsxDEV(A,{path:"/reset-password",element:n.jsxDEV(me,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:292,columnNumber:50},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:292,columnNumber:11},this),n.jsxDEV(A,{path:"/",element:n.jsxDEV(Q,{children:n.jsxDEV(r,{to:"/dashboard",replace:!0},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:297,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:296,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:295,columnNumber:11},this),n.jsxDEV(A,{path:"/dashboard",element:n.jsxDEV(Q,{children:n.jsxDEV(ve,{children:n.jsxDEV(re,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:302,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:302,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:301,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:300,columnNumber:11},this),n.jsxDEV(A,{path:"/company-management",element:n.jsxDEV(Q,{children:n.jsxDEV(ve,{children:n.jsxDEV(oe,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:307,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:307,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:306,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:305,columnNumber:11},this),n.jsxDEV(A,{path:"/user-management",element:n.jsxDEV(Q,{children:n.jsxDEV(ve,{children:n.jsxDEV(le,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:312,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:312,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:311,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:310,columnNumber:11},this),n.jsxDEV(A,{path:"/role-permissions",element:n.jsxDEV(Q,{children:n.jsxDEV(ve,{children:n.jsxDEV(ue,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:317,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:317,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:316,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:315,columnNumber:11},this),n.jsxDEV(A,{path:"/role-permissions/edit/:id",element:n.jsxDEV(Q,{children:n.jsxDEV(ve,{children:n.jsxDEV(he,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:323,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:323,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:322,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:321,columnNumber:11},this),n.jsxDEV(A,{path:"/role-permissions/create",element:n.jsxDEV(Q,{children:n.jsxDEV(ve,{children:n.jsxDEV(ge,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:328,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:328,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:327,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:326,columnNumber:11},this),n.jsxDEV(A,{path:"/process-management",element:n.jsxDEV(Q,{children:n.jsxDEV(ve,{children:n.jsxDEV(ce,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:333,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:333,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:332,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:331,columnNumber:11},this),n.jsxDEV(A,{path:"/timesheet-record",element:n.jsxDEV(Q,{children:n.jsxDEV(ve,{children:n.jsxDEV(ie,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:338,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:338,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:337,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:336,columnNumber:11},this),n.jsxDEV(A,{path:"/timesheet-history",element:n.jsxDEV(Q,{children:n.jsxDEV(ve,{children:n.jsxDEV(ae,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:343,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:343,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:342,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:341,columnNumber:11},this),n.jsxDEV(A,{path:"/supervisor-approval",element:n.jsxDEV(K,{allowedRoles:["班长","supervisor","超级管理员","super_admin"],children:n.jsxDEV(ve,{children:n.jsxDEV(de,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:348,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:348,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:347,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:346,columnNumber:11},this),n.jsxDEV(A,{path:"/section-chief-approval",element:n.jsxDEV(K,{allowedRoles:["段长","section_chief","超级管理员","super_admin"],children:n.jsxDEV(ve,{children:n.jsxDEV(Ne,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:353,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:353,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:352,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:351,columnNumber:11},this),n.jsxDEV(A,{path:"/reports",element:n.jsxDEV(Q,{children:n.jsxDEV(ve,{children:n.jsxDEV(be,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:358,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:358,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:357,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:356,columnNumber:11},this),n.jsxDEV(A,{path:"/history",element:n.jsxDEV(Q,{children:n.jsxDEV(ve,{children:n.jsxDEV(ye,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:363,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:363,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:362,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:361,columnNumber:11},this),n.jsxDEV(A,{path:"/toast-test",element:n.jsxDEV(Q,{children:n.jsxDEV(ve,{children:n.jsxDEV(pe,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:368,columnNumber:28},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:368,columnNumber:15},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:367,columnNumber:13},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:366,columnNumber:11},this),n.jsxDEV(A,{path:"*",element:n.jsxDEV(r,{to:"/dashboard",replace:!0},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:375,columnNumber:36},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:375,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:288,columnNumber:11},this)]},void 0,!0,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:284,columnNumber:9},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:283,columnNumber:7},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/App.tsx",lineNumber:282,columnNumber:5},this)}const ke=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||768>=window.innerWidth,Re=()=>{const e=(()=>{const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return e&&e.effectiveType||"unknown"})();return["slow-2g","2g","3g"].includes(e)},Se=()=>{ke()&&((()=>{if(ke()&&!Re()){const e=(()=>{var e,t,s;const n=Array.from(document.querySelectorAll("script[src]")),m=Array.from(document.querySelectorAll('link[rel="stylesheet"]'));return{reactVendor:(null==(e=n.find(e=>e.src.includes("react-vendor")))?void 0:e.src)||"",mainCSS:(null==(t=m.find(e=>e.href.includes("index-")))?void 0:t.href)||"",vendor:(null==(s=n.find(e=>e.src.includes("vendor-")))?void 0:s.src)||""}})();if(e.mainCSS){const t=document.createElement("link");t.rel="preload",t.as="style",t.href=e.mainCSS,document.head.appendChild(t)}if(e.vendor){const t=document.createElement("link");t.rel="modulepreload",t.href=e.vendor,document.head.appendChild(t)}}})(),setTimeout(()=>{ke()&&!Re()&&setTimeout(()=>{const e=document.createElement("link");e.rel="preload",e.as="font",e.type="font/woff2",e.crossOrigin="anonymous",e.href="/timesheet-management-system/fonts/icons.woff2",document.head.appendChild(e)},2e3),(()=>{if(ke()){const e=document.querySelectorAll("img[data-src]");if("IntersectionObserver"in window){const t=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){const s=e.target;s.src=s.dataset.src||"",s.classList.remove("lazy"),t.unobserve(s)}})});e.forEach(e=>t.observe(e))}else e.forEach(e=>{const t=e;t.src=t.dataset.src||""})}})(),(()=>{if(ke()){const e=document.createElement("meta");e.httpEquiv="Cache-Control",e.content="public, max-age=31536000, immutable",document.head.appendChild(e)}})(),ke()&&"PerformanceObserver"in window&&new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"first-contentful-paint"===e.name&&e.startTime})}).observe({entryTypes:["paint"]}),(()=>{if(ke()&&"memory"in performance){const e=performance.memory,t={used:Math.round(e.usedJSHeapSize/1048576),total:Math.round(e.totalJSHeapSize/1048576),limit:Math.round(e.jsHeapSizeLimit/1048576)};t.used/t.limit>.8&&ke()&&document.querySelectorAll('[style*="display: none"]').forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)})}})()},1e3),setTimeout(()=>{(async()=>{if("caches"in window&&ke()){const e=(await caches.keys()).filter(e=>!e.includes("v1.2.0"));await Promise.all(e.map(e=>caches.delete(e)))}})()},5e3))};Array.from||(Array.from=function(){const e={}.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)};return function(e,s,n){const m=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");const r=void 0===s?void 0:s;if(void 0!==r){if(!t(r))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(n=arguments[2])}const i=function(e){const t=function(e){const t=+e;return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),9007199254740991)}(m.length),a=t(this)?Object(new this(i)):Array(i);let o,l=0;for(;i>l;)o=m[l],a[l]=r?void 0===n?r(o,l):r.call(n,o,l):o,l+=1;return a.length=i,a}}()),[].includes||(Array.prototype.includes=function(e,t){if(null==this)throw new TypeError("Array.prototype.includes called on null or undefined");const s=Object(this),n=parseInt(s.length)||0;if(0===n)return!1;const m=parseInt(t)||0;let r,i;for(0>m?(r=n+m,0>r&&(r=0)):r=m;n>r;){if(i=s[r],e===i||e!=e&&i!=i)return!0;r++}return!1}),"".includes||(String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),t+e.length<=this.length&&-1!==this.indexOf(e,t)}),"".startsWith||(String.prototype.startsWith=function(e,t){return t=t||0,this.substr(t,e.length)===e}),"".endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");const t=Object(e),s=[].slice.call(arguments,1);for(let n=0;n<s.length;n++){const e=s[n];if(null!=e)for(const s in e)({}).hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t}),"undefined"==typeof Promise&&(window.Promise=class e{constructor(e){t(this,"state","pending"),t(this,"value"),t(this,"handlers",[]);try{e(this.resolve.bind(this),this.reject.bind(this))}catch(s){this.reject(s)}}resolve(e){"pending"===this.state&&(this.state="fulfilled",this.value=e,this.handlers.forEach(e=>this.handle(e)),this.handlers=[])}reject(e){"pending"===this.state&&(this.state="rejected",this.value=e,this.handlers.forEach(e=>this.handle(e)),this.handlers=[])}handle(e){"pending"===this.state?this.handlers.push(e):("fulfilled"===this.state&&"function"==typeof e.onFulfilled&&e.onFulfilled(this.value),"rejected"===this.state&&"function"==typeof e.onRejected&&e.onRejected(this.value))}then(t,s){return new e((e,n)=>{this.handle({onFulfilled:s=>{if("function"==typeof t)try{e(t(s))}catch(m){n(m)}else e(s)},onRejected:t=>{if("function"==typeof s)try{e(s(t))}catch(m){n(m)}else n(t)},resolve:e,reject:n})})}catch(e){return this.then(void 0,e)}static resolve(t){return new e(e=>e(t))}static reject(t){return new e((e,s)=>s(t))}static all(t){return new e((e,s)=>{if(0===t.length)return void e([]);const n=[];let m=0;t.forEach((r,i)=>{r.then(s=>{n[i]=s,m++,m===t.length&&e(n)}).catch(s)})})}}),"undefined"==typeof fetch&&(window.fetch=function(e,t={}){return new Promise((s,n)=>{const m=new XMLHttpRequest;m.open(t.method||"GET",e),t.headers&&Object.keys(t.headers).forEach(e=>{m.setRequestHeader(e,t.headers[e])}),m.onload=()=>{const e={ok:m.status>=200&&300>m.status,status:m.status,statusText:m.statusText,json:()=>Promise.resolve(JSON.parse(m.responseText)),text:()=>Promise.resolve(m.responseText)};s(e)},m.onerror=()=>n(Error("Network error")),m.send(t.body)})}),"undefined"==typeof IntersectionObserver&&(window.IntersectionObserver=class{constructor(e,s={}){t(this,"callback"),t(this,"options"),t(this,"targets",[]),this.callback=e,this.options=s,setTimeout(()=>{this.checkIntersections()},100)}observe(e){this.targets.push(e)}unobserve(e){const t=this.targets.indexOf(e);t>-1&&this.targets.splice(t,1)}disconnect(){this.targets=[]}checkIntersections(){const e=this.targets.map(e=>({target:e,isIntersecting:!0,intersectionRatio:1}));e.length>0&&this.callback(e)}});const _e=new class{constructor(){t(this,"networkInfo"),t(this,"connectionPool",new Map),t(this,"requestQueue",[]),t(this,"isProcessingQueue",!1),t(this,"connectionHealth",new Map),t(this,"lastSuccessfulUrl",null),this.networkInfo=this.detectNetworkInfo(),this.setupNetworkMonitoring(),this.setupConnectionHealthCheck()}detectNetworkInfo(){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;if(e)return{type:e.type||"unknown",effectiveType:e.effectiveType||"unknown",downlink:e.downlink||0,rtt:e.rtt||0,saveData:e.saveData||!1};const t=navigator.userAgent.toLowerCase(),s=/mobile|android|iphone|ipad|ipod|blackberry|iemobile|opera mini/.test(t);return{type:s?"4g":"wifi",effectiveType:"4g",downlink:s?1.5:10,rtt:s?150:50,saveData:!1}}setupNetworkMonitoring(){window.addEventListener("online",()=>{this.processRequestQueue()}),window.addEventListener("offline",()=>{this.clearConnectionPool()});const e=navigator.connection;e&&e.addEventListener("change",()=>{this.networkInfo=this.detectNetworkInfo()}),document.addEventListener("visibilitychange",()=>{document.hidden||setTimeout(()=>this.checkConnectionHealth(),1e3)})}setupConnectionHealthCheck(){setInterval(()=>{this.checkConnectionHealth()},3e4)}async checkConnectionHealth(){const e=[window.location.origin,"https://www.google.com/favicon.ico","https://cdn.jsdelivr.net/npm/vue@3/dist/vue.global.js"];for(const s of e)try{const e=performance.now(),t=await this.makeRequest(s,{method:"HEAD",timeout:5e3,retries:1}),n=performance.now()-e;if(t.ok){this.connectionHealth.set(s,n),this.lastSuccessfulUrl||(this.lastSuccessfulUrl=s);break}}catch(t){this.connectionHealth.set(s,-1)}}getConnectionConfig(e){const t={timeout:1e4,retries:3,backoffMultiplier:1.5,maxBackoff:3e4,protocols:["https:","http:"],fallbackUrls:[]};switch(this.networkInfo.effectiveType){case"slow-2g":case"2g":return{...t,timeout:3e4,retries:5,backoffMultiplier:2};case"3g":return{...t,timeout:2e4,retries:4,backoffMultiplier:1.8};case"4g":case"5g":return{...t,timeout:8e3,retries:3,backoffMultiplier:1.3};default:return t}}async makeRequest(e,t={}){const s=this.getConnectionConfig(e),n=t.timeout||s.timeout,m=t.retries||s.retries;return navigator.onLine?this.executeRequest(e,t,n,m):new Promise((s,r)=>{this.requestQueue.push(async()=>{try{const r=await this.executeRequest(e,t,n,m);s(r)}catch(i){r(i)}})})}async executeRequest(e,t,s,n){let m=null;const r=this.getConnectionConfig(e);for(let o=0;n>=o;o++)try{const n=new AbortController,m="".concat(e,"-").concat(Date.now(),"-").concat(o);this.connectionPool.set(m,n);const r=setTimeout(()=>{n.abort()},s),i={...t,signal:n.signal,cache:"no-cache",mode:"cors",credentials:"same-origin",headers:{Connection:"keep-alive","Cache-Control":"no-cache",Pragma:"no-cache",...t.headers}},a=await fetch(e,i);if(clearTimeout(r),this.connectionPool.delete(m),a.ok)return this.lastSuccessfulUrl=e,a;throw Error("HTTP ".concat(a.status,": ").concat(a.statusText))}catch(i){if(m=i,"AbortError"!==i.name&&!i.message.includes("CONNECTION_RESET")&&!i.message.includes("ERR_CONNECTION_RESET"))throw i;if(n>o){const n=Math.min(r.backoffMultiplier**o*1e3,r.maxBackoff);if(await this.delay(n),this.clearConnectionPool(),this.lastSuccessfulUrl&&this.lastSuccessfulUrl!==e)try{return await this.executeRequest(this.lastSuccessfulUrl,t,s,1)}catch(a){}}}throw m||Error("网络请求失败")}async processRequestQueue(){if(!this.isProcessingQueue&&0!==this.requestQueue.length){for(this.isProcessingQueue=!0;this.requestQueue.length>0;){const t=this.requestQueue.shift();if(t)try{await t()}catch(e){}}this.isProcessingQueue=!1}}clearConnectionPool(){for(const[e,t]of this.connectionPool)t.abort(),this.connectionPool.delete(e)}delay(e){return new Promise(t=>setTimeout(t,e))}getNetworkInfo(){return{...this.networkInfo}}getConnectionHealth(){return new Map(this.connectionHealth)}destroy(){this.clearConnectionPool(),this.requestQueue=[]}};new class{constructor(){t(this,"config"),t(this,"settings"),t(this,"connectionAttempts",new Map),t(this,"lastSuccessfulConnection",null),t(this,"networkQuality",1),this.config=this.detectMobileNetwork(),this.settings=this.getOptimizationSettings(),this.setupMobileNetworkMonitoring(),this.initializeConnectionRecovery()}detectMobileNetwork(){navigator.userAgent.toLowerCase();const e=navigator.connection;let t="unknown";e&&e.type&&(t="unknown");let s="unknown";if(e)switch(e.effectiveType){case"slow-2g":case"2g":s="2g";break;case"3g":s="3g";break;case"4g":s="4g";break;default:s="wifi"===e.type?"wifi":"4g"}let n="unknown";if(e){const t=e.rtt||0,s=e.downlink||0;n=100>t&&s>5?"strong":300>t&&s>1?"medium":"weak"}return{carrierType:t,networkType:s,signalStrength:n,isRoaming:!1,dataUsageMode:(null==e?void 0:e.saveData)?"limited":"unlimited"}}getOptimizationSettings(){const e={enableDataCompression:!0,enableImageOptimization:!0,enableLazyLoading:!0,maxConcurrentRequests:3,requestTimeout:15e3,retryAttempts:5};switch(this.config.networkType){case"2g":return{...e,maxConcurrentRequests:1,requestTimeout:3e4,retryAttempts:8};case"3g":return{...e,maxConcurrentRequests:2,requestTimeout:2e4,retryAttempts:6};case"4g":case"5g":return{...e,maxConcurrentRequests:4,requestTimeout:1e4,retryAttempts:4};case"wifi":return{...e,maxConcurrentRequests:6,requestTimeout:8e3,retryAttempts:3};default:return e}}setupMobileNetworkMonitoring(){const e=navigator.connection;e&&e.addEventListener("change",()=>{this.config=this.detectMobileNetwork(),this.settings=this.getOptimizationSettings(),this.updateNetworkQuality()}),document.addEventListener("visibilitychange",()=>{document.hidden||setTimeout(()=>{this.performConnectionTest()},1e3)}),window.addEventListener("orientationchange",()=>{setTimeout(()=>{this.performConnectionTest()},2e3)})}initializeConnectionRecovery(){setInterval(()=>{this.performConnectionTest()},6e4),window.addEventListener("online",()=>{setTimeout(()=>{this.performConnectionTest()},2e3)})}async performConnectionTest(){const e=["".concat(window.location.origin,"/manifest.json"),"https://www.baidu.com/favicon.ico","https://cdn.jsdelivr.net/npm/vue@3/package.json"];let t=0;const s=performance.now();for(const r of e)try{(await _e.makeRequest(r,{method:"HEAD",timeout:this.settings.requestTimeout,retries:1})).ok&&(t++,this.lastSuccessfulConnection=new Date)}catch(m){}const n=performance.now()-s;this.networkQuality=t/e.length,this.updateNetworkQuality(n)}updateNetworkQuality(e){if(!navigator.connection)return;let t=1;switch(e&&(e>5e3?t*=.3:e>2e3?t*=.6:e>1e3&&(t*=.8)),this.config.networkType){case"2g":t*=.2;break;case"3g":t*=.5;break;case"4g":t*=.8;break;case"5g":case"wifi":t*=1}switch(this.config.signalStrength){case"weak":t*=.4;break;case"medium":t*=.7;break;case"strong":t*=1}this.networkQuality=Math.max(.1,t)}async makeOptimizedRequest(e,t={}){const s=this.connectionAttempts.get(e)||0;this.connectionAttempts.set(e,s+1);const n=Math.max(this.settings.requestTimeout*(1/this.networkQuality),this.settings.requestTimeout),m=Math.min(this.settings.retryAttempts+Math.floor(s/2),10);try{const s=await _e.makeRequest(e,{...t,timeout:n,retries:m,headers:{"Cache-Control":"no-cache",Connection:"keep-alive","User-Agent":navigator.userAgent,...t.headers}});return this.connectionAttempts.delete(e),this.lastSuccessfulConnection=new Date,s}catch(r){if(r.message.includes("CONNECTION_RESET")||r.message.includes("ERR_CONNECTION_RESET")){await this.delay(5e3*(s+1));try{const s=await this.makeFallbackRequest(e,t);return this.connectionAttempts.delete(e),s}catch(i){throw r}}throw r}}async makeFallbackRequest(e,t){const s={...t,cache:"force-cache",mode:"no-cors",headers:{Connection:"close",...t.headers}};return fetch(e,s)}delay(e){return new Promise(t=>setTimeout(t,e))}getMobileNetworkConfig(){return{...this.config}}getNetworkQuality(){return this.networkQuality}getOptimizationRecommendations(){const e=[];return"2g"!==this.config.networkType&&"weak"!==this.config.signalStrength||e.push("当前网络较慢，建议切换到WiFi或信号更好的位置"),"limited"===this.config.dataUsageMode&&e.push("检测到数据节省模式，已自动优化数据使用"),.5>this.networkQuality&&e.push("网络质量较差，建议稍后重试或检查网络设置"),(this.lastSuccessfulConnection?Date.now()-this.lastSuccessfulConnection.getTime():1/0)>3e5&&e.push("长时间无法连接，建议检查网络设置或重启应用"),e}resetConnectionState(){this.connectionAttempts.clear(),this.lastSuccessfulConnection=null,this.networkQuality=1}};const Ae=new class{constructor(){t(this,"retryCount",0),t(this,"maxRetries",3),t(this,"retryDelay",2e3),t(this,"connectionCheckInterval",null),this.initializeApp(),this.setupNetworkMonitoring()}setupNetworkMonitoring(){window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),this.connectionCheckInterval=setInterval(()=>{this.checkNetworkConnection()},3e4)}async checkNetworkConnection(){try{return navigator.onLine}catch(e){return navigator.onLine}}handleOnline(){this.updateLoaderText("网络连接已恢复，正在重新初始化..."),this.retryCount=0,setTimeout(()=>{this.initializeApp()},1e3)}handleOffline(){this.updateLoaderText("网络连接已断开，请检查网络设置"),this.showNetworkError()}async initializeApp(){try{if(this.updateLoaderText("正在初始化兼容性支持..."),(()=>{if(/iPhone|iPad|iPod/.test(navigator.userAgent)){const e=()=>{const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))};e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",()=>{setTimeout(e,100)})}/Android/.test(navigator.userAgent)&&document.addEventListener("touchstart",()=>{},{passive:!0}),void 0===console&&(window.console={log:()=>{},warn:()=>{},error:()=>{},info:()=>{},debug:()=>{}}),window.requestAnimationFrame||(window.requestAnimationFrame=e=>window.setTimeout(e,1e3/60)),window.cancelAnimationFrame||(window.cancelAnimationFrame=e=>{clearTimeout(e)})})(),navigator,(()=>{try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return!1}})(),CSS.supports("display","flex"),CSS.supports("display","grid"),this.updateLoaderText("正在初始化高级网络处理..."),this.updateLoaderText("正在初始化移动端网络适配..."),this.updateLoaderText("正在初始化连接稳定器..."),this.updateLoaderText("正在初始化 Safari 网络处理..."),L.onNetworkChange(e=>{e?this.updateLoaderText("网络连接正常"):this.updateLoaderText("网络连接已断开")}),this.updateLoaderText("正在初始化应用..."),!(await L.checkNetworkStatus()))return void this.handleOfflineState();await this.preloadCriticalResources(),await this.registerServiceWorker(),this.renderApp()}catch(e){this.handleInitializationError(e)}}async preloadCriticalResources(){try{this.updateLoaderText("正在加载核心资源...");const e=document.createElement("link");e.rel="prefetch",e.href="/timesheet-management-system/favicon.svg",document.head.appendChild(e),await new Promise(e=>setTimeout(e,100))}catch(e){}}async registerServiceWorker(){if("serviceWorker"in navigator&&"https:"===window.location.protocol)try{this.updateLoaderText("正在注册服务工作者..."),(await navigator.serviceWorker.register("/timesheet-management-system/sw.js",{scope:"/timesheet-management-system/"})).addEventListener("updatefound",()=>{})}catch(e){}}renderApp(){try{this.updateLoaderText("正在启动应用..."),Se();const e=document.getElementById("root");if(!e)throw Error("找不到根容器元素");E(e).render(n.jsxDEV(s.StrictMode,{children:n.jsxDEV(xe,{},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/main.tsx",lineNumber:187,columnNumber:11},this)},void 0,!1,{fileName:"/home/runner/work/timesheet-management-system/timesheet-management-system/src/main.tsx",lineNumber:186,columnNumber:9},this)),setTimeout(()=>{window.hideInitialLoader&&window.hideInitialLoader()},500)}catch(e){this.handleInitializationError(e)}}handleOfflineState(){this.updateLoaderText("当前处于离线状态"),this.showNetworkError(),setTimeout(()=>{try{this.renderApp()}catch(e){}},2e3)}handleInitializationError(e){var t,s,n;if(this.retryCount++,((null==(t=e.message)?void 0:t.includes("fetch"))||(null==(s=e.message)?void 0:s.includes("network"))||(null==(n=e.message)?void 0:n.includes("Failed to import")))&&this.retryCount<=this.maxRetries){this.updateLoaderText("网络连接失败，正在重试... (".concat(this.retryCount,"/").concat(this.maxRetries,")"));const e=this.retryDelay*Math.pow(1.5,this.retryCount-1);setTimeout(()=>{this.initializeApp()},e)}else this.retryCount>this.maxRetries?(this.updateLoaderText("应用启动失败"),this.showFinalError(e)):(this.updateLoaderText("初始化失败，正在重试... (".concat(this.retryCount,"/").concat(this.maxRetries,")")),setTimeout(()=>{this.initializeApp()},this.retryDelay))}updateLoaderText(e){const t=document.getElementById("loader-text");t&&(t.textContent=e)}showNetworkError(){const e=document.getElementById("error-message"),t=document.getElementById("retry-button");e&&t&&(e.textContent="网络连接异常，请检查网络设置后重试",e.style.display="block",t.style.display="inline-block",t.onclick=()=>{this.retryCount=0,e.style.display="none",t.style.display="none",this.initializeApp()})}showFinalError(e){const t=document.getElementById("error-message"),s=document.getElementById("retry-button");t&&s&&(t.textContent="应用启动失败: ".concat(e.message||"未知错误","。请刷新页面重试。"),t.style.display="block",s.textContent="刷新页面",s.style.display="inline-block",s.onclick=()=>{window.location.reload()})}cleanup(){this.connectionCheckInterval&&clearInterval(this.connectionCheckInterval),window.removeEventListener("online",this.handleOnline.bind(this)),window.removeEventListener("offline",this.handleOffline.bind(this))}};window.addEventListener("beforeunload",()=>{Ae.cleanup()}),window.addEventListener("error",e=>{}),window.addEventListener("unhandledrejection",e=>{});export{j as D,O as P,I as S,q as c,F as f,Y as g,B as h,V as i,M as s,X as u};
